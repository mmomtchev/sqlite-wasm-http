(()=>{"use strict";const t="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,e="function"==typeof AbortController?AbortController:class{constructor(){this.signal=new n}abort(t=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||t,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},i="function"==typeof AbortSignal,s="function"==typeof e.AbortSignal,n=i?AbortSignal:s?e.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(t){"abort"===t.type&&(this.aborted=!0,this.onabort(t),this._listeners.forEach((e=>e(t)),this))}onabort(){}addEventListener(t,e){"abort"===t&&this._listeners.push(e)}removeEventListener(t,e){"abort"===t&&(this._listeners=this._listeners.filter((t=>t!==e)))}},o=new Set,r=(t,e)=>{const i=`LRU_CACHE_OPTION_${t}`;l(i)&&c(i,`${t} option`,`options.${e}`,g)},a=(t,e)=>{const i=`LRU_CACHE_METHOD_${t}`;if(l(i)){const{prototype:s}=g,{get:n}=Object.getOwnPropertyDescriptor(s,t);c(i,`${t} method`,`cache.${e}()`,n)}},h=(...t)=>{"object"==typeof process&&process&&"function"==typeof process.emitWarning?process.emitWarning(...t):console.error(...t)},l=t=>!o.has(t),c=(t,e,i,s)=>{o.add(t),h(`The ${e} is deprecated. Please use ${i} instead.`,"DeprecationWarning",t,s)},d=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),u=t=>d(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?f:null:null;class f extends Array{constructor(t){super(t),this.fill(0)}}class p{constructor(t){if(0===t)return[];const e=u(t);this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class g{constructor(t={}){const{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:n,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:f,dispose:m,disposeAfter:y,noDisposeOnSet:S,noUpdateTTL:w,maxSize:v=0,maxEntrySize:z=0,sizeCalculation:b,fetchMethod:A,fetchContext:x,noDeleteOnFetchRejection:L,noDeleteOnStaleGet:T,allowStaleOnFetchRejection:_,allowStaleOnFetchAbort:k,ignoreFetchAbort:F}=t,{length:O,maxAge:E,stale:C}=t instanceof g?{}:t;if(0!==e&&!d(e))throw new TypeError("max option must be a nonnegative integer");const R=e?u(e):Array;if(!R)throw new Error("invalid max value: "+e);if(this.max=e,this.maxSize=v,this.maxEntrySize=z||this.maxSize,this.sizeCalculation=b||O,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=A||null,this.fetchMethod&&"function"!=typeof this.fetchMethod)throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=x,!this.fetchMethod&&void 0!==x)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(e).fill(null),this.valList=new Array(e).fill(null),this.next=new R(e),this.prev=new R(e),this.head=0,this.tail=0,this.free=new p(e),this.initialFill=1,this.size=0,"function"==typeof m&&(this.dispose=m),"function"==typeof y?(this.disposeAfter=y,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!S,this.noUpdateTTL=!!w,this.noDeleteOnFetchRejection=!!L,this.allowStaleOnFetchRejection=!!_,this.allowStaleOnFetchAbort=!!k,this.ignoreFetchAbort=!!F,0!==this.maxEntrySize){if(0!==this.maxSize&&!d(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!d(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!f||!!C,this.noDeleteOnStaleGet=!!T,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=d(s)||0===s?s:1,this.ttlAutopurge=!!n,this.ttl=i||E||0,this.ttl){if(!d(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(0===this.max&&0===this.ttl&&0===this.maxSize)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const t="LRU_CACHE_UNBOUNDED";l(t)&&(o.add(t),h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,g))}C&&r("stale","allowStale"),E&&r("maxAge","ttl"),O&&r("length","sizeCalculation")}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new f(this.max),this.starts=new f(this.max),this.setItemTTL=(e,i,s=t.now())=>{if(this.starts[e]=0!==i?s:0,this.ttls[e]=i,0!==i&&this.ttlAutopurge){const t=setTimeout((()=>{this.isStale(e)&&this.delete(this.keyList[e])}),i+1);t.unref&&t.unref()}},this.updateItemAge=e=>{this.starts[e]=0!==this.ttls[e]?t.now():0},this.statusTTL=(t,s)=>{t&&(t.ttl=this.ttls[s],t.start=this.starts[s],t.now=e||i(),t.remainingTTL=t.now+t.ttl-t.start)};let e=0;const i=()=>{const i=t.now();if(this.ttlResolution>0){e=i;const t=setTimeout((()=>e=0),this.ttlResolution);t.unref&&t.unref()}return i};this.getRemainingTTL=t=>{const s=this.keyMap.get(t);return void 0===s?0:0===this.ttls[s]||0===this.starts[s]?1/0:this.starts[s]+this.ttls[s]-(e||i())},this.isStale=t=>0!==this.ttls[t]&&0!==this.starts[t]&&(e||i())-this.starts[t]>this.ttls[t]}updateItemAge(t){}statusTTL(t,e){}setItemTTL(t,e,i){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new f(this.max),this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t],this.sizes[t]=0},this.requireSize=(t,e,i,s)=>{if(this.isBackgroundFetch(e))return 0;if(!d(i)){if(!s)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof s)throw new TypeError("sizeCalculation must be a function");if(i=s(e,t),!d(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return i},this.addItemSize=(t,e,i)=>{if(this.sizes[t]=e,this.maxSize){const e=this.maxSize-this.sizes[t];for(;this.calculatedSize>e;)this.evict(!0)}this.calculatedSize+=this.sizes[t],i&&(i.entrySize=e,i.totalCalculatedSize=this.calculatedSize)}}removeItemSize(t){}addItemSize(t,e){}requireSize(t,e,i,s){if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.tail;this.isValidIndex(e)&&(!t&&this.isStale(e)||(yield e),e!==this.head);)e=this.prev[e]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.head;this.isValidIndex(e)&&(!t&&this.isStale(e)||(yield e),e!==this.tail);)e=this.next[e]}isValidIndex(t){return void 0!==t&&this.keyMap.get(this.keyList[t])===t}*entries(){for(const t of this.indexes())this.isBackgroundFetch(this.valList[t])||(yield[this.keyList[t],this.valList[t]])}*rentries(){for(const t of this.rindexes())this.isBackgroundFetch(this.valList[t])||(yield[this.keyList[t],this.valList[t]])}*keys(){for(const t of this.indexes())this.isBackgroundFetch(this.valList[t])||(yield this.keyList[t])}*rkeys(){for(const t of this.rindexes())this.isBackgroundFetch(this.valList[t])||(yield this.keyList[t])}*values(){for(const t of this.indexes())this.isBackgroundFetch(this.valList[t])||(yield this.valList[t])}*rvalues(){for(const t of this.rindexes())this.isBackgroundFetch(this.valList[t])||(yield this.valList[t])}[Symbol.iterator](){return this.entries()}find(t,e={}){for(const i of this.indexes())if(t(this.valList[i],this.keyList[i],this))return this.get(this.keyList[i],e)}forEach(t,e=this){for(const i of this.indexes())t.call(e,this.valList[i],this.keyList[i],this)}rforEach(t,e=this){for(const i of this.rindexes())t.call(e,this.valList[i],this.keyList[i],this)}get prune(){return a("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(const e of this.rindexes({allowStale:!0}))this.isStale(e)&&(this.delete(this.keyList[e]),t=!0);return t}dump(){const e=[];for(const i of this.indexes({allowStale:!0})){const s=this.keyList[i],n=this.valList[i],o=this.isBackgroundFetch(n)?n.__staleWhileFetching:n;if(void 0===o)continue;const r={value:o};if(this.ttls){r.ttl=this.ttls[i];const e=t.now()-this.starts[i];r.start=Math.floor(Date.now()-e)}this.sizes&&(r.size=this.sizes[i]),e.unshift([s,r])}return e}load(e){this.clear();for(const[i,s]of e){if(s.start){const e=Date.now()-s.start;s.start=t.now()-e}this.set(i,s.value,s)}}dispose(t,e,i){}set(t,e,{ttl:i=this.ttl,start:s,noDisposeOnSet:n=this.noDisposeOnSet,size:o=0,sizeCalculation:r=this.sizeCalculation,noUpdateTTL:a=this.noUpdateTTL,status:h}={}){if(o=this.requireSize(t,e,o,r),this.maxEntrySize&&o>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.delete(t),this;let l=0===this.size?void 0:this.keyMap.get(t);if(void 0===l)l=this.newIndex(),this.keyList[l]=t,this.valList[l]=e,this.keyMap.set(t,l),this.next[this.tail]=l,this.prev[l]=this.tail,this.tail=l,this.size++,this.addItemSize(l,o,h),h&&(h.set="add"),a=!1;else{this.moveToTail(l);const i=this.valList[l];if(e!==i){if(this.isBackgroundFetch(i)?i.__abortController.abort(new Error("replaced")):n||(this.dispose(i,t,"set"),this.disposeAfter&&this.disposed.push([i,t,"set"])),this.removeItemSize(l),this.valList[l]=e,this.addItemSize(l,o,h),h){h.set="replace";const t=i&&this.isBackgroundFetch(i)?i.__staleWhileFetching:i;void 0!==t&&(h.oldValue=t)}}else h&&(h.set="update")}if(0===i||0!==this.ttl||this.ttls||this.initializeTTLTracking(),a||this.setItemTTL(l,i,s),this.statusTTL(h,l),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return 0===this.size?this.tail:this.size===this.max&&0!==this.max?this.evict(!1):0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const t=this.valList[this.head];return this.evict(!0),t}}evict(t){const e=this.head,i=this.keyList[e],s=this.valList[e];return this.isBackgroundFetch(s)?s.__abortController.abort(new Error("evicted")):(this.dispose(s,i,"evict"),this.disposeAfter&&this.disposed.push([s,i,"evict"])),this.removeItemSize(e),t&&(this.keyList[e]=null,this.valList[e]=null,this.free.push(e)),this.head=this.next[e],this.keyMap.delete(i),this.size--,e}has(t,{updateAgeOnHas:e=this.updateAgeOnHas,status:i}={}){const s=this.keyMap.get(t);if(void 0!==s){if(!this.isStale(s))return e&&this.updateItemAge(s),i&&(i.has="hit"),this.statusTTL(i,s),!0;i&&(i.has="stale",this.statusTTL(i,s))}else i&&(i.has="miss");return!1}peek(t,{allowStale:e=this.allowStale}={}){const i=this.keyMap.get(t);if(void 0!==i&&(e||!this.isStale(i))){const t=this.valList[i];return this.isBackgroundFetch(t)?t.__staleWhileFetching:t}}backgroundFetch(t,i,s,n){const o=void 0===i?void 0:this.valList[i];if(this.isBackgroundFetch(o))return o;const r=new e;s.signal&&s.signal.addEventListener("abort",(()=>r.abort(s.signal.reason)));const a={signal:r.signal,options:s,context:n},h=(e,n=!1)=>{const{aborted:o}=r.signal,h=s.ignoreFetchAbort&&void 0!==e;return s.status&&(o&&!n?(s.status.fetchAborted=!0,s.status.fetchError=r.signal.reason,h&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),!o||h||n?(this.valList[i]===c&&(void 0===e?c.__staleWhileFetching?this.valList[i]=c.__staleWhileFetching:this.delete(t):(s.status&&(s.status.fetchUpdated=!0),this.set(t,e,a.options))),e):l(r.signal.reason)},l=e=>{const{aborted:n}=r.signal,o=n&&s.allowStaleOnFetchAbort,a=o||s.allowStaleOnFetchRejection,h=a||s.noDeleteOnFetchRejection;if(this.valList[i]===c&&(h&&void 0!==c.__staleWhileFetching?o||(this.valList[i]=c.__staleWhileFetching):this.delete(t)),a)return s.status&&void 0!==c.__staleWhileFetching&&(s.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw e};s.status&&(s.status.fetchDispatched=!0);const c=new Promise(((e,i)=>{this.fetchMethod(t,o,a).then((t=>e(t)),i),r.signal.addEventListener("abort",(()=>{s.ignoreFetchAbort&&!s.allowStaleOnFetchAbort||(e(),s.allowStaleOnFetchAbort&&(e=t=>h(t,!0)))}))})).then(h,(t=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=t),l(t))));return c.__abortController=r,c.__staleWhileFetching=o,c.__returned=null,void 0===i?(this.set(t,c,{...a.options,status:void 0}),i=this.keyMap.get(t)):this.valList[i]=c,c}isBackgroundFetch(t){return t&&"object"==typeof t&&"function"==typeof t.then&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(t,"__returned")&&(t.__returned===t||null===t.__returned)}async fetch(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:r=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:c=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:u=this.allowStaleOnFetchAbort,fetchContext:f=this.fetchContext,forceRefresh:p=!1,status:g,signal:m}={}){if(!this.fetchMethod)return g&&(g.fetch="get"),this.get(t,{allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:g});const y={allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:n,noDisposeOnSet:o,size:r,sizeCalculation:a,noUpdateTTL:h,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:c,allowStaleOnFetchAbort:u,ignoreFetchAbort:d,status:g,signal:m};let S=this.keyMap.get(t);if(void 0===S){g&&(g.fetch="miss");const e=this.backgroundFetch(t,S,y,f);return e.__returned=e}{const s=this.valList[S];if(this.isBackgroundFetch(s)){const t=e&&void 0!==s.__staleWhileFetching;return g&&(g.fetch="inflight",t&&(g.returnedStale=!0)),t?s.__staleWhileFetching:s.__returned=s}const n=this.isStale(S);if(!p&&!n)return g&&(g.fetch="hit"),this.moveToTail(S),i&&this.updateItemAge(S),this.statusTTL(g,S),s;const o=this.backgroundFetch(t,S,y,f),r=void 0!==o.__staleWhileFetching,a=r&&e;return g&&(g.fetch=r&&n?"stale":"refresh",a&&n&&(g.returnedStale=!0)),a?o.__staleWhileFetching:o.__returned=o}}get(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:n}={}){const o=this.keyMap.get(t);if(void 0!==o){const r=this.valList[o],a=this.isBackgroundFetch(r);return this.statusTTL(n,o),this.isStale(o)?(n&&(n.get="stale"),a?(n&&(n.returnedStale=e&&void 0!==r.__staleWhileFetching),e?r.__staleWhileFetching:void 0):(s||this.delete(t),n&&(n.returnedStale=e),e?r:void 0)):(n&&(n.get="hit"),a?r.__staleWhileFetching:(this.moveToTail(o),i&&this.updateItemAge(o),r))}n&&(n.get="miss")}connect(t,e){this.prev[e]=t,this.next[t]=e}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return a("del","delete"),this.delete}delete(t){let e=!1;if(0!==this.size){const i=this.keyMap.get(t);if(void 0!==i)if(e=!0,1===this.size)this.clear();else{this.removeItemSize(i);const e=this.valList[i];this.isBackgroundFetch(e)?e.__abortController.abort(new Error("deleted")):(this.dispose(e,t,"delete"),this.disposeAfter&&this.disposed.push([e,t,"delete"])),this.keyMap.delete(t),this.keyList[i]=null,this.valList[i]=null,i===this.tail?this.tail=this.prev[i]:i===this.head?this.head=this.next[i]:(this.next[this.prev[i]]=this.next[i],this.prev[this.next[i]]=this.prev[i]),this.size--,this.free.push(i)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return e}clear(){for(const t of this.rindexes({allowStale:!0})){const e=this.valList[t];if(this.isBackgroundFetch(e))e.__abortController.abort(new Error("deleted"));else{const i=this.keyList[t];this.dispose(e,i,"delete"),this.disposeAfter&&this.disposed.push([e,i,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return a("reset","clear"),this.clear}get length(){return((t,e)=>{const i=`LRU_CACHE_PROPERTY_${t}`;if(l(i)){const{prototype:e}=g,{get:s}=Object.getOwnPropertyDescriptor(e,t);c(i,`${t} property`,"cache.size",s)}})("length"),this.size}static get AbortController(){return e}static get AbortSignal(){return n}}const m=g,y=function(){const t=new ArrayBuffer(2),e=new Uint8Array(t),i=new Uint16Array(t);if(e[0]=240,e[1]=13,61453==i[0])return console.log("System is Big-Endian"),!1;if(3568==i[0])return console.log("System is Little-Endian"),!0;throw new Error(`Failed determining endianness: ${i}`)}(),S=[]||0,w=["threads","vfs","cache"],v={};for(const t of w)v[t]=S.includes(t)?console.debug.bind(console):()=>{};var z=function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{h(s.next(t))}catch(t){o(t)}}function a(t){try{h(s.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}h((s=s.apply(t,e||[])).next())}))};let b;const A={},x=new m({max:32});let L,T=1;const _={xOpen:function(t){var e;return z(this,void 0,void 0,(function*(){if(x.has(t.url))return 0;const i=Object.assign({},b.fetchOptions);i.method||(i.method="HEAD"),i.headers=Object.assign({},null!==(e=i.headers)&&void 0!==e?e:{});const s=yield fetch(t.url,i);return"bytes"!==s.headers.get("Accept-Ranges")&&console.warn(`Server for ${t.url} does not advertise 'Accept-Ranges'. If the server supports it, in order to remove this message, add "Accept-Ranges: bytes". Additionally, if using CORS, add "Access-Control-Expose-Headers: *".`),x.set(t.url,{url:t.url,id:T++,size:BigInt(s.headers.get("Content-Length")),pageSize:null}),0}))},xAccess:function(t,e){return z(this,void 0,void 0,(function*(){const i=new Uint32Array(e.shm,0,1);try{const s=yield _.xOpen(t,e);i[0]=0===s?1:0}catch(t){i[0]=0}return 0}))},xRead:function(t,e){var i;return z(this,void 0,void 0,(function*(){const s=x.get(t.url);if(!s)throw new Error(`File ${t.url} not open`);if(!s.pageSize){s.pageSize=1024;const e=new ArrayBuffer(2),i=yield _.xRead({msg:"xRead",url:t.url,offset:BigInt(16),n:2},{buffer:new Uint8Array(e)}),n=new Uint16Array(e);if(0!==i)return i;if(function(t){if(y)for(let e=0;e<t.length;e++)t[e]=(65280&t[e])>>8|(255&t[e])<<8}(n),s.pageSize=n[0],1024!=s.pageSize&&(console.warn(`Page size for ${t.url} is ${s.pageSize}, recommended size is 1024`),L.delete(s.id+"|0")),s.pageSize>b.maxPageSize)throw new Error(`${s.pageSize} is over the maximum configured ${b.maxPageSize}`)}const n=BigInt(s.pageSize),o=BigInt(t.n),r=t.offset/n;r*n!==t.offset&&console.warn(`Read chunk ${t.offset} is not page-aligned`);let a=r*n;if(a+n<t.offset+o)throw new Error(`Read chunk ${t.offset}:${t.n} spans across a page-boundary`);const h=s.id+"|"+r;let l=L.get(h);if(l instanceof Promise&&(l=yield l),"number"==typeof l){v.cache(`cache hit (multi-page segment) for ${t.url}:${r}`);const e=BigInt(l)*n;l=L.get(s.id+"|"+l),l instanceof Promise&&(l=yield l),l instanceof Uint8Array?a=e:l=void 0}if(void 0===l){v.cache(`cache miss for ${t.url}:${r}`);let e=s.pageSize,n=r>0&&L.get(s.id+"|"+(Number(r)-1));n&&(n instanceof Promise&&(n=yield n),"number"==typeof n&&(n=L.get(s.id+"|"+n)),n instanceof Promise&&(n=yield n),n instanceof Uint8Array&&(e=2*n.byteLength,v.cache(`downloading super page of size ${e}`)));const o=e/s.pageSize,c=Object.assign({},b.fetchOptions);c.method||(c.method="GET"),c.headers=Object.assign({},null!==(i=c.headers)&&void 0!==i?i:{}),c.headers.Range=`bytes=${a}-${a+BigInt(e-1)}`;const d=fetch(t.url,c).then((t=>t.arrayBuffer())).then((t=>new Uint8Array(t)));L.set(h,d);for(let t=Number(r)+1;t<Number(r)+o;t++)L.set(s.id+"|"+t,d.then((()=>Number(r))));if(l=yield d,!(l instanceof Uint8Array)||0===l.length)throw new Error(`Invalid HTTP response received: ${JSON.stringify(d)}`);L.set(h,l);for(let t=Number(r)+1;t<Number(r)+o;t++)L.set(s.id+"|"+t,Number(r))}else v.cache(`cache hit for ${t.url}:${r}`);const c=Number(t.offset-a);return e.buffer.set(l.subarray(c,c+t.n)),0}))},xFilesize:function(t,e){return z(this,void 0,void 0,(function*(){const i=x.get(t.url);if(!i)throw new Error(`File ${t.fid} not open`);return new BigInt64Array(e.shm,0,1)[0]=i.size,0}))}};function k({data:t}){return z(this,void 0,void 0,(function*(){let e;v.threads("Received new work message",this,t);try{e=yield _[t.msg](t,this),v.threads("operation successful",this,e),Atomics.store(this.lock,0,e)}catch(t){console.error(t),Atomics.store(this.lock,0,1)}Atomics.notify(this.lock,0)}))}globalThis.onmessage=({data:t})=>{switch(v.threads("Received new control message",t),t.msg){case"handshake":{const e=new SharedArrayBuffer(b.maxPageSize+Int32Array.BYTES_PER_ELEMENT),i=new Int32Array(e,b.maxPageSize),s=new Uint8Array(e,0,b.maxPageSize);i[0]=65535,A[t.id]={id:t.id,port:t.port,shm:e,lock:i,buffer:s},postMessage({msg:"ack",id:t.id,shm:e,lock:i}),t.port.onmessage=k.bind(A[t.id])}break;case"init":b=t.options,L=new m({maxSize:1024*b.cacheSize,sizeCalculation:t=>{var e;return null!==(e=t.byteLength)&&void 0!==e?e:4}});break;case"close":postMessage({msg:"ack"}),close();break;default:throw new Error(`Invalid message received by backend: ${t}`)}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQUs4QixTQUM1Q3ZCLEVBQUs4QixLQUFLSixVQUFZTixFQUFZMUQsS0FBS2MsRUFBVXdCLEVBQUtaLElBQzFELENBQ0EsTUFDSixJQUFLLE9BQ0R2TCxFQUFVbU0sRUFBS25NLFFBQ2Y2SyxFQUFRLElBQUksRUFBUyxDQUNqQmxLLFFBQTZCLEtBQXBCWCxFQUFRbU8sVUFDakJ0TixnQkFBa0I4RSxJQUFZLElBQUl1RixFQUFJLE9BQW1DLFFBQTNCQSxFQUFLdkYsRUFBTWlILGtCQUErQixJQUFQMUIsRUFBZ0JBLEVBQUssQ0FBQyxJQUUzRyxNQUNKLElBQUssUUFDRGdELFlBQVksQ0FBRWpELElBQUssUUFDbkJtRCxRQUNBLE1BQ0osUUFDSSxNQUFNLElBQUl0UyxNQUFNLHdDQUF3Q3FRLEtBQ2hFLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcWxpdGUtd2FzbS1odHRwLy4vbm9kZV9tb2R1bGVzL2xydS1jYWNoZS9pbmRleC5tanMiLCJ3ZWJwYWNrOi8vc3FsaXRlLXdhc20taHR0cC8uL2Rpc3QvZW5kaWFubmVzcy5qcyIsIndlYnBhY2s6Ly9zcWxpdGUtd2FzbS1odHRwLy4vZGlzdC92ZnMtaHR0cC10eXBlcy5qcyIsIndlYnBhY2s6Ly9zcWxpdGUtd2FzbS1odHRwLy4vZGlzdC92ZnMtaHR0cC13b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGVyZiA9XG4gIHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gJ29iamVjdCcgJiZcbiAgcGVyZm9ybWFuY2UgJiZcbiAgdHlwZW9mIHBlcmZvcm1hbmNlLm5vdyA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gcGVyZm9ybWFuY2VcbiAgICA6IERhdGVcblxuY29uc3QgaGFzQWJvcnRDb250cm9sbGVyID0gdHlwZW9mIEFib3J0Q29udHJvbGxlciA9PT0gJ2Z1bmN0aW9uJ1xuXG4vLyBtaW5pbWFsIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IHBvbHlmaWxsXG4vLyB0aGlzIGRvZXNuJ3QgaGF2ZSBuZWFybHkgYWxsIHRoZSBjaGVja3MgYW5kIHdoYXRub3QgdGhhdFxuLy8gYWN0dWFsIEFib3J0Q29udHJvbGxlci9TaWduYWwgaGFzLCBidXQgaXQncyBlbm91Z2ggZm9yXG4vLyBvdXIgcHVycG9zZXMsIGFuZCBpZiB1c2VkIHByb3Blcmx5LCBiZWhhdmVzIHRoZSBzYW1lLlxuY29uc3QgQUMgPSBoYXNBYm9ydENvbnRyb2xsZXJcbiAgPyBBYm9ydENvbnRyb2xsZXJcbiAgOiBjbGFzcyBBYm9ydENvbnRyb2xsZXIge1xuICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2lnbmFsID0gbmV3IEFTKClcbiAgICAgIH1cbiAgICAgIGFib3J0KHJlYXNvbiA9IG5ldyBFcnJvcignVGhpcyBvcGVyYXRpb24gd2FzIGFib3J0ZWQnKSkge1xuICAgICAgICB0aGlzLnNpZ25hbC5yZWFzb24gPSB0aGlzLnNpZ25hbC5yZWFzb24gfHwgcmVhc29uXG4gICAgICAgIHRoaXMuc2lnbmFsLmFib3J0ZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc2lnbmFsLmRpc3BhdGNoRXZlbnQoe1xuICAgICAgICAgIHR5cGU6ICdhYm9ydCcsXG4gICAgICAgICAgdGFyZ2V0OiB0aGlzLnNpZ25hbCxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbmNvbnN0IGhhc0Fib3J0U2lnbmFsID0gdHlwZW9mIEFib3J0U2lnbmFsID09PSAnZnVuY3Rpb24nXG4vLyBTb21lIHBvbHlmaWxscyBwdXQgdGhpcyBvbiB0aGUgQUMgY2xhc3MsIG5vdCBnbG9iYWxcbmNvbnN0IGhhc0FDQWJvcnRTaWduYWwgPSB0eXBlb2YgQUMuQWJvcnRTaWduYWwgPT09ICdmdW5jdGlvbidcbmNvbnN0IEFTID0gaGFzQWJvcnRTaWduYWxcbiAgPyBBYm9ydFNpZ25hbFxuICA6IGhhc0FDQWJvcnRTaWduYWxcbiAgPyBBQy5BYm9ydENvbnRyb2xsZXJcbiAgOiBjbGFzcyBBYm9ydFNpZ25hbCB7XG4gICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yZWFzb24gPSB1bmRlZmluZWRcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gW11cbiAgICAgIH1cbiAgICAgIGRpc3BhdGNoRXZlbnQoZSkge1xuICAgICAgICBpZiAoZS50eXBlID09PSAnYWJvcnQnKSB7XG4gICAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMub25hYm9ydChlKVxuICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5mb3JFYWNoKGYgPT4gZihlKSwgdGhpcylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgb25hYm9ydCgpIHt9XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGV2LCBmbikge1xuICAgICAgICBpZiAoZXYgPT09ICdhYm9ydCcpIHtcbiAgICAgICAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChmbilcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihldiwgZm4pIHtcbiAgICAgICAgaWYgKGV2ID09PSAnYWJvcnQnKSB7XG4gICAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmZpbHRlcihmID0+IGYgIT09IGZuKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5jb25zdCB3YXJuZWQgPSBuZXcgU2V0KClcbmNvbnN0IGRlcHJlY2F0ZWRPcHRpb24gPSAob3B0LCBpbnN0ZWFkKSA9PiB7XG4gIGNvbnN0IGNvZGUgPSBgTFJVX0NBQ0hFX09QVElPTl8ke29wdH1gXG4gIGlmIChzaG91bGRXYXJuKGNvZGUpKSB7XG4gICAgd2Fybihjb2RlLCBgJHtvcHR9IG9wdGlvbmAsIGBvcHRpb25zLiR7aW5zdGVhZH1gLCBMUlVDYWNoZSlcbiAgfVxufVxuY29uc3QgZGVwcmVjYXRlZE1ldGhvZCA9IChtZXRob2QsIGluc3RlYWQpID0+IHtcbiAgY29uc3QgY29kZSA9IGBMUlVfQ0FDSEVfTUVUSE9EXyR7bWV0aG9kfWBcbiAgaWYgKHNob3VsZFdhcm4oY29kZSkpIHtcbiAgICBjb25zdCB7IHByb3RvdHlwZSB9ID0gTFJVQ2FjaGVcbiAgICBjb25zdCB7IGdldCB9ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwcm90b3R5cGUsIG1ldGhvZClcbiAgICB3YXJuKGNvZGUsIGAke21ldGhvZH0gbWV0aG9kYCwgYGNhY2hlLiR7aW5zdGVhZH0oKWAsIGdldClcbiAgfVxufVxuY29uc3QgZGVwcmVjYXRlZFByb3BlcnR5ID0gKGZpZWxkLCBpbnN0ZWFkKSA9PiB7XG4gIGNvbnN0IGNvZGUgPSBgTFJVX0NBQ0hFX1BST1BFUlRZXyR7ZmllbGR9YFxuICBpZiAoc2hvdWxkV2Fybihjb2RlKSkge1xuICAgIGNvbnN0IHsgcHJvdG90eXBlIH0gPSBMUlVDYWNoZVxuICAgIGNvbnN0IHsgZ2V0IH0gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwgZmllbGQpXG4gICAgd2Fybihjb2RlLCBgJHtmaWVsZH0gcHJvcGVydHlgLCBgY2FjaGUuJHtpbnN0ZWFkfWAsIGdldClcbiAgfVxufVxuXG5jb25zdCBlbWl0V2FybmluZyA9ICguLi5hKSA9PiB7XG4gIHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJlxuICBwcm9jZXNzICYmXG4gIHR5cGVvZiBwcm9jZXNzLmVtaXRXYXJuaW5nID09PSAnZnVuY3Rpb24nXG4gICAgPyBwcm9jZXNzLmVtaXRXYXJuaW5nKC4uLmEpXG4gICAgOiBjb25zb2xlLmVycm9yKC4uLmEpXG59XG5cbmNvbnN0IHNob3VsZFdhcm4gPSBjb2RlID0+ICF3YXJuZWQuaGFzKGNvZGUpXG5cbmNvbnN0IHdhcm4gPSAoY29kZSwgd2hhdCwgaW5zdGVhZCwgZm4pID0+IHtcbiAgd2FybmVkLmFkZChjb2RlKVxuICBjb25zdCBtc2cgPSBgVGhlICR7d2hhdH0gaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSAke2luc3RlYWR9IGluc3RlYWQuYFxuICBlbWl0V2FybmluZyhtc2csICdEZXByZWNhdGlvbldhcm5pbmcnLCBjb2RlLCBmbilcbn1cblxuY29uc3QgaXNQb3NJbnQgPSBuID0+IG4gJiYgbiA9PT0gTWF0aC5mbG9vcihuKSAmJiBuID4gMCAmJiBpc0Zpbml0ZShuKVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAtIFRoaXMgaXMgYSBsaXR0bGUgYml0IHJpZGljdWxvdXMsIHRiaC5cbiAqIFRoZSBtYXhpbXVtIGFycmF5IGxlbmd0aCBpcyAyXjMyLTEgb3IgdGhlcmVhYm91dHMgb24gbW9zdCBKUyBpbXBscy5cbiAqIEFuZCB3ZWxsIGJlZm9yZSB0aGF0IHBvaW50LCB5b3UncmUgY2FjaGluZyB0aGUgZW50aXJlIHdvcmxkLCBJIG1lYW4sXG4gKiB0aGF0J3MgfjMyR0Igb2YganVzdCBpbnRlZ2VycyBmb3IgdGhlIG5leHQvcHJldiBsaW5rcywgcGx1cyB3aGF0ZXZlclxuICogZWxzZSB0byBob2xkIHRoYXQgbWFueSBrZXlzIGFuZCB2YWx1ZXMuICBKdXN0IGZpbGxpbmcgdGhlIG1lbW9yeSB3aXRoXG4gKiB6ZXJvZXMgYXQgaW5pdCB0aW1lIGlzIGJydXRhbCB3aGVuIHlvdSBnZXQgdGhhdCBiaWcuXG4gKiBCdXQgd2h5IG5vdCBiZSBjb21wbGV0ZT9cbiAqIE1heWJlIGluIHRoZSBmdXR1cmUsIHRoZXNlIGxpbWl0cyB3aWxsIGhhdmUgZXhwYW5kZWQuICovXG5jb25zdCBnZXRVaW50QXJyYXkgPSBtYXggPT5cbiAgIWlzUG9zSW50KG1heClcbiAgICA/IG51bGxcbiAgICA6IG1heCA8PSBNYXRoLnBvdygyLCA4KVxuICAgID8gVWludDhBcnJheVxuICAgIDogbWF4IDw9IE1hdGgucG93KDIsIDE2KVxuICAgID8gVWludDE2QXJyYXlcbiAgICA6IG1heCA8PSBNYXRoLnBvdygyLCAzMilcbiAgICA/IFVpbnQzMkFycmF5XG4gICAgOiBtYXggPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJcbiAgICA/IFplcm9BcnJheVxuICAgIDogbnVsbFxuXG5jbGFzcyBaZXJvQXJyYXkgZXh0ZW5kcyBBcnJheSB7XG4gIGNvbnN0cnVjdG9yKHNpemUpIHtcbiAgICBzdXBlcihzaXplKVxuICAgIHRoaXMuZmlsbCgwKVxuICB9XG59XG5cbmNsYXNzIFN0YWNrIHtcbiAgY29uc3RydWN0b3IobWF4KSB7XG4gICAgaWYgKG1heCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IFVpbnRBcnJheSA9IGdldFVpbnRBcnJheShtYXgpXG4gICAgdGhpcy5oZWFwID0gbmV3IFVpbnRBcnJheShtYXgpXG4gICAgdGhpcy5sZW5ndGggPSAwXG4gIH1cbiAgcHVzaChuKSB7XG4gICAgdGhpcy5oZWFwW3RoaXMubGVuZ3RoKytdID0gblxuICB9XG4gIHBvcCgpIHtcbiAgICByZXR1cm4gdGhpcy5oZWFwWy0tdGhpcy5sZW5ndGhdXG4gIH1cbn1cblxuY2xhc3MgTFJVQ2FjaGUge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7XG4gICAgICBtYXggPSAwLFxuICAgICAgdHRsLFxuICAgICAgdHRsUmVzb2x1dGlvbiA9IDEsXG4gICAgICB0dGxBdXRvcHVyZ2UsXG4gICAgICB1cGRhdGVBZ2VPbkdldCxcbiAgICAgIHVwZGF0ZUFnZU9uSGFzLFxuICAgICAgYWxsb3dTdGFsZSxcbiAgICAgIGRpc3Bvc2UsXG4gICAgICBkaXNwb3NlQWZ0ZXIsXG4gICAgICBub0Rpc3Bvc2VPblNldCxcbiAgICAgIG5vVXBkYXRlVFRMLFxuICAgICAgbWF4U2l6ZSA9IDAsXG4gICAgICBtYXhFbnRyeVNpemUgPSAwLFxuICAgICAgc2l6ZUNhbGN1bGF0aW9uLFxuICAgICAgZmV0Y2hNZXRob2QsXG4gICAgICBmZXRjaENvbnRleHQsXG4gICAgICBub0RlbGV0ZU9uRmV0Y2hSZWplY3Rpb24sXG4gICAgICBub0RlbGV0ZU9uU3RhbGVHZXQsXG4gICAgICBhbGxvd1N0YWxlT25GZXRjaFJlamVjdGlvbixcbiAgICAgIGFsbG93U3RhbGVPbkZldGNoQWJvcnQsXG4gICAgICBpZ25vcmVGZXRjaEFib3J0LFxuICAgIH0gPSBvcHRpb25zXG5cbiAgICAvLyBkZXByZWNhdGVkIG9wdGlvbnMsIGRvbid0IHRyaWdnZXIgYSB3YXJuaW5nIGZvciBnZXR0aW5nIHRoZW0gaWZcbiAgICAvLyB0aGUgdGhpbmcgYmVpbmcgcGFzc2VkIGluIGlzIGFub3RoZXIgTFJVQ2FjaGUgd2UncmUgY29weWluZy5cbiAgICBjb25zdCB7IGxlbmd0aCwgbWF4QWdlLCBzdGFsZSB9ID1cbiAgICAgIG9wdGlvbnMgaW5zdGFuY2VvZiBMUlVDYWNoZSA/IHt9IDogb3B0aW9uc1xuXG4gICAgaWYgKG1heCAhPT0gMCAmJiAhaXNQb3NJbnQobWF4KSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbWF4IG9wdGlvbiBtdXN0IGJlIGEgbm9ubmVnYXRpdmUgaW50ZWdlcicpXG4gICAgfVxuXG4gICAgY29uc3QgVWludEFycmF5ID0gbWF4ID8gZ2V0VWludEFycmF5KG1heCkgOiBBcnJheVxuICAgIGlmICghVWludEFycmF5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgbWF4IHZhbHVlOiAnICsgbWF4KVxuICAgIH1cblxuICAgIHRoaXMubWF4ID0gbWF4XG4gICAgdGhpcy5tYXhTaXplID0gbWF4U2l6ZVxuICAgIHRoaXMubWF4RW50cnlTaXplID0gbWF4RW50cnlTaXplIHx8IHRoaXMubWF4U2l6ZVxuICAgIHRoaXMuc2l6ZUNhbGN1bGF0aW9uID0gc2l6ZUNhbGN1bGF0aW9uIHx8IGxlbmd0aFxuICAgIGlmICh0aGlzLnNpemVDYWxjdWxhdGlvbikge1xuICAgICAgaWYgKCF0aGlzLm1heFNpemUgJiYgIXRoaXMubWF4RW50cnlTaXplKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgJ2Nhbm5vdCBzZXQgc2l6ZUNhbGN1bGF0aW9uIHdpdGhvdXQgc2V0dGluZyBtYXhTaXplIG9yIG1heEVudHJ5U2l6ZSdcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnNpemVDYWxjdWxhdGlvbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzaXplQ2FsY3VsYXRpb24gc2V0IHRvIG5vbi1mdW5jdGlvbicpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5mZXRjaE1ldGhvZCA9IGZldGNoTWV0aG9kIHx8IG51bGxcbiAgICBpZiAodGhpcy5mZXRjaE1ldGhvZCAmJiB0eXBlb2YgdGhpcy5mZXRjaE1ldGhvZCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ2ZldGNoTWV0aG9kIG11c3QgYmUgYSBmdW5jdGlvbiBpZiBzcGVjaWZpZWQnXG4gICAgICApXG4gICAgfVxuXG4gICAgdGhpcy5mZXRjaENvbnRleHQgPSBmZXRjaENvbnRleHRcbiAgICBpZiAoIXRoaXMuZmV0Y2hNZXRob2QgJiYgZmV0Y2hDb250ZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICdjYW5ub3Qgc2V0IGZldGNoQ29udGV4dCB3aXRob3V0IGZldGNoTWV0aG9kJ1xuICAgICAgKVxuICAgIH1cblxuICAgIHRoaXMua2V5TWFwID0gbmV3IE1hcCgpXG4gICAgdGhpcy5rZXlMaXN0ID0gbmV3IEFycmF5KG1heCkuZmlsbChudWxsKVxuICAgIHRoaXMudmFsTGlzdCA9IG5ldyBBcnJheShtYXgpLmZpbGwobnVsbClcbiAgICB0aGlzLm5leHQgPSBuZXcgVWludEFycmF5KG1heClcbiAgICB0aGlzLnByZXYgPSBuZXcgVWludEFycmF5KG1heClcbiAgICB0aGlzLmhlYWQgPSAwXG4gICAgdGhpcy50YWlsID0gMFxuICAgIHRoaXMuZnJlZSA9IG5ldyBTdGFjayhtYXgpXG4gICAgdGhpcy5pbml0aWFsRmlsbCA9IDFcbiAgICB0aGlzLnNpemUgPSAwXG5cbiAgICBpZiAodHlwZW9mIGRpc3Bvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuZGlzcG9zZSA9IGRpc3Bvc2VcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkaXNwb3NlQWZ0ZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuZGlzcG9zZUFmdGVyID0gZGlzcG9zZUFmdGVyXG4gICAgICB0aGlzLmRpc3Bvc2VkID0gW11cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwb3NlQWZ0ZXIgPSBudWxsXG4gICAgICB0aGlzLmRpc3Bvc2VkID0gbnVsbFxuICAgIH1cbiAgICB0aGlzLm5vRGlzcG9zZU9uU2V0ID0gISFub0Rpc3Bvc2VPblNldFxuICAgIHRoaXMubm9VcGRhdGVUVEwgPSAhIW5vVXBkYXRlVFRMXG4gICAgdGhpcy5ub0RlbGV0ZU9uRmV0Y2hSZWplY3Rpb24gPSAhIW5vRGVsZXRlT25GZXRjaFJlamVjdGlvblxuICAgIHRoaXMuYWxsb3dTdGFsZU9uRmV0Y2hSZWplY3Rpb24gPSAhIWFsbG93U3RhbGVPbkZldGNoUmVqZWN0aW9uXG4gICAgdGhpcy5hbGxvd1N0YWxlT25GZXRjaEFib3J0ID0gISFhbGxvd1N0YWxlT25GZXRjaEFib3J0XG4gICAgdGhpcy5pZ25vcmVGZXRjaEFib3J0ID0gISFpZ25vcmVGZXRjaEFib3J0XG5cbiAgICAvLyBOQjogbWF4RW50cnlTaXplIGlzIHNldCB0byBtYXhTaXplIGlmIGl0J3Mgc2V0XG4gICAgaWYgKHRoaXMubWF4RW50cnlTaXplICE9PSAwKSB7XG4gICAgICBpZiAodGhpcy5tYXhTaXplICE9PSAwKSB7XG4gICAgICAgIGlmICghaXNQb3NJbnQodGhpcy5tYXhTaXplKSkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAnbWF4U2l6ZSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBpZiBzcGVjaWZpZWQnXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWlzUG9zSW50KHRoaXMubWF4RW50cnlTaXplKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICdtYXhFbnRyeVNpemUgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIgaWYgc3BlY2lmaWVkJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgICB0aGlzLmluaXRpYWxpemVTaXplVHJhY2tpbmcoKVxuICAgIH1cblxuICAgIHRoaXMuYWxsb3dTdGFsZSA9ICEhYWxsb3dTdGFsZSB8fCAhIXN0YWxlXG4gICAgdGhpcy5ub0RlbGV0ZU9uU3RhbGVHZXQgPSAhIW5vRGVsZXRlT25TdGFsZUdldFxuICAgIHRoaXMudXBkYXRlQWdlT25HZXQgPSAhIXVwZGF0ZUFnZU9uR2V0XG4gICAgdGhpcy51cGRhdGVBZ2VPbkhhcyA9ICEhdXBkYXRlQWdlT25IYXNcbiAgICB0aGlzLnR0bFJlc29sdXRpb24gPVxuICAgICAgaXNQb3NJbnQodHRsUmVzb2x1dGlvbikgfHwgdHRsUmVzb2x1dGlvbiA9PT0gMFxuICAgICAgICA/IHR0bFJlc29sdXRpb25cbiAgICAgICAgOiAxXG4gICAgdGhpcy50dGxBdXRvcHVyZ2UgPSAhIXR0bEF1dG9wdXJnZVxuICAgIHRoaXMudHRsID0gdHRsIHx8IG1heEFnZSB8fCAwXG4gICAgaWYgKHRoaXMudHRsKSB7XG4gICAgICBpZiAoIWlzUG9zSW50KHRoaXMudHRsKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICd0dGwgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIgaWYgc3BlY2lmaWVkJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgICB0aGlzLmluaXRpYWxpemVUVExUcmFja2luZygpXG4gICAgfVxuXG4gICAgLy8gZG8gbm90IGFsbG93IGNvbXBsZXRlbHkgdW5ib3VuZGVkIGNhY2hlc1xuICAgIGlmICh0aGlzLm1heCA9PT0gMCAmJiB0aGlzLnR0bCA9PT0gMCAmJiB0aGlzLm1heFNpemUgPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICdBdCBsZWFzdCBvbmUgb2YgbWF4LCBtYXhTaXplLCBvciB0dGwgaXMgcmVxdWlyZWQnXG4gICAgICApXG4gICAgfVxuICAgIGlmICghdGhpcy50dGxBdXRvcHVyZ2UgJiYgIXRoaXMubWF4ICYmICF0aGlzLm1heFNpemUpIHtcbiAgICAgIGNvbnN0IGNvZGUgPSAnTFJVX0NBQ0hFX1VOQk9VTkRFRCdcbiAgICAgIGlmIChzaG91bGRXYXJuKGNvZGUpKSB7XG4gICAgICAgIHdhcm5lZC5hZGQoY29kZSlcbiAgICAgICAgY29uc3QgbXNnID1cbiAgICAgICAgICAnVFRMIGNhY2hpbmcgd2l0aG91dCB0dGxBdXRvcHVyZ2UsIG1heCwgb3IgbWF4U2l6ZSBjYW4gJyArXG4gICAgICAgICAgJ3Jlc3VsdCBpbiB1bmJvdW5kZWQgbWVtb3J5IGNvbnN1bXB0aW9uLidcbiAgICAgICAgZW1pdFdhcm5pbmcobXNnLCAnVW5ib3VuZGVkQ2FjaGVXYXJuaW5nJywgY29kZSwgTFJVQ2FjaGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0YWxlKSB7XG4gICAgICBkZXByZWNhdGVkT3B0aW9uKCdzdGFsZScsICdhbGxvd1N0YWxlJylcbiAgICB9XG4gICAgaWYgKG1heEFnZSkge1xuICAgICAgZGVwcmVjYXRlZE9wdGlvbignbWF4QWdlJywgJ3R0bCcpXG4gICAgfVxuICAgIGlmIChsZW5ndGgpIHtcbiAgICAgIGRlcHJlY2F0ZWRPcHRpb24oJ2xlbmd0aCcsICdzaXplQ2FsY3VsYXRpb24nKVxuICAgIH1cbiAgfVxuXG4gIGdldFJlbWFpbmluZ1RUTChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5oYXMoa2V5LCB7IHVwZGF0ZUFnZU9uSGFzOiBmYWxzZSB9KSA/IEluZmluaXR5IDogMFxuICB9XG5cbiAgaW5pdGlhbGl6ZVRUTFRyYWNraW5nKCkge1xuICAgIHRoaXMudHRscyA9IG5ldyBaZXJvQXJyYXkodGhpcy5tYXgpXG4gICAgdGhpcy5zdGFydHMgPSBuZXcgWmVyb0FycmF5KHRoaXMubWF4KVxuXG4gICAgdGhpcy5zZXRJdGVtVFRMID0gKGluZGV4LCB0dGwsIHN0YXJ0ID0gcGVyZi5ub3coKSkgPT4ge1xuICAgICAgdGhpcy5zdGFydHNbaW5kZXhdID0gdHRsICE9PSAwID8gc3RhcnQgOiAwXG4gICAgICB0aGlzLnR0bHNbaW5kZXhdID0gdHRsXG4gICAgICBpZiAodHRsICE9PSAwICYmIHRoaXMudHRsQXV0b3B1cmdlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5pc1N0YWxlKGluZGV4KSkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGUodGhpcy5rZXlMaXN0W2luZGV4XSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHR0bCArIDEpXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlIC0gdW5yZWYoKSBub3Qgc3VwcG9ydGVkIG9uIGFsbCBwbGF0Zm9ybXMgKi9cbiAgICAgICAgaWYgKHQudW5yZWYpIHtcbiAgICAgICAgICB0LnVucmVmKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlSXRlbUFnZSA9IGluZGV4ID0+IHtcbiAgICAgIHRoaXMuc3RhcnRzW2luZGV4XSA9IHRoaXMudHRsc1tpbmRleF0gIT09IDAgPyBwZXJmLm5vdygpIDogMFxuICAgIH1cblxuICAgIHRoaXMuc3RhdHVzVFRMID0gKHN0YXR1cywgaW5kZXgpID0+IHtcbiAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgc3RhdHVzLnR0bCA9IHRoaXMudHRsc1tpbmRleF1cbiAgICAgICAgc3RhdHVzLnN0YXJ0ID0gdGhpcy5zdGFydHNbaW5kZXhdXG4gICAgICAgIHN0YXR1cy5ub3cgPSBjYWNoZWROb3cgfHwgZ2V0Tm93KClcbiAgICAgICAgc3RhdHVzLnJlbWFpbmluZ1RUTCA9IHN0YXR1cy5ub3cgKyBzdGF0dXMudHRsIC0gc3RhdHVzLnN0YXJ0XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZGVib3VuY2UgY2FsbHMgdG8gcGVyZi5ub3coKSB0byAxcyBzbyB3ZSdyZSBub3QgaGl0dGluZ1xuICAgIC8vIHRoYXQgY29zdGx5IGNhbGwgcmVwZWF0ZWRseS5cbiAgICBsZXQgY2FjaGVkTm93ID0gMFxuICAgIGNvbnN0IGdldE5vdyA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG4gPSBwZXJmLm5vdygpXG4gICAgICBpZiAodGhpcy50dGxSZXNvbHV0aW9uID4gMCkge1xuICAgICAgICBjYWNoZWROb3cgPSBuXG4gICAgICAgIGNvbnN0IHQgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICgpID0+IChjYWNoZWROb3cgPSAwKSxcbiAgICAgICAgICB0aGlzLnR0bFJlc29sdXRpb25cbiAgICAgICAgKVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAtIG5vdCBhdmFpbGFibGUgb24gYWxsIHBsYXRmb3JtcyAqL1xuICAgICAgICBpZiAodC51bnJlZikge1xuICAgICAgICAgIHQudW5yZWYoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gblxuICAgIH1cblxuICAgIHRoaXMuZ2V0UmVtYWluaW5nVFRMID0ga2V5ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5rZXlNYXAuZ2V0KGtleSlcbiAgICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy50dGxzW2luZGV4XSA9PT0gMCB8fCB0aGlzLnN0YXJ0c1tpbmRleF0gPT09IDBcbiAgICAgICAgPyBJbmZpbml0eVxuICAgICAgICA6IHRoaXMuc3RhcnRzW2luZGV4XSArXG4gICAgICAgICAgICB0aGlzLnR0bHNbaW5kZXhdIC1cbiAgICAgICAgICAgIChjYWNoZWROb3cgfHwgZ2V0Tm93KCkpXG4gICAgfVxuXG4gICAgdGhpcy5pc1N0YWxlID0gaW5kZXggPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy50dGxzW2luZGV4XSAhPT0gMCAmJlxuICAgICAgICB0aGlzLnN0YXJ0c1tpbmRleF0gIT09IDAgJiZcbiAgICAgICAgKGNhY2hlZE5vdyB8fCBnZXROb3coKSkgLSB0aGlzLnN0YXJ0c1tpbmRleF0gPlxuICAgICAgICAgIHRoaXMudHRsc1tpbmRleF1cbiAgICAgIClcbiAgICB9XG4gIH1cbiAgdXBkYXRlSXRlbUFnZShfaW5kZXgpIHt9XG4gIHN0YXR1c1RUTChfc3RhdHVzLCBfaW5kZXgpIHt9XG4gIHNldEl0ZW1UVEwoX2luZGV4LCBfdHRsLCBfc3RhcnQpIHt9XG4gIGlzU3RhbGUoX2luZGV4KSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpbml0aWFsaXplU2l6ZVRyYWNraW5nKCkge1xuICAgIHRoaXMuY2FsY3VsYXRlZFNpemUgPSAwXG4gICAgdGhpcy5zaXplcyA9IG5ldyBaZXJvQXJyYXkodGhpcy5tYXgpXG4gICAgdGhpcy5yZW1vdmVJdGVtU2l6ZSA9IGluZGV4ID0+IHtcbiAgICAgIHRoaXMuY2FsY3VsYXRlZFNpemUgLT0gdGhpcy5zaXplc1tpbmRleF1cbiAgICAgIHRoaXMuc2l6ZXNbaW5kZXhdID0gMFxuICAgIH1cbiAgICB0aGlzLnJlcXVpcmVTaXplID0gKGssIHYsIHNpemUsIHNpemVDYWxjdWxhdGlvbikgPT4ge1xuICAgICAgLy8gcHJvdmlzaW9uYWxseSBhY2NlcHQgYmFja2dyb3VuZCBmZXRjaGVzLlxuICAgICAgLy8gYWN0dWFsIHZhbHVlIHNpemUgd2lsbCBiZSBjaGVja2VkIHdoZW4gdGhleSByZXR1cm4uXG4gICAgICBpZiAodGhpcy5pc0JhY2tncm91bmRGZXRjaCh2KSkge1xuICAgICAgICByZXR1cm4gMFxuICAgICAgfVxuICAgICAgaWYgKCFpc1Bvc0ludChzaXplKSkge1xuICAgICAgICBpZiAoc2l6ZUNhbGN1bGF0aW9uKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBzaXplQ2FsY3VsYXRpb24gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NpemVDYWxjdWxhdGlvbiBtdXN0IGJlIGEgZnVuY3Rpb24nKVxuICAgICAgICAgIH1cbiAgICAgICAgICBzaXplID0gc2l6ZUNhbGN1bGF0aW9uKHYsIGspXG4gICAgICAgICAgaWYgKCFpc1Bvc0ludChzaXplKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgJ3NpemVDYWxjdWxhdGlvbiByZXR1cm4gaW52YWxpZCAoZXhwZWN0IHBvc2l0aXZlIGludGVnZXIpJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgJ2ludmFsaWQgc2l6ZSB2YWx1ZSAobXVzdCBiZSBwb3NpdGl2ZSBpbnRlZ2VyKS4gJyArXG4gICAgICAgICAgICAgICdXaGVuIG1heFNpemUgb3IgbWF4RW50cnlTaXplIGlzIHVzZWQsIHNpemVDYWxjdWxhdGlvbiBvciBzaXplICcgK1xuICAgICAgICAgICAgICAnbXVzdCBiZSBzZXQuJ1xuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNpemVcbiAgICB9XG4gICAgdGhpcy5hZGRJdGVtU2l6ZSA9IChpbmRleCwgc2l6ZSwgc3RhdHVzKSA9PiB7XG4gICAgICB0aGlzLnNpemVzW2luZGV4XSA9IHNpemVcbiAgICAgIGlmICh0aGlzLm1heFNpemUpIHtcbiAgICAgICAgY29uc3QgbWF4U2l6ZSA9IHRoaXMubWF4U2l6ZSAtIHRoaXMuc2l6ZXNbaW5kZXhdXG4gICAgICAgIHdoaWxlICh0aGlzLmNhbGN1bGF0ZWRTaXplID4gbWF4U2l6ZSkge1xuICAgICAgICAgIHRoaXMuZXZpY3QodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5jYWxjdWxhdGVkU2l6ZSArPSB0aGlzLnNpemVzW2luZGV4XVxuICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICBzdGF0dXMuZW50cnlTaXplID0gc2l6ZVxuICAgICAgICBzdGF0dXMudG90YWxDYWxjdWxhdGVkU2l6ZSA9IHRoaXMuY2FsY3VsYXRlZFNpemVcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVtb3ZlSXRlbVNpemUoX2luZGV4KSB7fVxuICBhZGRJdGVtU2l6ZShfaW5kZXgsIF9zaXplKSB7fVxuICByZXF1aXJlU2l6ZShfaywgX3YsIHNpemUsIHNpemVDYWxjdWxhdGlvbikge1xuICAgIGlmIChzaXplIHx8IHNpemVDYWxjdWxhdGlvbikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ2Nhbm5vdCBzZXQgc2l6ZSB3aXRob3V0IHNldHRpbmcgbWF4U2l6ZSBvciBtYXhFbnRyeVNpemUgb24gY2FjaGUnXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgKmluZGV4ZXMoeyBhbGxvd1N0YWxlID0gdGhpcy5hbGxvd1N0YWxlIH0gPSB7fSkge1xuICAgIGlmICh0aGlzLnNpemUpIHtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLnRhaWw7IHRydWU7ICkge1xuICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZEluZGV4KGkpKSB7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWxsb3dTdGFsZSB8fCAhdGhpcy5pc1N0YWxlKGkpKSB7XG4gICAgICAgICAgeWllbGQgaVxuICAgICAgICB9XG4gICAgICAgIGlmIChpID09PSB0aGlzLmhlYWQpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGkgPSB0aGlzLnByZXZbaV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICpyaW5kZXhlcyh7IGFsbG93U3RhbGUgPSB0aGlzLmFsbG93U3RhbGUgfSA9IHt9KSB7XG4gICAgaWYgKHRoaXMuc2l6ZSkge1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMuaGVhZDsgdHJ1ZTsgKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkSW5kZXgoaSkpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbGxvd1N0YWxlIHx8ICF0aGlzLmlzU3RhbGUoaSkpIHtcbiAgICAgICAgICB5aWVsZCBpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IHRoaXMudGFpbCkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaSA9IHRoaXMubmV4dFtpXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaXNWYWxpZEluZGV4KGluZGV4KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGluZGV4ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHRoaXMua2V5TWFwLmdldCh0aGlzLmtleUxpc3RbaW5kZXhdKSA9PT0gaW5kZXhcbiAgICApXG4gIH1cblxuICAqZW50cmllcygpIHtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5pbmRleGVzKCkpIHtcbiAgICAgIGlmICghdGhpcy5pc0JhY2tncm91bmRGZXRjaCh0aGlzLnZhbExpc3RbaV0pKSB7XG4gICAgICAgIHlpZWxkIFt0aGlzLmtleUxpc3RbaV0sIHRoaXMudmFsTGlzdFtpXV1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgKnJlbnRyaWVzKCkge1xuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLnJpbmRleGVzKCkpIHtcbiAgICAgIGlmICghdGhpcy5pc0JhY2tncm91bmRGZXRjaCh0aGlzLnZhbExpc3RbaV0pKSB7XG4gICAgICAgIHlpZWxkIFt0aGlzLmtleUxpc3RbaV0sIHRoaXMudmFsTGlzdFtpXV1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAqa2V5cygpIHtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5pbmRleGVzKCkpIHtcbiAgICAgIGlmICghdGhpcy5pc0JhY2tncm91bmRGZXRjaCh0aGlzLnZhbExpc3RbaV0pKSB7XG4gICAgICAgIHlpZWxkIHRoaXMua2V5TGlzdFtpXVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAqcmtleXMoKSB7XG4gICAgZm9yIChjb25zdCBpIG9mIHRoaXMucmluZGV4ZXMoKSkge1xuICAgICAgaWYgKCF0aGlzLmlzQmFja2dyb3VuZEZldGNoKHRoaXMudmFsTGlzdFtpXSkpIHtcbiAgICAgICAgeWllbGQgdGhpcy5rZXlMaXN0W2ldXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgKnZhbHVlcygpIHtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5pbmRleGVzKCkpIHtcbiAgICAgIGlmICghdGhpcy5pc0JhY2tncm91bmRGZXRjaCh0aGlzLnZhbExpc3RbaV0pKSB7XG4gICAgICAgIHlpZWxkIHRoaXMudmFsTGlzdFtpXVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAqcnZhbHVlcygpIHtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5yaW5kZXhlcygpKSB7XG4gICAgICBpZiAoIXRoaXMuaXNCYWNrZ3JvdW5kRmV0Y2godGhpcy52YWxMaXN0W2ldKSkge1xuICAgICAgICB5aWVsZCB0aGlzLnZhbExpc3RbaV1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzKClcbiAgfVxuXG4gIGZpbmQoZm4sIGdldE9wdGlvbnMgPSB7fSkge1xuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLmluZGV4ZXMoKSkge1xuICAgICAgaWYgKGZuKHRoaXMudmFsTGlzdFtpXSwgdGhpcy5rZXlMaXN0W2ldLCB0aGlzKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5rZXlMaXN0W2ldLCBnZXRPcHRpb25zKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvckVhY2goZm4sIHRoaXNwID0gdGhpcykge1xuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLmluZGV4ZXMoKSkge1xuICAgICAgZm4uY2FsbCh0aGlzcCwgdGhpcy52YWxMaXN0W2ldLCB0aGlzLmtleUxpc3RbaV0sIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgcmZvckVhY2goZm4sIHRoaXNwID0gdGhpcykge1xuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLnJpbmRleGVzKCkpIHtcbiAgICAgIGZuLmNhbGwodGhpc3AsIHRoaXMudmFsTGlzdFtpXSwgdGhpcy5rZXlMaXN0W2ldLCB0aGlzKVxuICAgIH1cbiAgfVxuXG4gIGdldCBwcnVuZSgpIHtcbiAgICBkZXByZWNhdGVkTWV0aG9kKCdwcnVuZScsICdwdXJnZVN0YWxlJylcbiAgICByZXR1cm4gdGhpcy5wdXJnZVN0YWxlXG4gIH1cblxuICBwdXJnZVN0YWxlKCkge1xuICAgIGxldCBkZWxldGVkID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5yaW5kZXhlcyh7IGFsbG93U3RhbGU6IHRydWUgfSkpIHtcbiAgICAgIGlmICh0aGlzLmlzU3RhbGUoaSkpIHtcbiAgICAgICAgdGhpcy5kZWxldGUodGhpcy5rZXlMaXN0W2ldKVxuICAgICAgICBkZWxldGVkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVsZXRlZFxuICB9XG5cbiAgZHVtcCgpIHtcbiAgICBjb25zdCBhcnIgPSBbXVxuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLmluZGV4ZXMoeyBhbGxvd1N0YWxlOiB0cnVlIH0pKSB7XG4gICAgICBjb25zdCBrZXkgPSB0aGlzLmtleUxpc3RbaV1cbiAgICAgIGNvbnN0IHYgPSB0aGlzLnZhbExpc3RbaV1cbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5pc0JhY2tncm91bmRGZXRjaCh2KVxuICAgICAgICA/IHYuX19zdGFsZVdoaWxlRmV0Y2hpbmdcbiAgICAgICAgOiB2XG4gICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgY29udGludWVcbiAgICAgIGNvbnN0IGVudHJ5ID0geyB2YWx1ZSB9XG4gICAgICBpZiAodGhpcy50dGxzKSB7XG4gICAgICAgIGVudHJ5LnR0bCA9IHRoaXMudHRsc1tpXVxuICAgICAgICAvLyBhbHdheXMgZHVtcCB0aGUgc3RhcnQgcmVsYXRpdmUgdG8gYSBwb3J0YWJsZSB0aW1lc3RhbXBcbiAgICAgICAgLy8gaXQncyBvayBmb3IgdGhpcyB0byBiZSBhIGJpdCBzbG93LCBpdCdzIGEgcmFyZSBvcGVyYXRpb24uXG4gICAgICAgIGNvbnN0IGFnZSA9IHBlcmYubm93KCkgLSB0aGlzLnN0YXJ0c1tpXVxuICAgICAgICBlbnRyeS5zdGFydCA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAtIGFnZSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNpemVzKSB7XG4gICAgICAgIGVudHJ5LnNpemUgPSB0aGlzLnNpemVzW2ldXG4gICAgICB9XG4gICAgICBhcnIudW5zaGlmdChba2V5LCBlbnRyeV0pXG4gICAgfVxuICAgIHJldHVybiBhcnJcbiAgfVxuXG4gIGxvYWQoYXJyKSB7XG4gICAgdGhpcy5jbGVhcigpXG4gICAgZm9yIChjb25zdCBba2V5LCBlbnRyeV0gb2YgYXJyKSB7XG4gICAgICBpZiAoZW50cnkuc3RhcnQpIHtcbiAgICAgICAgLy8gZW50cnkuc3RhcnQgaXMgYSBwb3J0YWJsZSB0aW1lc3RhbXAsIGJ1dCB3ZSBtYXkgYmUgdXNpbmdcbiAgICAgICAgLy8gbm9kZSdzIHBlcmZvcm1hbmNlLm5vdygpLCBzbyBjYWxjdWxhdGUgdGhlIG9mZnNldC5cbiAgICAgICAgLy8gaXQncyBvayBmb3IgdGhpcyB0byBiZSBhIGJpdCBzbG93LCBpdCdzIGEgcmFyZSBvcGVyYXRpb24uXG4gICAgICAgIGNvbnN0IGFnZSA9IERhdGUubm93KCkgLSBlbnRyeS5zdGFydFxuICAgICAgICBlbnRyeS5zdGFydCA9IHBlcmYubm93KCkgLSBhZ2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0KGtleSwgZW50cnkudmFsdWUsIGVudHJ5KVxuICAgIH1cbiAgfVxuXG4gIGRpc3Bvc2UoX3YsIF9rLCBfcmVhc29uKSB7fVxuXG4gIHNldChcbiAgICBrLFxuICAgIHYsXG4gICAge1xuICAgICAgdHRsID0gdGhpcy50dGwsXG4gICAgICBzdGFydCxcbiAgICAgIG5vRGlzcG9zZU9uU2V0ID0gdGhpcy5ub0Rpc3Bvc2VPblNldCxcbiAgICAgIHNpemUgPSAwLFxuICAgICAgc2l6ZUNhbGN1bGF0aW9uID0gdGhpcy5zaXplQ2FsY3VsYXRpb24sXG4gICAgICBub1VwZGF0ZVRUTCA9IHRoaXMubm9VcGRhdGVUVEwsXG4gICAgICBzdGF0dXMsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIHNpemUgPSB0aGlzLnJlcXVpcmVTaXplKGssIHYsIHNpemUsIHNpemVDYWxjdWxhdGlvbilcbiAgICAvLyBpZiB0aGUgaXRlbSBkb2Vzbid0IGZpdCwgZG9uJ3QgZG8gYW55dGhpbmdcbiAgICAvLyBOQjogbWF4RW50cnlTaXplIHNldCB0byBtYXhTaXplIGJ5IGRlZmF1bHRcbiAgICBpZiAodGhpcy5tYXhFbnRyeVNpemUgJiYgc2l6ZSA+IHRoaXMubWF4RW50cnlTaXplKSB7XG4gICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgIHN0YXR1cy5zZXQgPSAnbWlzcydcbiAgICAgICAgc3RhdHVzLm1heEVudHJ5U2l6ZUV4Y2VlZGVkID0gdHJ1ZVxuICAgICAgfVxuICAgICAgLy8gaGF2ZSB0byBkZWxldGUsIGluIGNhc2UgYSBiYWNrZ3JvdW5kIGZldGNoIGlzIHRoZXJlIGFscmVhZHkuXG4gICAgICAvLyBpbiBub24tYXN5bmMgY2FzZXMsIHRoaXMgaXMgYSBuby1vcFxuICAgICAgdGhpcy5kZWxldGUoaylcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICAgIGxldCBpbmRleCA9IHRoaXMuc2l6ZSA9PT0gMCA/IHVuZGVmaW5lZCA6IHRoaXMua2V5TWFwLmdldChrKVxuICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBhZGRpdGlvblxuICAgICAgaW5kZXggPSB0aGlzLm5ld0luZGV4KClcbiAgICAgIHRoaXMua2V5TGlzdFtpbmRleF0gPSBrXG4gICAgICB0aGlzLnZhbExpc3RbaW5kZXhdID0gdlxuICAgICAgdGhpcy5rZXlNYXAuc2V0KGssIGluZGV4KVxuICAgICAgdGhpcy5uZXh0W3RoaXMudGFpbF0gPSBpbmRleFxuICAgICAgdGhpcy5wcmV2W2luZGV4XSA9IHRoaXMudGFpbFxuICAgICAgdGhpcy50YWlsID0gaW5kZXhcbiAgICAgIHRoaXMuc2l6ZSsrXG4gICAgICB0aGlzLmFkZEl0ZW1TaXplKGluZGV4LCBzaXplLCBzdGF0dXMpXG4gICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgIHN0YXR1cy5zZXQgPSAnYWRkJ1xuICAgICAgfVxuICAgICAgbm9VcGRhdGVUVEwgPSBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGVcbiAgICAgIHRoaXMubW92ZVRvVGFpbChpbmRleClcbiAgICAgIGNvbnN0IG9sZFZhbCA9IHRoaXMudmFsTGlzdFtpbmRleF1cbiAgICAgIGlmICh2ICE9PSBvbGRWYWwpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCYWNrZ3JvdW5kRmV0Y2gob2xkVmFsKSkge1xuICAgICAgICAgIG9sZFZhbC5fX2Fib3J0Q29udHJvbGxlci5hYm9ydChuZXcgRXJyb3IoJ3JlcGxhY2VkJykpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKCFub0Rpc3Bvc2VPblNldCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKG9sZFZhbCwgaywgJ3NldCcpXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlZC5wdXNoKFtvbGRWYWwsIGssICdzZXQnXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtU2l6ZShpbmRleClcbiAgICAgICAgdGhpcy52YWxMaXN0W2luZGV4XSA9IHZcbiAgICAgICAgdGhpcy5hZGRJdGVtU2l6ZShpbmRleCwgc2l6ZSwgc3RhdHVzKVxuICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgc3RhdHVzLnNldCA9ICdyZXBsYWNlJ1xuICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID1cbiAgICAgICAgICAgIG9sZFZhbCAmJiB0aGlzLmlzQmFja2dyb3VuZEZldGNoKG9sZFZhbClcbiAgICAgICAgICAgICAgPyBvbGRWYWwuX19zdGFsZVdoaWxlRmV0Y2hpbmdcbiAgICAgICAgICAgICAgOiBvbGRWYWxcbiAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IHVuZGVmaW5lZCkgc3RhdHVzLm9sZFZhbHVlID0gb2xkVmFsdWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdGF0dXMpIHtcbiAgICAgICAgc3RhdHVzLnNldCA9ICd1cGRhdGUnXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0dGwgIT09IDAgJiYgdGhpcy50dGwgPT09IDAgJiYgIXRoaXMudHRscykge1xuICAgICAgdGhpcy5pbml0aWFsaXplVFRMVHJhY2tpbmcoKVxuICAgIH1cbiAgICBpZiAoIW5vVXBkYXRlVFRMKSB7XG4gICAgICB0aGlzLnNldEl0ZW1UVEwoaW5kZXgsIHR0bCwgc3RhcnQpXG4gICAgfVxuICAgIHRoaXMuc3RhdHVzVFRMKHN0YXR1cywgaW5kZXgpXG4gICAgaWYgKHRoaXMuZGlzcG9zZUFmdGVyKSB7XG4gICAgICB3aGlsZSAodGhpcy5kaXNwb3NlZC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlQWZ0ZXIoLi4udGhpcy5kaXNwb3NlZC5zaGlmdCgpKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgbmV3SW5kZXgoKSB7XG4gICAgaWYgKHRoaXMuc2l6ZSA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFpbFxuICAgIH1cbiAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLm1heCAmJiB0aGlzLm1heCAhPT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuZXZpY3QoZmFsc2UpXG4gICAgfVxuICAgIGlmICh0aGlzLmZyZWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5mcmVlLnBvcCgpXG4gICAgfVxuICAgIC8vIGluaXRpYWwgZmlsbCwganVzdCBrZWVwIHdyaXRpbmcgZG93biB0aGUgbGlzdFxuICAgIHJldHVybiB0aGlzLmluaXRpYWxGaWxsKytcbiAgfVxuXG4gIHBvcCgpIHtcbiAgICBpZiAodGhpcy5zaXplKSB7XG4gICAgICBjb25zdCB2YWwgPSB0aGlzLnZhbExpc3RbdGhpcy5oZWFkXVxuICAgICAgdGhpcy5ldmljdCh0cnVlKVxuICAgICAgcmV0dXJuIHZhbFxuICAgIH1cbiAgfVxuXG4gIGV2aWN0KGZyZWUpIHtcbiAgICBjb25zdCBoZWFkID0gdGhpcy5oZWFkXG4gICAgY29uc3QgayA9IHRoaXMua2V5TGlzdFtoZWFkXVxuICAgIGNvbnN0IHYgPSB0aGlzLnZhbExpc3RbaGVhZF1cbiAgICBpZiAodGhpcy5pc0JhY2tncm91bmRGZXRjaCh2KSkge1xuICAgICAgdi5fX2Fib3J0Q29udHJvbGxlci5hYm9ydChuZXcgRXJyb3IoJ2V2aWN0ZWQnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwb3NlKHYsIGssICdldmljdCcpXG4gICAgICBpZiAodGhpcy5kaXNwb3NlQWZ0ZXIpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlZC5wdXNoKFt2LCBrLCAnZXZpY3QnXSlcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW1vdmVJdGVtU2l6ZShoZWFkKVxuICAgIC8vIGlmIHdlIGFyZW4ndCBhYm91dCB0byB1c2UgdGhlIGluZGV4LCB0aGVuIG51bGwgdGhlc2Ugb3V0XG4gICAgaWYgKGZyZWUpIHtcbiAgICAgIHRoaXMua2V5TGlzdFtoZWFkXSA9IG51bGxcbiAgICAgIHRoaXMudmFsTGlzdFtoZWFkXSA9IG51bGxcbiAgICAgIHRoaXMuZnJlZS5wdXNoKGhlYWQpXG4gICAgfVxuICAgIHRoaXMuaGVhZCA9IHRoaXMubmV4dFtoZWFkXVxuICAgIHRoaXMua2V5TWFwLmRlbGV0ZShrKVxuICAgIHRoaXMuc2l6ZS0tXG4gICAgcmV0dXJuIGhlYWRcbiAgfVxuXG4gIGhhcyhrLCB7IHVwZGF0ZUFnZU9uSGFzID0gdGhpcy51cGRhdGVBZ2VPbkhhcywgc3RhdHVzIH0gPSB7fSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5rZXlNYXAuZ2V0KGspXG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghdGhpcy5pc1N0YWxlKGluZGV4KSkge1xuICAgICAgICBpZiAodXBkYXRlQWdlT25IYXMpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUl0ZW1BZ2UoaW5kZXgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1cykgc3RhdHVzLmhhcyA9ICdoaXQnXG4gICAgICAgIHRoaXMuc3RhdHVzVFRMKHN0YXR1cywgaW5kZXgpXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGVsc2UgaWYgKHN0YXR1cykge1xuICAgICAgICBzdGF0dXMuaGFzID0gJ3N0YWxlJ1xuICAgICAgICB0aGlzLnN0YXR1c1RUTChzdGF0dXMsIGluZGV4KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc3RhdHVzKSB7XG4gICAgICBzdGF0dXMuaGFzID0gJ21pc3MnXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLy8gbGlrZSBnZXQoKSwgYnV0IHdpdGhvdXQgYW55IExSVSB1cGRhdGluZyBvciBUVEwgZXhwaXJhdGlvblxuICBwZWVrKGssIHsgYWxsb3dTdGFsZSA9IHRoaXMuYWxsb3dTdGFsZSB9ID0ge30pIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMua2V5TWFwLmdldChrKVxuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkICYmIChhbGxvd1N0YWxlIHx8ICF0aGlzLmlzU3RhbGUoaW5kZXgpKSkge1xuICAgICAgY29uc3QgdiA9IHRoaXMudmFsTGlzdFtpbmRleF1cbiAgICAgIC8vIGVpdGhlciBzdGFsZSBhbmQgYWxsb3dlZCwgb3IgZm9yY2luZyBhIHJlZnJlc2ggb2Ygbm9uLXN0YWxlIHZhbHVlXG4gICAgICByZXR1cm4gdGhpcy5pc0JhY2tncm91bmRGZXRjaCh2KSA/IHYuX19zdGFsZVdoaWxlRmV0Y2hpbmcgOiB2XG4gICAgfVxuICB9XG5cbiAgYmFja2dyb3VuZEZldGNoKGssIGluZGV4LCBvcHRpb25zLCBjb250ZXh0KSB7XG4gICAgY29uc3QgdiA9IGluZGV4ID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiB0aGlzLnZhbExpc3RbaW5kZXhdXG4gICAgaWYgKHRoaXMuaXNCYWNrZ3JvdW5kRmV0Y2godikpIHtcbiAgICAgIHJldHVybiB2XG4gICAgfVxuICAgIGNvbnN0IGFjID0gbmV3IEFDKClcbiAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgIG9wdGlvbnMuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT5cbiAgICAgICAgYWMuYWJvcnQob3B0aW9ucy5zaWduYWwucmVhc29uKVxuICAgICAgKVxuICAgIH1cbiAgICBjb25zdCBmZXRjaE9wdHMgPSB7XG4gICAgICBzaWduYWw6IGFjLnNpZ25hbCxcbiAgICAgIG9wdGlvbnMsXG4gICAgICBjb250ZXh0LFxuICAgIH1cbiAgICBjb25zdCBjYiA9ICh2LCB1cGRhdGVDYWNoZSA9IGZhbHNlKSA9PiB7XG4gICAgICBjb25zdCB7IGFib3J0ZWQgfSA9IGFjLnNpZ25hbFxuICAgICAgY29uc3QgaWdub3JlQWJvcnQgPSBvcHRpb25zLmlnbm9yZUZldGNoQWJvcnQgJiYgdiAhPT0gdW5kZWZpbmVkXG4gICAgICBpZiAob3B0aW9ucy5zdGF0dXMpIHtcbiAgICAgICAgaWYgKGFib3J0ZWQgJiYgIXVwZGF0ZUNhY2hlKSB7XG4gICAgICAgICAgb3B0aW9ucy5zdGF0dXMuZmV0Y2hBYm9ydGVkID0gdHJ1ZVxuICAgICAgICAgIG9wdGlvbnMuc3RhdHVzLmZldGNoRXJyb3IgPSBhYy5zaWduYWwucmVhc29uXG4gICAgICAgICAgaWYgKGlnbm9yZUFib3J0KSBvcHRpb25zLnN0YXR1cy5mZXRjaEFib3J0SWdub3JlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcHRpb25zLnN0YXR1cy5mZXRjaFJlc29sdmVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWJvcnRlZCAmJiAhaWdub3JlQWJvcnQgJiYgIXVwZGF0ZUNhY2hlKSB7XG4gICAgICAgIHJldHVybiBmZXRjaEZhaWwoYWMuc2lnbmFsLnJlYXNvbilcbiAgICAgIH1cbiAgICAgIC8vIGVpdGhlciB3ZSBkaWRuJ3QgYWJvcnQsIGFuZCBhcmUgc3RpbGwgaGVyZSwgb3Igd2UgZGlkLCBhbmQgaWdub3JlZFxuICAgICAgaWYgKHRoaXMudmFsTGlzdFtpbmRleF0gPT09IHApIHtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmIChwLl9fc3RhbGVXaGlsZUZldGNoaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnZhbExpc3RbaW5kZXhdID0gcC5fX3N0YWxlV2hpbGVGZXRjaGluZ1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShrKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5zdGF0dXMpIG9wdGlvbnMuc3RhdHVzLmZldGNoVXBkYXRlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLnNldChrLCB2LCBmZXRjaE9wdHMub3B0aW9ucylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZcbiAgICB9XG4gICAgY29uc3QgZWIgPSBlciA9PiB7XG4gICAgICBpZiAob3B0aW9ucy5zdGF0dXMpIHtcbiAgICAgICAgb3B0aW9ucy5zdGF0dXMuZmV0Y2hSZWplY3RlZCA9IHRydWVcbiAgICAgICAgb3B0aW9ucy5zdGF0dXMuZmV0Y2hFcnJvciA9IGVyXG4gICAgICB9XG4gICAgICByZXR1cm4gZmV0Y2hGYWlsKGVyKVxuICAgIH1cbiAgICBjb25zdCBmZXRjaEZhaWwgPSBlciA9PiB7XG4gICAgICBjb25zdCB7IGFib3J0ZWQgfSA9IGFjLnNpZ25hbFxuICAgICAgY29uc3QgYWxsb3dTdGFsZUFib3J0ZWQgPVxuICAgICAgICBhYm9ydGVkICYmIG9wdGlvbnMuYWxsb3dTdGFsZU9uRmV0Y2hBYm9ydFxuICAgICAgY29uc3QgYWxsb3dTdGFsZSA9XG4gICAgICAgIGFsbG93U3RhbGVBYm9ydGVkIHx8IG9wdGlvbnMuYWxsb3dTdGFsZU9uRmV0Y2hSZWplY3Rpb25cbiAgICAgIGNvbnN0IG5vRGVsZXRlID0gYWxsb3dTdGFsZSB8fCBvcHRpb25zLm5vRGVsZXRlT25GZXRjaFJlamVjdGlvblxuICAgICAgaWYgKHRoaXMudmFsTGlzdFtpbmRleF0gPT09IHApIHtcbiAgICAgICAgLy8gaWYgd2UgYWxsb3cgc3RhbGUgb24gZmV0Y2ggcmVqZWN0aW9ucywgdGhlbiB3ZSBuZWVkIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgIC8vIHRoZSBzdGFsZSB2YWx1ZSBpcyBub3QgcmVtb3ZlZCBmcm9tIHRoZSBjYWNoZSB3aGVuIHRoZSBmZXRjaCBmYWlscy5cbiAgICAgICAgY29uc3QgZGVsID0gIW5vRGVsZXRlIHx8IHAuX19zdGFsZVdoaWxlRmV0Y2hpbmcgPT09IHVuZGVmaW5lZFxuICAgICAgICBpZiAoZGVsKSB7XG4gICAgICAgICAgdGhpcy5kZWxldGUoaylcbiAgICAgICAgfSBlbHNlIGlmICghYWxsb3dTdGFsZUFib3J0ZWQpIHtcbiAgICAgICAgICAvLyBzdGlsbCByZXBsYWNlIHRoZSAqcHJvbWlzZSogd2l0aCB0aGUgc3RhbGUgdmFsdWUsXG4gICAgICAgICAgLy8gc2luY2Ugd2UgYXJlIGRvbmUgd2l0aCB0aGUgcHJvbWlzZSBhdCB0aGlzIHBvaW50LlxuICAgICAgICAgIC8vIGxlYXZlIGl0IHVudG91Y2hlZCBpZiB3ZSdyZSBzdGlsbCB3YWl0aW5nIGZvciBhblxuICAgICAgICAgIC8vIGFib3J0ZWQgYmFja2dyb3VuZCBmZXRjaCB0aGF0IGhhc24ndCB5ZXQgcmV0dXJuZWQuXG4gICAgICAgICAgdGhpcy52YWxMaXN0W2luZGV4XSA9IHAuX19zdGFsZVdoaWxlRmV0Y2hpbmdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGFsbG93U3RhbGUpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuc3RhdHVzICYmIHAuX19zdGFsZVdoaWxlRmV0Y2hpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG9wdGlvbnMuc3RhdHVzLnJldHVybmVkU3RhbGUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHAuX19zdGFsZVdoaWxlRmV0Y2hpbmdcbiAgICAgIH0gZWxzZSBpZiAocC5fX3JldHVybmVkID09PSBwKSB7XG4gICAgICAgIHRocm93IGVyXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBjYWxsID0gKHJlcywgcmVqKSA9PiB7XG4gICAgICB0aGlzLmZldGNoTWV0aG9kKGssIHYsIGZldGNoT3B0cykudGhlbih2ID0+IHJlcyh2KSwgcmVqKVxuICAgICAgLy8gaWdub3JlZCwgd2UgZ28gdW50aWwgd2UgZmluaXNoLCByZWdhcmRsZXNzLlxuICAgICAgLy8gZGVmZXIgY2hlY2sgdW50aWwgd2UgYXJlIGFjdHVhbGx5IGFib3J0aW5nLFxuICAgICAgLy8gc28gZmV0Y2hNZXRob2QgY2FuIG92ZXJyaWRlLlxuICAgICAgYWMuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIW9wdGlvbnMuaWdub3JlRmV0Y2hBYm9ydCB8fFxuICAgICAgICAgIG9wdGlvbnMuYWxsb3dTdGFsZU9uRmV0Y2hBYm9ydFxuICAgICAgICApIHtcbiAgICAgICAgICByZXMoKVxuICAgICAgICAgIC8vIHdoZW4gaXQgZXZlbnR1YWxseSByZXNvbHZlcywgdXBkYXRlIHRoZSBjYWNoZS5cbiAgICAgICAgICBpZiAob3B0aW9ucy5hbGxvd1N0YWxlT25GZXRjaEFib3J0KSB7XG4gICAgICAgICAgICByZXMgPSB2ID0+IGNiKHYsIHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zdGF0dXMpIG9wdGlvbnMuc3RhdHVzLmZldGNoRGlzcGF0Y2hlZCA9IHRydWVcbiAgICBjb25zdCBwID0gbmV3IFByb21pc2UocGNhbGwpLnRoZW4oY2IsIGViKVxuICAgIHAuX19hYm9ydENvbnRyb2xsZXIgPSBhY1xuICAgIHAuX19zdGFsZVdoaWxlRmV0Y2hpbmcgPSB2XG4gICAgcC5fX3JldHVybmVkID0gbnVsbFxuICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBpbnRlcm5hbCwgZG9uJ3QgZXhwb3NlIHN0YXR1cy5cbiAgICAgIHRoaXMuc2V0KGssIHAsIHsgLi4uZmV0Y2hPcHRzLm9wdGlvbnMsIHN0YXR1czogdW5kZWZpbmVkIH0pXG4gICAgICBpbmRleCA9IHRoaXMua2V5TWFwLmdldChrKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZhbExpc3RbaW5kZXhdID0gcFxuICAgIH1cbiAgICByZXR1cm4gcFxuICB9XG5cbiAgaXNCYWNrZ3JvdW5kRmV0Y2gocCkge1xuICAgIHJldHVybiAoXG4gICAgICBwICYmXG4gICAgICB0eXBlb2YgcCA9PT0gJ29iamVjdCcgJiZcbiAgICAgIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgcCxcbiAgICAgICAgJ19fc3RhbGVXaGlsZUZldGNoaW5nJ1xuICAgICAgKSAmJlxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHAsICdfX3JldHVybmVkJykgJiZcbiAgICAgIChwLl9fcmV0dXJuZWQgPT09IHAgfHwgcC5fX3JldHVybmVkID09PSBudWxsKVxuICAgIClcbiAgfVxuXG4gIC8vIHRoaXMgdGFrZXMgdGhlIHVuaW9uIG9mIGdldCgpIGFuZCBzZXQoKSBvcHRzLCBiZWNhdXNlIGl0IGRvZXMgYm90aFxuICBhc3luYyBmZXRjaChcbiAgICBrLFxuICAgIHtcbiAgICAgIC8vIGdldCBvcHRpb25zXG4gICAgICBhbGxvd1N0YWxlID0gdGhpcy5hbGxvd1N0YWxlLFxuICAgICAgdXBkYXRlQWdlT25HZXQgPSB0aGlzLnVwZGF0ZUFnZU9uR2V0LFxuICAgICAgbm9EZWxldGVPblN0YWxlR2V0ID0gdGhpcy5ub0RlbGV0ZU9uU3RhbGVHZXQsXG4gICAgICAvLyBzZXQgb3B0aW9uc1xuICAgICAgdHRsID0gdGhpcy50dGwsXG4gICAgICBub0Rpc3Bvc2VPblNldCA9IHRoaXMubm9EaXNwb3NlT25TZXQsXG4gICAgICBzaXplID0gMCxcbiAgICAgIHNpemVDYWxjdWxhdGlvbiA9IHRoaXMuc2l6ZUNhbGN1bGF0aW9uLFxuICAgICAgbm9VcGRhdGVUVEwgPSB0aGlzLm5vVXBkYXRlVFRMLFxuICAgICAgLy8gZmV0Y2ggZXhjbHVzaXZlIG9wdGlvbnNcbiAgICAgIG5vRGVsZXRlT25GZXRjaFJlamVjdGlvbiA9IHRoaXMubm9EZWxldGVPbkZldGNoUmVqZWN0aW9uLFxuICAgICAgYWxsb3dTdGFsZU9uRmV0Y2hSZWplY3Rpb24gPSB0aGlzLmFsbG93U3RhbGVPbkZldGNoUmVqZWN0aW9uLFxuICAgICAgaWdub3JlRmV0Y2hBYm9ydCA9IHRoaXMuaWdub3JlRmV0Y2hBYm9ydCxcbiAgICAgIGFsbG93U3RhbGVPbkZldGNoQWJvcnQgPSB0aGlzLmFsbG93U3RhbGVPbkZldGNoQWJvcnQsXG4gICAgICBmZXRjaENvbnRleHQgPSB0aGlzLmZldGNoQ29udGV4dCxcbiAgICAgIGZvcmNlUmVmcmVzaCA9IGZhbHNlLFxuICAgICAgc3RhdHVzLFxuICAgICAgc2lnbmFsLFxuICAgIH0gPSB7fVxuICApIHtcbiAgICBpZiAoIXRoaXMuZmV0Y2hNZXRob2QpIHtcbiAgICAgIGlmIChzdGF0dXMpIHN0YXR1cy5mZXRjaCA9ICdnZXQnXG4gICAgICByZXR1cm4gdGhpcy5nZXQoaywge1xuICAgICAgICBhbGxvd1N0YWxlLFxuICAgICAgICB1cGRhdGVBZ2VPbkdldCxcbiAgICAgICAgbm9EZWxldGVPblN0YWxlR2V0LFxuICAgICAgICBzdGF0dXMsXG4gICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBhbGxvd1N0YWxlLFxuICAgICAgdXBkYXRlQWdlT25HZXQsXG4gICAgICBub0RlbGV0ZU9uU3RhbGVHZXQsXG4gICAgICB0dGwsXG4gICAgICBub0Rpc3Bvc2VPblNldCxcbiAgICAgIHNpemUsXG4gICAgICBzaXplQ2FsY3VsYXRpb24sXG4gICAgICBub1VwZGF0ZVRUTCxcbiAgICAgIG5vRGVsZXRlT25GZXRjaFJlamVjdGlvbixcbiAgICAgIGFsbG93U3RhbGVPbkZldGNoUmVqZWN0aW9uLFxuICAgICAgYWxsb3dTdGFsZU9uRmV0Y2hBYm9ydCxcbiAgICAgIGlnbm9yZUZldGNoQWJvcnQsXG4gICAgICBzdGF0dXMsXG4gICAgICBzaWduYWwsXG4gICAgfVxuXG4gICAgbGV0IGluZGV4ID0gdGhpcy5rZXlNYXAuZ2V0KGspXG4gICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChzdGF0dXMpIHN0YXR1cy5mZXRjaCA9ICdtaXNzJ1xuICAgICAgY29uc3QgcCA9IHRoaXMuYmFja2dyb3VuZEZldGNoKGssIGluZGV4LCBvcHRpb25zLCBmZXRjaENvbnRleHQpXG4gICAgICByZXR1cm4gKHAuX19yZXR1cm5lZCA9IHApXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGluIGNhY2hlLCBtYXliZSBhbHJlYWR5IGZldGNoaW5nXG4gICAgICBjb25zdCB2ID0gdGhpcy52YWxMaXN0W2luZGV4XVxuICAgICAgaWYgKHRoaXMuaXNCYWNrZ3JvdW5kRmV0Y2godikpIHtcbiAgICAgICAgY29uc3Qgc3RhbGUgPVxuICAgICAgICAgIGFsbG93U3RhbGUgJiYgdi5fX3N0YWxlV2hpbGVGZXRjaGluZyAhPT0gdW5kZWZpbmVkXG4gICAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICBzdGF0dXMuZmV0Y2ggPSAnaW5mbGlnaHQnXG4gICAgICAgICAgaWYgKHN0YWxlKSBzdGF0dXMucmV0dXJuZWRTdGFsZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhbGUgPyB2Ll9fc3RhbGVXaGlsZUZldGNoaW5nIDogKHYuX19yZXR1cm5lZCA9IHYpXG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHdlIGZvcmNlIGEgcmVmcmVzaCwgdGhhdCBtZWFucyBkbyBOT1Qgc2VydmUgdGhlIGNhY2hlZCB2YWx1ZSxcbiAgICAgIC8vIHVubGVzcyB3ZSBhcmUgYWxyZWFkeSBpbiB0aGUgcHJvY2VzcyBvZiByZWZyZXNoaW5nIHRoZSBjYWNoZS5cbiAgICAgIGNvbnN0IGlzU3RhbGUgPSB0aGlzLmlzU3RhbGUoaW5kZXgpXG4gICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiAhaXNTdGFsZSkge1xuICAgICAgICBpZiAoc3RhdHVzKSBzdGF0dXMuZmV0Y2ggPSAnaGl0J1xuICAgICAgICB0aGlzLm1vdmVUb1RhaWwoaW5kZXgpXG4gICAgICAgIGlmICh1cGRhdGVBZ2VPbkdldCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlSXRlbUFnZShpbmRleClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXR1c1RUTChzdGF0dXMsIGluZGV4KVxuICAgICAgICByZXR1cm4gdlxuICAgICAgfVxuXG4gICAgICAvLyBvaywgaXQgaXMgc3RhbGUgb3IgYSBmb3JjZWQgcmVmcmVzaCwgYW5kIG5vdCBhbHJlYWR5IGZldGNoaW5nLlxuICAgICAgLy8gcmVmcmVzaCB0aGUgY2FjaGUuXG4gICAgICBjb25zdCBwID0gdGhpcy5iYWNrZ3JvdW5kRmV0Y2goaywgaW5kZXgsIG9wdGlvbnMsIGZldGNoQ29udGV4dClcbiAgICAgIGNvbnN0IGhhc1N0YWxlID0gcC5fX3N0YWxlV2hpbGVGZXRjaGluZyAhPT0gdW5kZWZpbmVkXG4gICAgICBjb25zdCBzdGFsZVZhbCA9IGhhc1N0YWxlICYmIGFsbG93U3RhbGVcbiAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgc3RhdHVzLmZldGNoID0gaGFzU3RhbGUgJiYgaXNTdGFsZSA/ICdzdGFsZScgOiAncmVmcmVzaCdcbiAgICAgICAgaWYgKHN0YWxlVmFsICYmIGlzU3RhbGUpIHN0YXR1cy5yZXR1cm5lZFN0YWxlID0gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YWxlVmFsID8gcC5fX3N0YWxlV2hpbGVGZXRjaGluZyA6IChwLl9fcmV0dXJuZWQgPSBwKVxuICAgIH1cbiAgfVxuXG4gIGdldChcbiAgICBrLFxuICAgIHtcbiAgICAgIGFsbG93U3RhbGUgPSB0aGlzLmFsbG93U3RhbGUsXG4gICAgICB1cGRhdGVBZ2VPbkdldCA9IHRoaXMudXBkYXRlQWdlT25HZXQsXG4gICAgICBub0RlbGV0ZU9uU3RhbGVHZXQgPSB0aGlzLm5vRGVsZXRlT25TdGFsZUdldCxcbiAgICAgIHN0YXR1cyxcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmtleU1hcC5nZXQoaylcbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbExpc3RbaW5kZXhdXG4gICAgICBjb25zdCBmZXRjaGluZyA9IHRoaXMuaXNCYWNrZ3JvdW5kRmV0Y2godmFsdWUpXG4gICAgICB0aGlzLnN0YXR1c1RUTChzdGF0dXMsIGluZGV4KVxuICAgICAgaWYgKHRoaXMuaXNTdGFsZShpbmRleCkpIHtcbiAgICAgICAgaWYgKHN0YXR1cykgc3RhdHVzLmdldCA9ICdzdGFsZSdcbiAgICAgICAgLy8gZGVsZXRlIG9ubHkgaWYgbm90IGFuIGluLWZsaWdodCBiYWNrZ3JvdW5kIGZldGNoXG4gICAgICAgIGlmICghZmV0Y2hpbmcpIHtcbiAgICAgICAgICBpZiAoIW5vRGVsZXRlT25TdGFsZUdldCkge1xuICAgICAgICAgICAgdGhpcy5kZWxldGUoaylcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXR1cykgc3RhdHVzLnJldHVybmVkU3RhbGUgPSBhbGxvd1N0YWxlXG4gICAgICAgICAgcmV0dXJuIGFsbG93U3RhbGUgPyB2YWx1ZSA6IHVuZGVmaW5lZFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICAgIHN0YXR1cy5yZXR1cm5lZFN0YWxlID1cbiAgICAgICAgICAgICAgYWxsb3dTdGFsZSAmJiB2YWx1ZS5fX3N0YWxlV2hpbGVGZXRjaGluZyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBhbGxvd1N0YWxlID8gdmFsdWUuX19zdGFsZVdoaWxlRmV0Y2hpbmcgOiB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0YXR1cykgc3RhdHVzLmdldCA9ICdoaXQnXG4gICAgICAgIC8vIGlmIHdlJ3JlIGN1cnJlbnRseSBmZXRjaGluZyBpdCwgd2UgZG9uJ3QgYWN0dWFsbHkgaGF2ZSBpdCB5ZXRcbiAgICAgICAgLy8gaXQncyBub3Qgc3RhbGUsIHdoaWNoIG1lYW5zIHRoaXMgaXNuJ3QgYSBzdGFsZVdoaWxlUmVmZXRjaGluZy5cbiAgICAgICAgLy8gSWYgaXQncyBub3Qgc3RhbGUsIGFuZCBmZXRjaGluZywgQU5EIGhhcyBhIF9fc3RhbGVXaGlsZUZldGNoaW5nXG4gICAgICAgIC8vIHZhbHVlLCB0aGVuIHRoYXQgbWVhbnMgdGhlIHVzZXIgZmV0Y2hlZCB3aXRoIHtmb3JjZVJlZnJlc2g6dHJ1ZX0sXG4gICAgICAgIC8vIHNvIGl0J3Mgc2FmZSB0byByZXR1cm4gdGhhdCB2YWx1ZS5cbiAgICAgICAgaWYgKGZldGNoaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlLl9fc3RhbGVXaGlsZUZldGNoaW5nXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb3ZlVG9UYWlsKGluZGV4KVxuICAgICAgICBpZiAodXBkYXRlQWdlT25HZXQpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUl0ZW1BZ2UoaW5kZXgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzdGF0dXMpIHtcbiAgICAgIHN0YXR1cy5nZXQgPSAnbWlzcydcbiAgICB9XG4gIH1cblxuICBjb25uZWN0KHAsIG4pIHtcbiAgICB0aGlzLnByZXZbbl0gPSBwXG4gICAgdGhpcy5uZXh0W3BdID0gblxuICB9XG5cbiAgbW92ZVRvVGFpbChpbmRleCkge1xuICAgIC8vIGlmIHRhaWwgYWxyZWFkeSwgbm90aGluZyB0byBkb1xuICAgIC8vIGlmIGhlYWQsIG1vdmUgaGVhZCB0byBuZXh0W2luZGV4XVxuICAgIC8vIGVsc2VcbiAgICAvLyAgIG1vdmUgbmV4dFtwcmV2W2luZGV4XV0gdG8gbmV4dFtpbmRleF0gKGhlYWQgaGFzIG5vIHByZXYpXG4gICAgLy8gICBtb3ZlIHByZXZbbmV4dFtpbmRleF1dIHRvIHByZXZbaW5kZXhdXG4gICAgLy8gcHJldltpbmRleF0gPSB0YWlsXG4gICAgLy8gbmV4dFt0YWlsXSA9IGluZGV4XG4gICAgLy8gdGFpbCA9IGluZGV4XG4gICAgaWYgKGluZGV4ICE9PSB0aGlzLnRhaWwpIHtcbiAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5oZWFkKSB7XG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMubmV4dFtpbmRleF1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY29ubmVjdCh0aGlzLnByZXZbaW5kZXhdLCB0aGlzLm5leHRbaW5kZXhdKVxuICAgICAgfVxuICAgICAgdGhpcy5jb25uZWN0KHRoaXMudGFpbCwgaW5kZXgpXG4gICAgICB0aGlzLnRhaWwgPSBpbmRleFxuICAgIH1cbiAgfVxuXG4gIGdldCBkZWwoKSB7XG4gICAgZGVwcmVjYXRlZE1ldGhvZCgnZGVsJywgJ2RlbGV0ZScpXG4gICAgcmV0dXJuIHRoaXMuZGVsZXRlXG4gIH1cblxuICBkZWxldGUoaykge1xuICAgIGxldCBkZWxldGVkID0gZmFsc2VcbiAgICBpZiAodGhpcy5zaXplICE9PSAwKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMua2V5TWFwLmdldChrKVxuICAgICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGVsZXRlZCA9IHRydWVcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSA9PT0gMSkge1xuICAgICAgICAgIHRoaXMuY2xlYXIoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucmVtb3ZlSXRlbVNpemUoaW5kZXgpXG4gICAgICAgICAgY29uc3QgdiA9IHRoaXMudmFsTGlzdFtpbmRleF1cbiAgICAgICAgICBpZiAodGhpcy5pc0JhY2tncm91bmRGZXRjaCh2KSkge1xuICAgICAgICAgICAgdi5fX2Fib3J0Q29udHJvbGxlci5hYm9ydChuZXcgRXJyb3IoJ2RlbGV0ZWQnKSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKHYsIGssICdkZWxldGUnKVxuICAgICAgICAgICAgaWYgKHRoaXMuZGlzcG9zZUFmdGVyKSB7XG4gICAgICAgICAgICAgIHRoaXMuZGlzcG9zZWQucHVzaChbdiwgaywgJ2RlbGV0ZSddKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmtleU1hcC5kZWxldGUoaylcbiAgICAgICAgICB0aGlzLmtleUxpc3RbaW5kZXhdID0gbnVsbFxuICAgICAgICAgIHRoaXMudmFsTGlzdFtpbmRleF0gPSBudWxsXG4gICAgICAgICAgaWYgKGluZGV4ID09PSB0aGlzLnRhaWwpIHtcbiAgICAgICAgICAgIHRoaXMudGFpbCA9IHRoaXMucHJldltpbmRleF1cbiAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMubmV4dFtpbmRleF1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXh0W3RoaXMucHJldltpbmRleF1dID0gdGhpcy5uZXh0W2luZGV4XVxuICAgICAgICAgICAgdGhpcy5wcmV2W3RoaXMubmV4dFtpbmRleF1dID0gdGhpcy5wcmV2W2luZGV4XVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNpemUtLVxuICAgICAgICAgIHRoaXMuZnJlZS5wdXNoKGluZGV4KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICB3aGlsZSAodGhpcy5kaXNwb3NlZC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlQWZ0ZXIoLi4udGhpcy5kaXNwb3NlZC5zaGlmdCgpKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVsZXRlZFxuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgZm9yIChjb25zdCBpbmRleCBvZiB0aGlzLnJpbmRleGVzKHsgYWxsb3dTdGFsZTogdHJ1ZSB9KSkge1xuICAgICAgY29uc3QgdiA9IHRoaXMudmFsTGlzdFtpbmRleF1cbiAgICAgIGlmICh0aGlzLmlzQmFja2dyb3VuZEZldGNoKHYpKSB7XG4gICAgICAgIHYuX19hYm9ydENvbnRyb2xsZXIuYWJvcnQobmV3IEVycm9yKCdkZWxldGVkJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBrID0gdGhpcy5rZXlMaXN0W2luZGV4XVxuICAgICAgICB0aGlzLmRpc3Bvc2UodiwgaywgJ2RlbGV0ZScpXG4gICAgICAgIGlmICh0aGlzLmRpc3Bvc2VBZnRlcikge1xuICAgICAgICAgIHRoaXMuZGlzcG9zZWQucHVzaChbdiwgaywgJ2RlbGV0ZSddKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5rZXlNYXAuY2xlYXIoKVxuICAgIHRoaXMudmFsTGlzdC5maWxsKG51bGwpXG4gICAgdGhpcy5rZXlMaXN0LmZpbGwobnVsbClcbiAgICBpZiAodGhpcy50dGxzKSB7XG4gICAgICB0aGlzLnR0bHMuZmlsbCgwKVxuICAgICAgdGhpcy5zdGFydHMuZmlsbCgwKVxuICAgIH1cbiAgICBpZiAodGhpcy5zaXplcykge1xuICAgICAgdGhpcy5zaXplcy5maWxsKDApXG4gICAgfVxuICAgIHRoaXMuaGVhZCA9IDBcbiAgICB0aGlzLnRhaWwgPSAwXG4gICAgdGhpcy5pbml0aWFsRmlsbCA9IDFcbiAgICB0aGlzLmZyZWUubGVuZ3RoID0gMFxuICAgIHRoaXMuY2FsY3VsYXRlZFNpemUgPSAwXG4gICAgdGhpcy5zaXplID0gMFxuICAgIGlmICh0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICB3aGlsZSAodGhpcy5kaXNwb3NlZC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlQWZ0ZXIoLi4udGhpcy5kaXNwb3NlZC5zaGlmdCgpKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCByZXNldCgpIHtcbiAgICBkZXByZWNhdGVkTWV0aG9kKCdyZXNldCcsICdjbGVhcicpXG4gICAgcmV0dXJuIHRoaXMuY2xlYXJcbiAgfVxuXG4gIGdldCBsZW5ndGgoKSB7XG4gICAgZGVwcmVjYXRlZFByb3BlcnR5KCdsZW5ndGgnLCAnc2l6ZScpXG4gICAgcmV0dXJuIHRoaXMuc2l6ZVxuICB9XG5cbiAgc3RhdGljIGdldCBBYm9ydENvbnRyb2xsZXIoKSB7XG4gICAgcmV0dXJuIEFDXG4gIH1cbiAgc3RhdGljIGdldCBBYm9ydFNpZ25hbCgpIHtcbiAgICByZXR1cm4gQVNcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMUlVDYWNoZVxuIiwiLy8gUHJvY2VkdXJlcyBmb3IgY2hhbmdpbmcgdGhlIGJ5dGUgc2V4XG4vLyBTUUxpdGUgaXMgYWx3YXlzIEJpZy1FbmRpYW4sIEpTIGZvbGxvd3MgdGhlIHBsYXRmb3JtLCB3aGljaCBpcyBMaXR0bGUtRW5kaWFuIG9uIHg4NlxuY29uc3Qgc3dhcE5lZWRlZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYWIgPSBuZXcgQXJyYXlCdWZmZXIoMik7XG4gICAgY29uc3QgdTggPSBuZXcgVWludDhBcnJheShhYik7XG4gICAgY29uc3QgdTE2ID0gbmV3IFVpbnQxNkFycmF5KGFiKTtcbiAgICB1OFswXSA9IDB4RjA7XG4gICAgdThbMV0gPSAweDBEO1xuICAgIC8vIEJpZ1xuICAgIGlmICh1MTZbMF0gPT0gMHhGMDBEKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTeXN0ZW0gaXMgQmlnLUVuZGlhbicpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIExpdHRsZVxuICAgIGlmICh1MTZbMF0gPT0gMHgwREYwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTeXN0ZW0gaXMgTGl0dGxlLUVuZGlhbicpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgZGV0ZXJtaW5pbmcgZW5kaWFubmVzczogJHt1MTZ9YCk7XG59KSgpO1xuZXhwb3J0IGZ1bmN0aW9uIG50b2gxNihkYXRhKSB7XG4gICAgaWYgKHN3YXBOZWVkZWQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkYXRhW2ldID0gKChkYXRhW2ldICYgMHhGRjAwKSA+PiA4KSB8ICgoZGF0YVtpXSAmIDB4MDBGRikgPDwgOCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbmRpYW5uZXNzLmpzLm1hcCIsInZhciBfYTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRpbWVvdXQ6IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy50aW1lb3V0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAyMDAwMCxcbiAgICAgICAgbWF4UGFnZVNpemU6IChfYiA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5tYXhQYWdlU2l6ZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogNDA5NixcbiAgICAgICAgY2FjaGVTaXplOiAoX2MgPSBvcHRpb25zLmNhY2hlU2l6ZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMTAyNCxcbiAgICAgICAgZmV0Y2hPcHRpb25zOiAoX2QgPSBvcHRpb25zLmZldGNoT3B0aW9ucykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDoge31cbiAgICB9O1xufVxuY29uc3QgZGVidWdPcHRpb25zID0gKHR5cGVvZiBTUUxJVEVfREVCVUcgIT09ICd1bmRlZmluZWQnICYmIFNRTElURV9ERUJVRykgfHxcbiAgICAodHlwZW9mICgoX2EgPSBwcm9jZXNzID09PSBudWxsIHx8IHByb2Nlc3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb2Nlc3MuZW52KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuU1FMSVRFX0RFQlVHKSAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5lbnYuU1FMSVRFX0RFQlVHKSB8fFxuICAgICcnO1xuZXhwb3J0IGNvbnN0IGRlYnVnU3lzID0gWyd0aHJlYWRzJywgJ3ZmcycsICdjYWNoZSddO1xuZXhwb3J0IGNvbnN0IGRlYnVnID0ge307XG5mb3IgKGNvbnN0IGQgb2YgZGVidWdTeXMpIHtcbiAgICBkZWJ1Z1tkXSA9IGRlYnVnT3B0aW9ucy5pbmNsdWRlcyhkKSA/XG4gICAgICAgIGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKSA6XG4gICAgICAgICgpID0+IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZmcy1odHRwLXR5cGVzLmpzLm1hcCIsIi8vIFRoaXMgaXMgdGhlIGVudHJ5IHBvaW50IGZvciBhbiBIVFRQIGJhY2tlbmQgdGhyZWFkXG4vLyBJdCBjYW4gc2VydmUgbXVsdGlwbGUgU1FMaXRlIHdvcmtlciB0aHJlYWRzXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCBMUlVDYWNoZSBmcm9tICdscnUtY2FjaGUnO1xuaW1wb3J0IHsgbnRvaDE2IH0gZnJvbSAnLi9lbmRpYW5uZXNzLmpzJztcbmltcG9ydCB7IGRlYnVnIH0gZnJvbSAnLi92ZnMtaHR0cC10eXBlcy5qcyc7XG4vKmlmICh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgPT09ICd1bmRlZmluZWQnIHx8ICEoc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlKSlcbiAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIHNjcmlwdCBtdXN0IHJ1biBpbiBhIFdlYldvcmtlcicpOyovXG5sZXQgb3B0aW9ucztcbi8vIFRoZSBzZXQgb2Ygc3FsaXRlIFdvcmtlcnMgdGhhdCB1c2UgdGhpcyBiYWNrZW5kXG5jb25zdCBjb25zdW1lcnMgPSB7fTtcbmNvbnN0IGZpbGVzID0gbmV3IExSVUNhY2hlKHtcbiAgICBtYXg6IDMyXG59KTtcbi8vIFRoZSBlbnRyeSBmb3IgYSBnaXZlbiBwYWdlIGNhbiBiZSBlaXRoZXIgdGhlIHBhZ2UgaXRzZWxmXG4vLyBvciB0aGUgbnVtYmVyIG9mIHRoZSBwYWdlIHRoYXQgaGFzIHRoZSBwYXJlbnQgc3VwZXItcGFnZVxubGV0IGNhY2hlO1xubGV0IG5leHRJZCA9IDE7XG5jb25zdCBiYWNrZW5kQXN5bmNNZXRob2RzID0ge1xuICAgIC8vIEhUVFAgaXMgYSBzdGF0ZWxlc3MgcHJvdG9jb2wsIHNvIHhPcGVuIG1lYW5zIHZlcmlmeSBpZiB0aGUgVVJMIGlzIHZhbGlkXG4gICAgeE9wZW46IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKGZpbGVzLmhhcyhtc2cudXJsKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIGNvbnN0IGZldGNoT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMuZmV0Y2hPcHRpb25zKTtcbiAgICAgICAgICAgIGlmICghZmV0Y2hPcHRpb25zLm1ldGhvZClcbiAgICAgICAgICAgICAgICBmZXRjaE9wdGlvbnMubWV0aG9kID0gJ0hFQUQnO1xuICAgICAgICAgICAgZmV0Y2hPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCAoKF9hID0gZmV0Y2hPcHRpb25zLmhlYWRlcnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KSk7XG4gICAgICAgICAgICBjb25zdCBoZWFkID0geWllbGQgZmV0Y2gobXNnLnVybCwgZmV0Y2hPcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChoZWFkLmhlYWRlcnMuZ2V0KCdBY2NlcHQtUmFuZ2VzJykgIT09ICdieXRlcycpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFNlcnZlciBmb3IgJHttc2cudXJsfSBkb2VzIG5vdCBhZHZlcnRpc2UgJ0FjY2VwdC1SYW5nZXMnLiBgICtcbiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBzZXJ2ZXIgc3VwcG9ydHMgaXQsIGluIG9yZGVyIHRvIHJlbW92ZSB0aGlzIG1lc3NhZ2UsIGFkZCBcIkFjY2VwdC1SYW5nZXM6IGJ5dGVzXCIuICcgK1xuICAgICAgICAgICAgICAgICAgICAnQWRkaXRpb25hbGx5LCBpZiB1c2luZyBDT1JTLCBhZGQgXCJBY2Nlc3MtQ29udHJvbC1FeHBvc2UtSGVhZGVyczogKlwiLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmlsZXMuc2V0KG1zZy51cmwsIHtcbiAgICAgICAgICAgICAgICB1cmw6IG1zZy51cmwsXG4gICAgICAgICAgICAgICAgaWQ6IG5leHRJZCsrLFxuICAgICAgICAgICAgICAgIHNpemU6IEJpZ0ludChoZWFkLmhlYWRlcnMuZ2V0KCdDb250ZW50LUxlbmd0aCcpKSxcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgYmUgZGV0ZXJtaW5lZCBvbiB0aGUgZmlyc3QgcmVhZFxuICAgICAgICAgICAgICAgIHBhZ2VTaXplOiBudWxsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIFRoZXJlIGlzIG5vIHJlYWwgZGlmZmVyZW5jZSBiZXR3ZWVuIHhPcGVuIGFuZCB4QWNjZXNzLCBvbmx5IHRoZSBzZW1hbnRpY3MgZGlmZmVyXG4gICAgeEFjY2VzczogZnVuY3Rpb24gKG1zZywgY29uc3VtZXIpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBVaW50MzJBcnJheShjb25zdW1lci5zaG0sIDAsIDEpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0geWllbGQgYmFja2VuZEFzeW5jTWV0aG9kcy54T3Blbihtc2csIGNvbnN1bWVyKTtcbiAgICAgICAgICAgICAgICBpZiAociA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbMF0gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0WzBdID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbMF0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgeFJlYWQ6IGZ1bmN0aW9uIChtc2csIGNvbnN1bWVyKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gZmlsZXMuZ2V0KG1zZy51cmwpO1xuICAgICAgICAgICAgaWYgKCFlbnRyeSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpbGUgJHttc2cudXJsfSBub3Qgb3BlbmApO1xuICAgICAgICAgICAgaWYgKCFlbnRyeS5wYWdlU2l6ZSkge1xuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSB0aGUgcGFnZSBzaXplIGlmIHdlIGRvbid0IGtub3cgaXRcbiAgICAgICAgICAgICAgICAvLyBJdCBpcyBpbiB0d28gYmlnLWVuZGlhbiBieXRlcyBhdCBvZmZzZXQgMTYgaW4gd2hhdCBpcyBhbHdheXMgdGhlIGZpcnN0IHBhZ2VcbiAgICAgICAgICAgICAgICBlbnRyeS5wYWdlU2l6ZSA9IDEwMjQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFnZURhdGFCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMik7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHlpZWxkIGJhY2tlbmRBc3luY01ldGhvZHMueFJlYWQoeyBtc2c6ICd4UmVhZCcsIHVybDogbXNnLnVybCwgb2Zmc2V0OiBCaWdJbnQoMTYpLCBuOiAyIH0sIHsgYnVmZmVyOiBuZXcgVWludDhBcnJheShwYWdlRGF0YUJ1ZmZlcikgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFnZURhdGEgPSBuZXcgVWludDE2QXJyYXkocGFnZURhdGFCdWZmZXIpO1xuICAgICAgICAgICAgICAgIGlmIChyICE9PSAwKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgICAgICBudG9oMTYocGFnZURhdGEpO1xuICAgICAgICAgICAgICAgIGVudHJ5LnBhZ2VTaXplID0gcGFnZURhdGFbMF07XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnBhZ2VTaXplICE9IDEwMjQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHBhZ2Ugc2l6ZSBpcyBub3QgMTAyNCB3ZSBjYW4ndCBrZWVwIHRoaXMgXCJwYWdlXCIgaW4gdGhlIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUGFnZSBzaXplIGZvciAke21zZy51cmx9IGlzICR7ZW50cnkucGFnZVNpemV9LCByZWNvbW1lbmRlZCBzaXplIGlzIDEwMjRgKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUuZGVsZXRlKGVudHJ5LmlkICsgJ3wwJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5wYWdlU2l6ZSA+IG9wdGlvbnMubWF4UGFnZVNpemUpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtlbnRyeS5wYWdlU2l6ZX0gaXMgb3ZlciB0aGUgbWF4aW11bSBjb25maWd1cmVkICR7b3B0aW9ucy5tYXhQYWdlU2l6ZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhZ2VTaXplID0gQmlnSW50KGVudHJ5LnBhZ2VTaXplKTtcbiAgICAgICAgICAgIGNvbnN0IGxlbiA9IEJpZ0ludChtc2cubik7XG4gICAgICAgICAgICBjb25zdCBwYWdlID0gbXNnLm9mZnNldCAvIHBhZ2VTaXplO1xuICAgICAgICAgICAgaWYgKHBhZ2UgKiBwYWdlU2l6ZSAhPT0gbXNnLm9mZnNldClcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJlYWQgY2h1bmsgJHttc2cub2Zmc2V0fSBpcyBub3QgcGFnZS1hbGlnbmVkYCk7XG4gICAgICAgICAgICBsZXQgcGFnZVN0YXJ0ID0gcGFnZSAqIHBhZ2VTaXplO1xuICAgICAgICAgICAgaWYgKHBhZ2VTdGFydCArIHBhZ2VTaXplIDwgbXNnLm9mZnNldCArIGxlbilcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlYWQgY2h1bmsgJHttc2cub2Zmc2V0fToke21zZy5ufSBzcGFucyBhY3Jvc3MgYSBwYWdlLWJvdW5kYXJ5YCk7XG4gICAgICAgICAgICBjb25zdCBjYWNoZUlkID0gZW50cnkuaWQgKyAnfCcgKyBwYWdlO1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBjYWNoZS5nZXQoY2FjaGVJZCk7XG4gICAgICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IGFub3RoZXIgdGhyZWFkIGhhcyByZXF1ZXN0ZWQgdGhpcyBzZWdtZW50XG4gICAgICAgICAgICAgICAgZGF0YSA9IHlpZWxkIGRhdGE7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgZGVidWdbJ2NhY2hlJ10oYGNhY2hlIGhpdCAobXVsdGktcGFnZSBzZWdtZW50KSBmb3IgJHttc2cudXJsfToke3BhZ2V9YCk7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYWdlIGlzIHByZXNlbnQgYXMgYSBzZWdtZW50IG9mIGEgc3VwZXItcGFnZVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhZ2VTdGFydCA9IEJpZ0ludChkYXRhKSAqIHBhZ2VTaXplO1xuICAgICAgICAgICAgICAgIGRhdGEgPSBjYWNoZS5nZXQoZW50cnkuaWQgKyAnfCcgKyBkYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSB5aWVsZCBkYXRhO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3QgYWxsIHN1YnBhZ2VzIGFyZSB2YWxpZCwgdGhlcmUgYXJlIHR3byBwb3NzaWJsZSBjYXNlc1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGVyZSBhIG5vbi12YWxpZCBzdXBlcnBhZ2UgY2FuIGJlIHJlZmVyZW5jZWQ6XG4gICAgICAgICAgICAgICAgICAgIC8vICogdGhlIHN1cGVycGFnZSB3YXMgdG9vIGJpZyB0byBmaXQgaW4gdGhlIGNhY2hlXG4gICAgICAgICAgICAgICAgICAgIC8vICogdGhlIHN1cGVycGFnZSB3YXMgZXZpY3RlZCBiZWZvcmUgdGhlIHN1YnNlZ21lbnRzXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VTdGFydCA9IG5ld1BhZ2VTdGFydDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGRlYnVnWydjYWNoZSddKGBjYWNoZSBtaXNzIGZvciAke21zZy51cmx9OiR7cGFnZX1gKTtcbiAgICAgICAgICAgICAgICBsZXQgY2h1bmtTaXplID0gZW50cnkucGFnZVNpemU7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHByZXZpb3VzIHBhZ2UgaXMgaW4gdGhlIGNhY2hlLCB3ZSBkb3VibGUgdGhlIHBhZ2Ugc2l6ZVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgd2FzIHRoZSBvcmlnaW5hbCBwYWdlIG1lcmdpbmcgYWxnb3JpdGhtIGltcGxlbWVudGVkIGJ5IEBwaGlyZXNreVxuICAgICAgICAgICAgICAgIGxldCBwcmV2ID0gcGFnZSA+IDAgJiYgY2FjaGUuZ2V0KGVudHJ5LmlkICsgJ3wnICsgKE51bWJlcihwYWdlKSAtIDEpKTtcbiAgICAgICAgICAgICAgICBpZiAocHJldikge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJldiBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ID0geWllbGQgcHJldjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcmV2ID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXYgPSBjYWNoZS5nZXQoZW50cnkuaWQgKyAnfCcgKyBwcmV2KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXYgaW5zdGFuY2VvZiBQcm9taXNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldiA9IHlpZWxkIHByZXY7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2IGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmFsaWQgc3VwZXJwYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVua1NpemUgPSBwcmV2LmJ5dGVMZW5ndGggKiAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdbJ2NhY2hlJ10oYGRvd25sb2FkaW5nIHN1cGVyIHBhZ2Ugb2Ygc2l6ZSAke2NodW5rU2l6ZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwYWdlcyA9IGNodW5rU2l6ZSAvIGVudHJ5LnBhZ2VTaXplO1xuICAgICAgICAgICAgICAgIC8vIERvd25sb2FkaW5nIGEgbmV3IHNlZ21lbnRcbiAgICAgICAgICAgICAgICBjb25zdCBmZXRjaE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLmZldGNoT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgaWYgKCFmZXRjaE9wdGlvbnMubWV0aG9kKVxuICAgICAgICAgICAgICAgICAgICBmZXRjaE9wdGlvbnMubWV0aG9kID0gJ0dFVCc7XG4gICAgICAgICAgICAgICAgZmV0Y2hPcHRpb25zLmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCAoKF9hID0gZmV0Y2hPcHRpb25zLmhlYWRlcnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KSk7XG4gICAgICAgICAgICAgICAgZmV0Y2hPcHRpb25zLmhlYWRlcnNbJ1JhbmdlJ10gPSBgYnl0ZXM9JHtwYWdlU3RhcnR9LSR7cGFnZVN0YXJ0ICsgQmlnSW50KGNodW5rU2l6ZSAtIDEpfWA7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcCA9IGZldGNoKG1zZy51cmwsIGZldGNoT3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHIpID0+IHIuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHIpID0+IG5ldyBVaW50OEFycmF5KHIpKTtcbiAgICAgICAgICAgICAgICAvLyBXZSBzeW5jaHJvbm91c2x5IHNldCBhIFByb21pc2UgaW4gdGhlIGNhY2hlIGluIGNhc2UgYW5vdGhlciB0aHJlYWRcbiAgICAgICAgICAgICAgICAvLyB0cmllcyB0byByZWFkIHRoZSBzYW1lIHNlZ21lbnRcbiAgICAgICAgICAgICAgICBjYWNoZS5zZXQoY2FjaGVJZCwgcmVzcCk7XG4gICAgICAgICAgICAgICAgLy8gVGhlc2UgcG9pbnQgdG8gdGhlIHBhcmVudCBzdXBlci1wYWdlIGFuZCByZXNvbHZlIGF0IHRoZSBzYW1lIHRpbWUgYXMgcmVzcFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBOdW1iZXIocGFnZSkgKyAxOyBpIDwgTnVtYmVyKHBhZ2UpICsgcGFnZXM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXQoZW50cnkuaWQgKyAnfCcgKyBpLCByZXNwLnRoZW4oKCkgPT4gTnVtYmVyKHBhZ2UpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGEgPSB5aWVsZCByZXNwO1xuICAgICAgICAgICAgICAgIGlmICghKGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB8fCBkYXRhLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIEhUVFAgcmVzcG9uc2UgcmVjZWl2ZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzcCl9YCk7XG4gICAgICAgICAgICAgICAgLy8gSW4gY2FzZSBvZiBhIG11bHRpcGxlLXBhZ2Ugc2VnbWVudCwgdGhpcyBpcyB0aGUgcGFyZW50IHN1cGVyLXBhZ2VcbiAgICAgICAgICAgICAgICBjYWNoZS5zZXQoY2FjaGVJZCwgZGF0YSk7XG4gICAgICAgICAgICAgICAgLy8gVGhlc2UgcG9pbnQgdG8gdGhlIHBhcmVudCBzdXBlci1wYWdlXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IE51bWJlcihwYWdlKSArIDE7IGkgPCBOdW1iZXIocGFnZSkgKyBwYWdlczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldChlbnRyeS5pZCArICd8JyArIGksIE51bWJlcihwYWdlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVidWdbJ2NhY2hlJ10oYGNhY2hlIGhpdCBmb3IgJHttc2cudXJsfToke3BhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYWdlT2Zmc2V0ID0gTnVtYmVyKG1zZy5vZmZzZXQgLSBwYWdlU3RhcnQpO1xuICAgICAgICAgICAgY29uc3VtZXIuYnVmZmVyLnNldChkYXRhLnN1YmFycmF5KHBhZ2VPZmZzZXQsIHBhZ2VPZmZzZXQgKyBtc2cubikpO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gVGhpcyBpcyBjYWNoZWRcbiAgICB4RmlsZXNpemU6IGZ1bmN0aW9uIChtc2csIGNvbnN1bWVyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IGZpbGVzLmdldChtc2cudXJsKTtcbiAgICAgICAgICAgIGlmICghZW50cnkpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlICR7bXNnLmZpZH0gbm90IG9wZW5gKTtcbiAgICAgICAgICAgIGNvbnN0IG91dCA9IG5ldyBCaWdJbnQ2NEFycmF5KGNvbnN1bWVyLnNobSwgMCwgMSk7XG4gICAgICAgICAgICBvdXRbMF0gPSBlbnRyeS5zaXplO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5mdW5jdGlvbiB3b3JrTWVzc2FnZSh7IGRhdGEgfSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGRlYnVnWyd0aHJlYWRzJ10oJ1JlY2VpdmVkIG5ldyB3b3JrIG1lc3NhZ2UnLCB0aGlzLCBkYXRhKTtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByID0geWllbGQgYmFja2VuZEFzeW5jTWV0aG9kc1tkYXRhLm1zZ10oZGF0YSwgdGhpcyk7XG4gICAgICAgICAgICBkZWJ1Z1sndGhyZWFkcyddKCdvcGVyYXRpb24gc3VjY2Vzc2Z1bCcsIHRoaXMsIHIpO1xuICAgICAgICAgICAgQXRvbWljcy5zdG9yZSh0aGlzLmxvY2ssIDAsIHIpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgQXRvbWljcy5zdG9yZSh0aGlzLmxvY2ssIDAsIDEpO1xuICAgICAgICB9XG4gICAgICAgIEF0b21pY3Mubm90aWZ5KHRoaXMubG9jaywgMCk7XG4gICAgfSk7XG59XG5nbG9iYWxUaGlzLm9ubWVzc2FnZSA9ICh7IGRhdGEgfSkgPT4ge1xuICAgIGRlYnVnWyd0aHJlYWRzJ10oJ1JlY2VpdmVkIG5ldyBjb250cm9sIG1lc3NhZ2UnLCBkYXRhKTtcbiAgICBzd2l0Y2ggKGRhdGEubXNnKSB7XG4gICAgICAgIGNhc2UgJ2hhbmRzaGFrZSc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2htID0gbmV3IFNoYXJlZEFycmF5QnVmZmVyKG9wdGlvbnMubWF4UGFnZVNpemUgKyBJbnQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NrID0gbmV3IEludDMyQXJyYXkoc2htLCBvcHRpb25zLm1heFBhZ2VTaXplKTtcbiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSBuZXcgVWludDhBcnJheShzaG0sIDAsIG9wdGlvbnMubWF4UGFnZVNpemUpO1xuICAgICAgICAgICAgICAgIGxvY2tbMF0gPSAweGZmZmY7XG4gICAgICAgICAgICAgICAgY29uc3VtZXJzW2RhdGEuaWRdID0geyBpZDogZGF0YS5pZCwgcG9ydDogZGF0YS5wb3J0LCBzaG0sIGxvY2ssIGJ1ZmZlciB9O1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlKHsgbXNnOiAnYWNrJywgaWQ6IGRhdGEuaWQsIHNobSwgbG9jayB9KTtcbiAgICAgICAgICAgICAgICBkYXRhLnBvcnQub25tZXNzYWdlID0gd29ya01lc3NhZ2UuYmluZChjb25zdW1lcnNbZGF0YS5pZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2luaXQnOlxuICAgICAgICAgICAgb3B0aW9ucyA9IGRhdGEub3B0aW9ucztcbiAgICAgICAgICAgIGNhY2hlID0gbmV3IExSVUNhY2hlKHtcbiAgICAgICAgICAgICAgICBtYXhTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSAqIDEwMjQsXG4gICAgICAgICAgICAgICAgc2l6ZUNhbGN1bGF0aW9uOiAodmFsdWUpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gdmFsdWUuYnl0ZUxlbmd0aCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogNDsgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY2xvc2UnOlxuICAgICAgICAgICAgcG9zdE1lc3NhZ2UoeyBtc2c6ICdhY2snIH0pO1xuICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1lc3NhZ2UgcmVjZWl2ZWQgYnkgYmFja2VuZDogJHtkYXRhfWApO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZnMtaHR0cC13b3JrZXIuanMubWFwIl0sIm5hbWVzIjpbInBlcmYiLCJwZXJmb3JtYW5jZSIsIm5vdyIsIkRhdGUiLCJBQyIsIkFib3J0Q29udHJvbGxlciIsImNvbnN0cnVjdG9yIiwidGhpcyIsInNpZ25hbCIsIkFTIiwiYWJvcnQiLCJyZWFzb24iLCJFcnJvciIsImFib3J0ZWQiLCJkaXNwYXRjaEV2ZW50IiwidHlwZSIsInRhcmdldCIsImhhc0Fib3J0U2lnbmFsIiwiQWJvcnRTaWduYWwiLCJoYXNBQ0Fib3J0U2lnbmFsIiwidW5kZWZpbmVkIiwiX2xpc3RlbmVycyIsImUiLCJvbmFib3J0IiwiZm9yRWFjaCIsImYiLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJmbiIsInB1c2giLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZmlsdGVyIiwid2FybmVkIiwiU2V0IiwiZGVwcmVjYXRlZE9wdGlvbiIsIm9wdCIsImluc3RlYWQiLCJjb2RlIiwic2hvdWxkV2FybiIsIndhcm4iLCJMUlVDYWNoZSIsImRlcHJlY2F0ZWRNZXRob2QiLCJtZXRob2QiLCJwcm90b3R5cGUiLCJnZXQiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbWl0V2FybmluZyIsImEiLCJwcm9jZXNzIiwiY29uc29sZSIsImVycm9yIiwiaGFzIiwid2hhdCIsImFkZCIsImlzUG9zSW50IiwibiIsIk1hdGgiLCJmbG9vciIsImlzRmluaXRlIiwiZ2V0VWludEFycmF5IiwibWF4IiwicG93IiwiVWludDhBcnJheSIsIlVpbnQxNkFycmF5IiwiVWludDMyQXJyYXkiLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiWmVyb0FycmF5IiwiQXJyYXkiLCJzaXplIiwic3VwZXIiLCJmaWxsIiwiU3RhY2siLCJVaW50QXJyYXkiLCJoZWFwIiwibGVuZ3RoIiwicG9wIiwib3B0aW9ucyIsInR0bCIsInR0bFJlc29sdXRpb24iLCJ0dGxBdXRvcHVyZ2UiLCJ1cGRhdGVBZ2VPbkdldCIsInVwZGF0ZUFnZU9uSGFzIiwiYWxsb3dTdGFsZSIsImRpc3Bvc2UiLCJkaXNwb3NlQWZ0ZXIiLCJub0Rpc3Bvc2VPblNldCIsIm5vVXBkYXRlVFRMIiwibWF4U2l6ZSIsIm1heEVudHJ5U2l6ZSIsInNpemVDYWxjdWxhdGlvbiIsImZldGNoTWV0aG9kIiwiZmV0Y2hDb250ZXh0Iiwibm9EZWxldGVPbkZldGNoUmVqZWN0aW9uIiwibm9EZWxldGVPblN0YWxlR2V0IiwiYWxsb3dTdGFsZU9uRmV0Y2hSZWplY3Rpb24iLCJhbGxvd1N0YWxlT25GZXRjaEFib3J0IiwiaWdub3JlRmV0Y2hBYm9ydCIsIm1heEFnZSIsInN0YWxlIiwiVHlwZUVycm9yIiwia2V5TWFwIiwiTWFwIiwia2V5TGlzdCIsInZhbExpc3QiLCJuZXh0IiwicHJldiIsImhlYWQiLCJ0YWlsIiwiZnJlZSIsImluaXRpYWxGaWxsIiwiZGlzcG9zZWQiLCJpbml0aWFsaXplU2l6ZVRyYWNraW5nIiwiaW5pdGlhbGl6ZVRUTFRyYWNraW5nIiwiZ2V0UmVtYWluaW5nVFRMIiwia2V5IiwiSW5maW5pdHkiLCJ0dGxzIiwic3RhcnRzIiwic2V0SXRlbVRUTCIsImluZGV4Iiwic3RhcnQiLCJ0Iiwic2V0VGltZW91dCIsImlzU3RhbGUiLCJkZWxldGUiLCJ1bnJlZiIsInVwZGF0ZUl0ZW1BZ2UiLCJzdGF0dXNUVEwiLCJzdGF0dXMiLCJjYWNoZWROb3ciLCJnZXROb3ciLCJyZW1haW5pbmdUVEwiLCJfaW5kZXgiLCJfc3RhdHVzIiwiX3R0bCIsIl9zdGFydCIsImNhbGN1bGF0ZWRTaXplIiwic2l6ZXMiLCJyZW1vdmVJdGVtU2l6ZSIsInJlcXVpcmVTaXplIiwiayIsInYiLCJpc0JhY2tncm91bmRGZXRjaCIsImFkZEl0ZW1TaXplIiwiZXZpY3QiLCJlbnRyeVNpemUiLCJ0b3RhbENhbGN1bGF0ZWRTaXplIiwiX3NpemUiLCJfayIsIl92IiwiaSIsImlzVmFsaWRJbmRleCIsImluZGV4ZXMiLCJyaW5kZXhlcyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiZW50cmllcyIsImZpbmQiLCJnZXRPcHRpb25zIiwidGhpc3AiLCJjYWxsIiwicmZvckVhY2giLCJwcnVuZSIsInB1cmdlU3RhbGUiLCJkZWxldGVkIiwiZHVtcCIsImFyciIsInZhbHVlIiwiX19zdGFsZVdoaWxlRmV0Y2hpbmciLCJlbnRyeSIsImFnZSIsInVuc2hpZnQiLCJsb2FkIiwiY2xlYXIiLCJzZXQiLCJfcmVhc29uIiwibWF4RW50cnlTaXplRXhjZWVkZWQiLCJuZXdJbmRleCIsIm1vdmVUb1RhaWwiLCJvbGRWYWwiLCJfX2Fib3J0Q29udHJvbGxlciIsIm9sZFZhbHVlIiwic2hpZnQiLCJ2YWwiLCJwZWVrIiwiYmFja2dyb3VuZEZldGNoIiwiY29udGV4dCIsImFjIiwiZmV0Y2hPcHRzIiwiY2IiLCJ1cGRhdGVDYWNoZSIsImlnbm9yZUFib3J0IiwiZmV0Y2hBYm9ydGVkIiwiZmV0Y2hFcnJvciIsImZldGNoQWJvcnRJZ25vcmVkIiwiZmV0Y2hSZXNvbHZlZCIsInAiLCJmZXRjaFVwZGF0ZWQiLCJmZXRjaEZhaWwiLCJlciIsImFsbG93U3RhbGVBYm9ydGVkIiwibm9EZWxldGUiLCJyZXR1cm5lZFN0YWxlIiwiX19yZXR1cm5lZCIsImZldGNoRGlzcGF0Y2hlZCIsIlByb21pc2UiLCJyZXMiLCJyZWoiLCJ0aGVuIiwiZmV0Y2hSZWplY3RlZCIsImhhc093blByb3BlcnR5IiwiYXN5bmMiLCJmb3JjZVJlZnJlc2giLCJmZXRjaCIsImhhc1N0YWxlIiwic3RhbGVWYWwiLCJmZXRjaGluZyIsImNvbm5lY3QiLCJkZWwiLCJyZXNldCIsImZpZWxkIiwiZGVwcmVjYXRlZFByb3BlcnR5Iiwic3dhcE5lZWRlZCIsImFiIiwiQXJyYXlCdWZmZXIiLCJ1OCIsInUxNiIsImxvZyIsImRlYnVnT3B0aW9ucyIsImRlYnVnU3lzIiwiZGVidWciLCJkIiwiaW5jbHVkZXMiLCJiaW5kIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInN0ZXAiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJhcHBseSIsImNvbnN1bWVycyIsImZpbGVzIiwiY2FjaGUiLCJuZXh0SWQiLCJiYWNrZW5kQXN5bmNNZXRob2RzIiwieE9wZW4iLCJtc2ciLCJfYSIsInVybCIsImZldGNoT3B0aW9ucyIsImFzc2lnbiIsImhlYWRlcnMiLCJpZCIsIkJpZ0ludCIsInBhZ2VTaXplIiwieEFjY2VzcyIsImNvbnN1bWVyIiwic2htIiwiciIsInhSZWFkIiwicGFnZURhdGFCdWZmZXIiLCJvZmZzZXQiLCJidWZmZXIiLCJwYWdlRGF0YSIsImRhdGEiLCJudG9oMTYiLCJtYXhQYWdlU2l6ZSIsImxlbiIsInBhZ2UiLCJwYWdlU3RhcnQiLCJjYWNoZUlkIiwibmV3UGFnZVN0YXJ0IiwiY2h1bmtTaXplIiwiYnl0ZUxlbmd0aCIsInBhZ2VzIiwicmVzcCIsImFycmF5QnVmZmVyIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhZ2VPZmZzZXQiLCJzdWJhcnJheSIsInhGaWxlc2l6ZSIsImZpZCIsIkJpZ0ludDY0QXJyYXkiLCJ3b3JrTWVzc2FnZSIsIkF0b21pY3MiLCJzdG9yZSIsImxvY2siLCJub3RpZnkiLCJnbG9iYWxUaGlzIiwib25tZXNzYWdlIiwiU2hhcmVkQXJyYXlCdWZmZXIiLCJJbnQzMkFycmF5IiwiQllURVNfUEVSX0VMRU1FTlQiLCJwb3J0IiwicG9zdE1lc3NhZ2UiLCJjYWNoZVNpemUiLCJjbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=