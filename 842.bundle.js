"use strict";(self.webpackChunksqlite_wasm_http=self.webpackChunksqlite_wasm_http||[]).push([[842],{842:(t,e,i)=>{i.d(e,{Z:()=>y});const s="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,h="function"==typeof AbortController?AbortController:class{constructor(){this.signal=new a}abort(t=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||t,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},n="function"==typeof AbortSignal,o="function"==typeof h.AbortSignal,a=n?AbortSignal:o?h.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(t){"abort"===t.type&&(this.aborted=!0,this.onabort(t),this._listeners.forEach((e=>e(t)),this))}onabort(){}addEventListener(t,e){"abort"===t&&this._listeners.push(e)}removeEventListener(t,e){"abort"===t&&(this._listeners=this._listeners.filter((t=>t!==e)))}},r=new Set,l=(t,e)=>{const i=`LRU_CACHE_OPTION_${t}`;u(i)&&p(i,`${t} option`,`options.${e}`,w)},c=(t,e)=>{const i=`LRU_CACHE_METHOD_${t}`;if(u(i)){const{prototype:s}=w,{get:h}=Object.getOwnPropertyDescriptor(s,t);p(i,`${t} method`,`cache.${e}()`,h)}},d=(...t)=>{"object"==typeof process&&process&&"function"==typeof process.emitWarning?process.emitWarning(...t):console.error(...t)},u=t=>!r.has(t),p=(t,e,i,s)=>{r.add(t),d(`The ${e} is deprecated. Please use ${i} instead.`,"DeprecationWarning",t,s)},f=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),g=t=>f(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?S:null:null;class S extends Array{constructor(t){super(t),this.fill(0)}}class v{constructor(t){if(0===t)return[];const e=g(t);this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class w{constructor(t={}){const{max:e=0,ttl:i,ttlResolution:s=1,ttlAutopurge:h,updateAgeOnGet:n,updateAgeOnHas:o,allowStale:a,dispose:c,disposeAfter:p,noDisposeOnSet:S,noUpdateTTL:y,maxSize:m=0,maxEntrySize:z=0,sizeCalculation:L,fetchMethod:_,fetchContext:x,noDeleteOnFetchRejection:T,noDeleteOnStaleGet:A,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:F,ignoreFetchAbort:k}=t,{length:O,maxAge:E,stale:C}=t instanceof w?{}:t;if(0!==e&&!f(e))throw new TypeError("max option must be a nonnegative integer");const D=e?g(e):Array;if(!D)throw new Error("invalid max value: "+e);if(this.max=e,this.maxSize=m,this.maxEntrySize=z||this.maxSize,this.sizeCalculation=L||O,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=_||null,this.fetchMethod&&"function"!=typeof this.fetchMethod)throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=x,!this.fetchMethod&&void 0!==x)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(e).fill(null),this.valList=new Array(e).fill(null),this.next=new D(e),this.prev=new D(e),this.head=0,this.tail=0,this.free=new v(e),this.initialFill=1,this.size=0,"function"==typeof c&&(this.dispose=c),"function"==typeof p?(this.disposeAfter=p,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!S,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!T,this.allowStaleOnFetchRejection=!!b,this.allowStaleOnFetchAbort=!!F,this.ignoreFetchAbort=!!k,0!==this.maxEntrySize){if(0!==this.maxSize&&!f(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!f(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!a||!!C,this.noDeleteOnStaleGet=!!A,this.updateAgeOnGet=!!n,this.updateAgeOnHas=!!o,this.ttlResolution=f(s)||0===s?s:1,this.ttlAutopurge=!!h,this.ttl=i||E||0,this.ttl){if(!f(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(0===this.max&&0===this.ttl&&0===this.maxSize)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const t="LRU_CACHE_UNBOUNDED";u(t)&&(r.add(t),d("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,w))}C&&l("stale","allowStale"),E&&l("maxAge","ttl"),O&&l("length","sizeCalculation")}getRemainingTTL(t){return this.has(t,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new S(this.max),this.starts=new S(this.max),this.setItemTTL=(t,e,i=s.now())=>{if(this.starts[t]=0!==e?i:0,this.ttls[t]=e,0!==e&&this.ttlAutopurge){const i=setTimeout((()=>{this.isStale(t)&&this.delete(this.keyList[t])}),e+1);i.unref&&i.unref()}},this.updateItemAge=t=>{this.starts[t]=0!==this.ttls[t]?s.now():0},this.statusTTL=(i,s)=>{i&&(i.ttl=this.ttls[s],i.start=this.starts[s],i.now=t||e(),i.remainingTTL=i.now+i.ttl-i.start)};let t=0;const e=()=>{const e=s.now();if(this.ttlResolution>0){t=e;const i=setTimeout((()=>t=0),this.ttlResolution);i.unref&&i.unref()}return e};this.getRemainingTTL=i=>{const s=this.keyMap.get(i);return void 0===s?0:0===this.ttls[s]||0===this.starts[s]?1/0:this.starts[s]+this.ttls[s]-(t||e())},this.isStale=i=>0!==this.ttls[i]&&0!==this.starts[i]&&(t||e())-this.starts[i]>this.ttls[i]}updateItemAge(t){}statusTTL(t,e){}setItemTTL(t,e,i){}isStale(t){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new S(this.max),this.removeItemSize=t=>{this.calculatedSize-=this.sizes[t],this.sizes[t]=0},this.requireSize=(t,e,i,s)=>{if(this.isBackgroundFetch(e))return 0;if(!f(i)){if(!s)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof s)throw new TypeError("sizeCalculation must be a function");if(i=s(e,t),!f(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return i},this.addItemSize=(t,e,i)=>{if(this.sizes[t]=e,this.maxSize){const e=this.maxSize-this.sizes[t];for(;this.calculatedSize>e;)this.evict(!0)}this.calculatedSize+=this.sizes[t],i&&(i.entrySize=e,i.totalCalculatedSize=this.calculatedSize)}}removeItemSize(t){}addItemSize(t,e){}requireSize(t,e,i,s){if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.tail;this.isValidIndex(e)&&(!t&&this.isStale(e)||(yield e),e!==this.head);)e=this.prev[e]}*rindexes({allowStale:t=this.allowStale}={}){if(this.size)for(let e=this.head;this.isValidIndex(e)&&(!t&&this.isStale(e)||(yield e),e!==this.tail);)e=this.next[e]}isValidIndex(t){return void 0!==t&&this.keyMap.get(this.keyList[t])===t}*entries(){for(const t of this.indexes())this.isBackgroundFetch(this.valList[t])||(yield[this.keyList[t],this.valList[t]])}*rentries(){for(const t of this.rindexes())this.isBackgroundFetch(this.valList[t])||(yield[this.keyList[t],this.valList[t]])}*keys(){for(const t of this.indexes())this.isBackgroundFetch(this.valList[t])||(yield this.keyList[t])}*rkeys(){for(const t of this.rindexes())this.isBackgroundFetch(this.valList[t])||(yield this.keyList[t])}*values(){for(const t of this.indexes())this.isBackgroundFetch(this.valList[t])||(yield this.valList[t])}*rvalues(){for(const t of this.rindexes())this.isBackgroundFetch(this.valList[t])||(yield this.valList[t])}[Symbol.iterator](){return this.entries()}find(t,e={}){for(const i of this.indexes())if(t(this.valList[i],this.keyList[i],this))return this.get(this.keyList[i],e)}forEach(t,e=this){for(const i of this.indexes())t.call(e,this.valList[i],this.keyList[i],this)}rforEach(t,e=this){for(const i of this.rindexes())t.call(e,this.valList[i],this.keyList[i],this)}get prune(){return c("prune","purgeStale"),this.purgeStale}purgeStale(){let t=!1;for(const e of this.rindexes({allowStale:!0}))this.isStale(e)&&(this.delete(this.keyList[e]),t=!0);return t}dump(){const t=[];for(const e of this.indexes({allowStale:!0})){const i=this.keyList[e],h=this.valList[e],n=this.isBackgroundFetch(h)?h.__staleWhileFetching:h;if(void 0===n)continue;const o={value:n};if(this.ttls){o.ttl=this.ttls[e];const t=s.now()-this.starts[e];o.start=Math.floor(Date.now()-t)}this.sizes&&(o.size=this.sizes[e]),t.unshift([i,o])}return t}load(t){this.clear();for(const[e,i]of t){if(i.start){const t=Date.now()-i.start;i.start=s.now()-t}this.set(e,i.value,i)}}dispose(t,e,i){}set(t,e,{ttl:i=this.ttl,start:s,noDisposeOnSet:h=this.noDisposeOnSet,size:n=0,sizeCalculation:o=this.sizeCalculation,noUpdateTTL:a=this.noUpdateTTL,status:r}={}){if(n=this.requireSize(t,e,n,o),this.maxEntrySize&&n>this.maxEntrySize)return r&&(r.set="miss",r.maxEntrySizeExceeded=!0),this.delete(t),this;let l=0===this.size?void 0:this.keyMap.get(t);if(void 0===l)l=this.newIndex(),this.keyList[l]=t,this.valList[l]=e,this.keyMap.set(t,l),this.next[this.tail]=l,this.prev[l]=this.tail,this.tail=l,this.size++,this.addItemSize(l,n,r),r&&(r.set="add"),a=!1;else{this.moveToTail(l);const i=this.valList[l];if(e!==i){if(this.isBackgroundFetch(i)?i.__abortController.abort(new Error("replaced")):h||(this.dispose(i,t,"set"),this.disposeAfter&&this.disposed.push([i,t,"set"])),this.removeItemSize(l),this.valList[l]=e,this.addItemSize(l,n,r),r){r.set="replace";const t=i&&this.isBackgroundFetch(i)?i.__staleWhileFetching:i;void 0!==t&&(r.oldValue=t)}}else r&&(r.set="update")}if(0===i||0!==this.ttl||this.ttls||this.initializeTTLTracking(),a||this.setItemTTL(l,i,s),this.statusTTL(r,l),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return 0===this.size?this.tail:this.size===this.max&&0!==this.max?this.evict(!1):0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const t=this.valList[this.head];return this.evict(!0),t}}evict(t){const e=this.head,i=this.keyList[e],s=this.valList[e];return this.isBackgroundFetch(s)?s.__abortController.abort(new Error("evicted")):(this.dispose(s,i,"evict"),this.disposeAfter&&this.disposed.push([s,i,"evict"])),this.removeItemSize(e),t&&(this.keyList[e]=null,this.valList[e]=null,this.free.push(e)),this.head=this.next[e],this.keyMap.delete(i),this.size--,e}has(t,{updateAgeOnHas:e=this.updateAgeOnHas,status:i}={}){const s=this.keyMap.get(t);if(void 0!==s){if(!this.isStale(s))return e&&this.updateItemAge(s),i&&(i.has="hit"),this.statusTTL(i,s),!0;i&&(i.has="stale",this.statusTTL(i,s))}else i&&(i.has="miss");return!1}peek(t,{allowStale:e=this.allowStale}={}){const i=this.keyMap.get(t);if(void 0!==i&&(e||!this.isStale(i))){const t=this.valList[i];return this.isBackgroundFetch(t)?t.__staleWhileFetching:t}}backgroundFetch(t,e,i,s){const n=void 0===e?void 0:this.valList[e];if(this.isBackgroundFetch(n))return n;const o=new h;i.signal&&i.signal.addEventListener("abort",(()=>o.abort(i.signal.reason)));const a={signal:o.signal,options:i,context:s},r=(s,h=!1)=>{const{aborted:n}=o.signal,r=i.ignoreFetchAbort&&void 0!==s;return i.status&&(n&&!h?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,r&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),!n||r||h?(this.valList[e]===c&&(void 0===s?c.__staleWhileFetching?this.valList[e]=c.__staleWhileFetching:this.delete(t):(i.status&&(i.status.fetchUpdated=!0),this.set(t,s,a.options))),s):l(o.signal.reason)},l=s=>{const{aborted:h}=o.signal,n=h&&i.allowStaleOnFetchAbort,a=n||i.allowStaleOnFetchRejection,r=a||i.noDeleteOnFetchRejection;if(this.valList[e]===c&&(r&&void 0!==c.__staleWhileFetching?n||(this.valList[e]=c.__staleWhileFetching):this.delete(t)),a)return i.status&&void 0!==c.__staleWhileFetching&&(i.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw s};i.status&&(i.status.fetchDispatched=!0);const c=new Promise(((e,s)=>{this.fetchMethod(t,n,a).then((t=>e(t)),s),o.signal.addEventListener("abort",(()=>{i.ignoreFetchAbort&&!i.allowStaleOnFetchAbort||(e(),i.allowStaleOnFetchAbort&&(e=t=>r(t,!0)))}))})).then(r,(t=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=t),l(t))));return c.__abortController=o,c.__staleWhileFetching=n,c.__returned=null,void 0===e?(this.set(t,c,{...a.options,status:void 0}),e=this.keyMap.get(t)):this.valList[e]=c,c}isBackgroundFetch(t){return t&&"object"==typeof t&&"function"==typeof t.then&&Object.prototype.hasOwnProperty.call(t,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(t,"__returned")&&(t.__returned===t||null===t.__returned)}async fetch(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:h=this.ttl,noDisposeOnSet:n=this.noDisposeOnSet,size:o=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:r=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:c=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:u=this.allowStaleOnFetchAbort,fetchContext:p=this.fetchContext,forceRefresh:f=!1,status:g,signal:S}={}){if(!this.fetchMethod)return g&&(g.fetch="get"),this.get(t,{allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:g});const v={allowStale:e,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:h,noDisposeOnSet:n,size:o,sizeCalculation:a,noUpdateTTL:r,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:c,allowStaleOnFetchAbort:u,ignoreFetchAbort:d,status:g,signal:S};let w=this.keyMap.get(t);if(void 0===w){g&&(g.fetch="miss");const e=this.backgroundFetch(t,w,v,p);return e.__returned=e}{const s=this.valList[w];if(this.isBackgroundFetch(s)){const t=e&&void 0!==s.__staleWhileFetching;return g&&(g.fetch="inflight",t&&(g.returnedStale=!0)),t?s.__staleWhileFetching:s.__returned=s}const h=this.isStale(w);if(!f&&!h)return g&&(g.fetch="hit"),this.moveToTail(w),i&&this.updateItemAge(w),this.statusTTL(g,w),s;const n=this.backgroundFetch(t,w,v,p),o=void 0!==n.__staleWhileFetching,a=o&&e;return g&&(g.fetch=o&&h?"stale":"refresh",a&&h&&(g.returnedStale=!0)),a?n.__staleWhileFetching:n.__returned=n}}get(t,{allowStale:e=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:h}={}){const n=this.keyMap.get(t);if(void 0!==n){const o=this.valList[n],a=this.isBackgroundFetch(o);return this.statusTTL(h,n),this.isStale(n)?(h&&(h.get="stale"),a?(h&&(h.returnedStale=e&&void 0!==o.__staleWhileFetching),e?o.__staleWhileFetching:void 0):(s||this.delete(t),h&&(h.returnedStale=e),e?o:void 0)):(h&&(h.get="hit"),a?o.__staleWhileFetching:(this.moveToTail(n),i&&this.updateItemAge(n),o))}h&&(h.get="miss")}connect(t,e){this.prev[e]=t,this.next[t]=e}moveToTail(t){t!==this.tail&&(t===this.head?this.head=this.next[t]:this.connect(this.prev[t],this.next[t]),this.connect(this.tail,t),this.tail=t)}get del(){return c("del","delete"),this.delete}delete(t){let e=!1;if(0!==this.size){const i=this.keyMap.get(t);if(void 0!==i)if(e=!0,1===this.size)this.clear();else{this.removeItemSize(i);const e=this.valList[i];this.isBackgroundFetch(e)?e.__abortController.abort(new Error("deleted")):(this.dispose(e,t,"delete"),this.disposeAfter&&this.disposed.push([e,t,"delete"])),this.keyMap.delete(t),this.keyList[i]=null,this.valList[i]=null,i===this.tail?this.tail=this.prev[i]:i===this.head?this.head=this.next[i]:(this.next[this.prev[i]]=this.next[i],this.prev[this.next[i]]=this.prev[i]),this.size--,this.free.push(i)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return e}clear(){for(const t of this.rindexes({allowStale:!0})){const e=this.valList[t];if(this.isBackgroundFetch(e))e.__abortController.abort(new Error("deleted"));else{const i=this.keyList[t];this.dispose(e,i,"delete"),this.disposeAfter&&this.disposed.push([e,i,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return c("reset","clear"),this.clear}get length(){return((t,e)=>{const i=`LRU_CACHE_PROPERTY_${t}`;if(u(i)){const{prototype:e}=w,{get:s}=Object.getOwnPropertyDescriptor(e,t);p(i,`${t} property`,"cache.size",s)}})("length"),this.size}static get AbortController(){return h}static get AbortSignal(){return a}}const y=w}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODQyLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoibUlBQUEsTUFBTUEsRUFDbUIsaUJBQWhCQyxhQUNQQSxhQUMyQixtQkFBcEJBLFlBQVlDLElBQ2ZELFlBQ0FFLEtBUUFDLEVBTmdELG1CQUFwQkMsZ0JBTzlCQSxnQkFDQSxNQUNFQyxjQUNFQyxLQUFLQyxPQUFTLElBQUlDLENBQ3BCLENBQ0FDLE1BQU1DLEVBQVMsSUFBSUMsTUFBTSwrQkFDdkJMLEtBQUtDLE9BQU9HLE9BQVNKLEtBQUtDLE9BQU9HLFFBQVVBLEVBQzNDSixLQUFLQyxPQUFPSyxTQUFVLEVBQ3RCTixLQUFLQyxPQUFPTSxjQUFjLENBQ3hCQyxLQUFNLFFBQ05DLE9BQVFULEtBQUtDLFFBRWpCLEdBR0FTLEVBQXdDLG1CQUFoQkMsWUFFeEJDLEVBQTZDLG1CQUFuQmYsRUFBR2MsWUFDN0JULEVBQUtRLEVBQ1BDLFlBQ0FDLEVBQ0FmLEVBQUdDLGdCQUNILE1BQ0VDLGNBQ0VDLEtBQUtJLFlBQVNTLEVBQ2RiLEtBQUtNLFNBQVUsRUFDZk4sS0FBS2MsV0FBYSxFQUNwQixDQUNBUCxjQUFjUSxHQUNHLFVBQVhBLEVBQUVQLE9BQ0pSLEtBQUtNLFNBQVUsRUFDZk4sS0FBS2dCLFFBQVFELEdBQ2JmLEtBQUtjLFdBQVdHLFNBQVFDLEdBQUtBLEVBQUVILElBQUlmLE1BRXZDLENBQ0FnQixVQUFXLENBQ1hHLGlCQUFpQkMsRUFBSUMsR0FDUixVQUFQRCxHQUNGcEIsS0FBS2MsV0FBV1EsS0FBS0QsRUFFekIsQ0FDQUUsb0JBQW9CSCxFQUFJQyxHQUNYLFVBQVBELElBQ0ZwQixLQUFLYyxXQUFhZCxLQUFLYyxXQUFXVSxRQUFPTixHQUFLQSxJQUFNRyxJQUV4RCxHQUdBSSxFQUFTLElBQUlDLElBQ2JDLEVBQW1CLENBQUNDLEVBQUtDLEtBQzdCLE1BQU1DLEVBQU8sb0JBQW9CRixJQUM3QkcsRUFBV0QsSUFDYkUsRUFBS0YsRUFBTSxHQUFHRixXQUFjLFdBQVdDLElBQVdJLEVBQ3BELEVBRUlDLEVBQW1CLENBQUNDLEVBQVFOLEtBQ2hDLE1BQU1DLEVBQU8sb0JBQW9CSyxJQUNqQyxHQUFJSixFQUFXRCxHQUFPLENBQ3BCLE1BQU0sVUFBRU0sR0FBY0gsR0FDaEIsSUFBRUksR0FBUUMsT0FBT0MseUJBQXlCSCxFQUFXRCxHQUMzREgsRUFBS0YsRUFBTSxHQUFHSyxXQUFpQixTQUFTTixNQUFhUSxFQUN2RCxHQVdJRyxFQUFjLElBQUlDLEtBQ0gsaUJBQVpDLFNBQ1BBLFNBQytCLG1CQUF4QkEsUUFBUUYsWUFDWEUsUUFBUUYsZUFBZUMsR0FDdkJFLFFBQVFDLFNBQVNILEVBQUMsRUFHbEJWLEVBQWFELElBQVNMLEVBQU9vQixJQUFJZixHQUVqQ0UsRUFBTyxDQUFDRixFQUFNZ0IsRUFBTWpCLEVBQVNSLEtBQ2pDSSxFQUFPc0IsSUFBSWpCLEdBRVhVLEVBRFksT0FBT00sK0JBQWtDakIsYUFDcEMscUJBQXNCQyxFQUFNVCxFQUFFLEVBRzNDMkIsRUFBV0MsR0FBS0EsR0FBS0EsSUFBTUMsS0FBS0MsTUFBTUYsSUFBTUEsRUFBSSxHQUFLRyxTQUFTSCxHQVU5REksRUFBZUMsR0FDbEJOLEVBQVNNLEdBRU5BLEdBQU9KLEtBQUtLLElBQUksRUFBRyxHQUNuQkMsV0FDQUYsR0FBT0osS0FBS0ssSUFBSSxFQUFHLElBQ25CRSxZQUNBSCxHQUFPSixLQUFLSyxJQUFJLEVBQUcsSUFDbkJHLFlBQ0FKLEdBQU9LLE9BQU9DLGlCQUNkQyxFQUNBLEtBVEEsS0FXTixNQUFNQSxVQUFrQkMsTUFDdEIvRCxZQUFZZ0UsR0FDVkMsTUFBTUQsR0FDTi9ELEtBQUtpRSxLQUFLLEVBQ1osRUFHRixNQUFNQyxFQUNKbkUsWUFBWXVELEdBQ1YsR0FBWSxJQUFSQSxFQUNGLE1BQU8sR0FFVCxNQUFNYSxFQUFZZCxFQUFhQyxHQUMvQnRELEtBQUtvRSxLQUFPLElBQUlELEVBQVViLEdBQzFCdEQsS0FBS3FFLE9BQVMsQ0FDaEIsQ0FDQS9DLEtBQUsyQixHQUNIakQsS0FBS29FLEtBQUtwRSxLQUFLcUUsVUFBWXBCLENBQzdCLENBQ0FxQixNQUNFLE9BQU90RSxLQUFLb0UsT0FBT3BFLEtBQUtxRSxPQUMxQixFQUdGLE1BQU1wQyxFQUNKbEMsWUFBWXdFLEVBQVUsQ0FBQyxHQUNyQixNQUFNLElBQ0pqQixFQUFNLEVBQUMsSUFDUGtCLEVBQUcsY0FDSEMsRUFBZ0IsRUFBQyxhQUNqQkMsRUFBWSxlQUNaQyxFQUFjLGVBQ2RDLEVBQWMsV0FDZEMsRUFBVSxRQUNWQyxFQUFPLGFBQ1BDLEVBQVksZUFDWkMsRUFBYyxZQUNkQyxFQUFXLFFBQ1hDLEVBQVUsRUFBQyxhQUNYQyxFQUFlLEVBQUMsZ0JBQ2hCQyxFQUFlLFlBQ2ZDLEVBQVcsYUFDWEMsRUFBWSx5QkFDWkMsRUFBd0IsbUJBQ3hCQyxFQUFrQiwyQkFDbEJDLEVBQTBCLHVCQUMxQkMsRUFBc0IsaUJBQ3RCQyxHQUNFcEIsR0FJRSxPQUFFRixFQUFNLE9BQUV1QixFQUFNLE1BQUVDLEdBQ3RCdEIsYUFBbUJ0QyxFQUFXLENBQUMsRUFBSXNDLEVBRXJDLEdBQVksSUFBUmpCLElBQWNOLEVBQVNNLEdBQ3pCLE1BQU0sSUFBSXdDLFVBQVUsNENBR3RCLE1BQU0zQixFQUFZYixFQUFNRCxFQUFhQyxHQUFPUSxNQUM1QyxJQUFLSyxFQUNILE1BQU0sSUFBSTlELE1BQU0sc0JBQXdCaUQsR0FPMUMsR0FKQXRELEtBQUtzRCxJQUFNQSxFQUNYdEQsS0FBS2tGLFFBQVVBLEVBQ2ZsRixLQUFLbUYsYUFBZUEsR0FBZ0JuRixLQUFLa0YsUUFDekNsRixLQUFLb0YsZ0JBQWtCQSxHQUFtQmYsRUFDdENyRSxLQUFLb0YsZ0JBQWlCLENBQ3hCLElBQUtwRixLQUFLa0YsVUFBWWxGLEtBQUttRixhQUN6QixNQUFNLElBQUlXLFVBQ1Isc0VBR0osR0FBb0MsbUJBQXpCOUYsS0FBS29GLGdCQUNkLE1BQU0sSUFBSVUsVUFBVSxzQ0FFeEIsQ0FHQSxHQURBOUYsS0FBS3FGLFlBQWNBLEdBQWUsS0FDOUJyRixLQUFLcUYsYUFBMkMsbUJBQXJCckYsS0FBS3FGLFlBQ2xDLE1BQU0sSUFBSVMsVUFDUiwrQ0FLSixHQURBOUYsS0FBS3NGLGFBQWVBLEdBQ2Z0RixLQUFLcUYsa0JBQWdDeEUsSUFBakJ5RSxFQUN2QixNQUFNLElBQUlRLFVBQ1IsK0NBaUNKLEdBN0JBOUYsS0FBSytGLE9BQVMsSUFBSUMsSUFDbEJoRyxLQUFLaUcsUUFBVSxJQUFJbkMsTUFBTVIsR0FBS1csS0FBSyxNQUNuQ2pFLEtBQUtrRyxRQUFVLElBQUlwQyxNQUFNUixHQUFLVyxLQUFLLE1BQ25DakUsS0FBS21HLEtBQU8sSUFBSWhDLEVBQVViLEdBQzFCdEQsS0FBS29HLEtBQU8sSUFBSWpDLEVBQVViLEdBQzFCdEQsS0FBS3FHLEtBQU8sRUFDWnJHLEtBQUtzRyxLQUFPLEVBQ1p0RyxLQUFLdUcsS0FBTyxJQUFJckMsRUFBTVosR0FDdEJ0RCxLQUFLd0csWUFBYyxFQUNuQnhHLEtBQUsrRCxLQUFPLEVBRVcsbUJBQVplLElBQ1Q5RSxLQUFLOEUsUUFBVUEsR0FFVyxtQkFBakJDLEdBQ1QvRSxLQUFLK0UsYUFBZUEsRUFDcEIvRSxLQUFLeUcsU0FBVyxLQUVoQnpHLEtBQUsrRSxhQUFlLEtBQ3BCL0UsS0FBS3lHLFNBQVcsTUFFbEJ6RyxLQUFLZ0YsaUJBQW1CQSxFQUN4QmhGLEtBQUtpRixjQUFnQkEsRUFDckJqRixLQUFLdUYsMkJBQTZCQSxFQUNsQ3ZGLEtBQUt5Riw2QkFBK0JBLEVBQ3BDekYsS0FBSzBGLHlCQUEyQkEsRUFDaEMxRixLQUFLMkYsbUJBQXFCQSxFQUdBLElBQXRCM0YsS0FBS21GLGFBQW9CLENBQzNCLEdBQXFCLElBQWpCbkYsS0FBS2tGLFVBQ0ZsQyxFQUFTaEQsS0FBS2tGLFNBQ2pCLE1BQU0sSUFBSVksVUFDUixtREFJTixJQUFLOUMsRUFBU2hELEtBQUttRixjQUNqQixNQUFNLElBQUlXLFVBQ1Isd0RBR0o5RixLQUFLMEcsd0JBQ1AsQ0FZQSxHQVZBMUcsS0FBSzZFLGFBQWVBLEtBQWdCZ0IsRUFDcEM3RixLQUFLd0YscUJBQXVCQSxFQUM1QnhGLEtBQUsyRSxpQkFBbUJBLEVBQ3hCM0UsS0FBSzRFLGlCQUFtQkEsRUFDeEI1RSxLQUFLeUUsY0FDSHpCLEVBQVN5QixJQUFvQyxJQUFsQkEsRUFDdkJBLEVBQ0EsRUFDTnpFLEtBQUswRSxlQUFpQkEsRUFDdEIxRSxLQUFLd0UsSUFBTUEsR0FBT29CLEdBQVUsRUFDeEI1RixLQUFLd0UsSUFBSyxDQUNaLElBQUt4QixFQUFTaEQsS0FBS3dFLEtBQ2pCLE1BQU0sSUFBSXNCLFVBQ1IsK0NBR0o5RixLQUFLMkcsdUJBQ1AsQ0FHQSxHQUFpQixJQUFiM0csS0FBS3NELEtBQTBCLElBQWJ0RCxLQUFLd0UsS0FBOEIsSUFBakJ4RSxLQUFLa0YsUUFDM0MsTUFBTSxJQUFJWSxVQUNSLG9EQUdKLElBQUs5RixLQUFLMEUsZUFBaUIxRSxLQUFLc0QsTUFBUXRELEtBQUtrRixRQUFTLENBQ3BELE1BQU1wRCxFQUFPLHNCQUNUQyxFQUFXRCxLQUNiTCxFQUFPc0IsSUFBSWpCLEdBSVhVLEVBRkUsZ0dBRWUsd0JBQXlCVixFQUFNRyxHQUVwRCxDQUVJNEQsR0FDRmxFLEVBQWlCLFFBQVMsY0FFeEJpRSxHQUNGakUsRUFBaUIsU0FBVSxPQUV6QjBDLEdBQ0YxQyxFQUFpQixTQUFVLGtCQUUvQixDQUVBaUYsZ0JBQWdCQyxHQUNkLE9BQU83RyxLQUFLNkMsSUFBSWdFLEVBQUssQ0FBRWpDLGdCQUFnQixJQUFXa0MsSUFBVyxDQUMvRCxDQUVBSCx3QkFDRTNHLEtBQUsrRyxLQUFPLElBQUlsRCxFQUFVN0QsS0FBS3NELEtBQy9CdEQsS0FBS2dILE9BQVMsSUFBSW5ELEVBQVU3RCxLQUFLc0QsS0FFakN0RCxLQUFLaUgsV0FBYSxDQUFDQyxFQUFPMUMsRUFBSzJDLEVBQVExSCxFQUFLRSxTQUcxQyxHQUZBSyxLQUFLZ0gsT0FBT0UsR0FBaUIsSUFBUjFDLEVBQVkyQyxFQUFRLEVBQ3pDbkgsS0FBSytHLEtBQUtHLEdBQVMxQyxFQUNQLElBQVJBLEdBQWF4RSxLQUFLMEUsYUFBYyxDQUNsQyxNQUFNMEMsRUFBSUMsWUFBVyxLQUNmckgsS0FBS3NILFFBQVFKLElBQ2ZsSCxLQUFLdUgsT0FBT3ZILEtBQUtpRyxRQUFRaUIsR0FDM0IsR0FDQzFDLEVBQU0sR0FFTDRDLEVBQUVJLE9BQ0pKLEVBQUVJLE9BRU4sR0FHRnhILEtBQUt5SCxjQUFnQlAsSUFDbkJsSCxLQUFLZ0gsT0FBT0UsR0FBOEIsSUFBckJsSCxLQUFLK0csS0FBS0csR0FBZXpILEVBQUtFLE1BQVEsR0FHN0RLLEtBQUswSCxVQUFZLENBQUNDLEVBQVFULEtBQ3BCUyxJQUNGQSxFQUFPbkQsSUFBTXhFLEtBQUsrRyxLQUFLRyxHQUN2QlMsRUFBT1IsTUFBUW5ILEtBQUtnSCxPQUFPRSxHQUMzQlMsRUFBT2hJLElBQU1pSSxHQUFhQyxJQUMxQkYsRUFBT0csYUFBZUgsRUFBT2hJLElBQU1nSSxFQUFPbkQsSUFBTW1ELEVBQU9SLE1BQ3pELEVBS0YsSUFBSVMsRUFBWSxFQUNoQixNQUFNQyxFQUFTLEtBQ2IsTUFBTTVFLEVBQUl4RCxFQUFLRSxNQUNmLEdBQUlLLEtBQUt5RSxjQUFnQixFQUFHLENBQzFCbUQsRUFBWTNFLEVBQ1osTUFBTW1FLEVBQUlDLFlBQ1IsSUFBT08sRUFBWSxHQUNuQjVILEtBQUt5RSxlQUdIMkMsRUFBRUksT0FDSkosRUFBRUksT0FFTixDQUNBLE9BQU92RSxHQUdUakQsS0FBSzRHLGdCQUFrQkMsSUFDckIsTUFBTUssRUFBUWxILEtBQUsrRixPQUFPMUQsSUFBSXdFLEdBQzlCLFlBQWNoRyxJQUFWcUcsRUFDSyxFQUVtQixJQUFyQmxILEtBQUsrRyxLQUFLRyxJQUF1QyxJQUF2QmxILEtBQUtnSCxPQUFPRSxHQUN6Q0osSUFDQTlHLEtBQUtnSCxPQUFPRSxHQUNWbEgsS0FBSytHLEtBQUtHLElBQ1RVLEdBQWFDLElBQVEsRUFHOUI3SCxLQUFLc0gsUUFBVUosR0FFVSxJQUFyQmxILEtBQUsrRyxLQUFLRyxJQUNhLElBQXZCbEgsS0FBS2dILE9BQU9FLEtBQ1hVLEdBQWFDLEtBQVk3SCxLQUFLZ0gsT0FBT0UsR0FDcENsSCxLQUFLK0csS0FBS0csRUFHbEIsQ0FDQU8sY0FBY00sR0FBUyxDQUN2QkwsVUFBVU0sRUFBU0QsR0FBUyxDQUM1QmQsV0FBV2MsRUFBUUUsRUFBTUMsR0FBUyxDQUNsQ1osUUFBUVMsR0FDTixPQUFPLENBQ1QsQ0FFQXJCLHlCQUNFMUcsS0FBS21JLGVBQWlCLEVBQ3RCbkksS0FBS29JLE1BQVEsSUFBSXZFLEVBQVU3RCxLQUFLc0QsS0FDaEN0RCxLQUFLcUksZUFBaUJuQixJQUNwQmxILEtBQUttSSxnQkFBa0JuSSxLQUFLb0ksTUFBTWxCLEdBQ2xDbEgsS0FBS29JLE1BQU1sQixHQUFTLEdBRXRCbEgsS0FBS3NJLFlBQWMsQ0FBQ0MsRUFBR0MsRUFBR3pFLEVBQU1xQixLQUc5QixHQUFJcEYsS0FBS3lJLGtCQUFrQkQsR0FDekIsT0FBTyxFQUVULElBQUt4RixFQUFTZSxHQUFPLENBQ25CLElBQUlxQixFQVdGLE1BQU0sSUFBSVUsVUFDUiw2SEFYRixHQUErQixtQkFBcEJWLEVBQ1QsTUFBTSxJQUFJVSxVQUFVLHNDQUd0QixHQURBL0IsRUFBT3FCLEVBQWdCb0QsRUFBR0QsSUFDckJ2RixFQUFTZSxHQUNaLE1BQU0sSUFBSStCLFVBQ1IsMkRBVVIsQ0FDQSxPQUFPL0IsR0FFVC9ELEtBQUswSSxZQUFjLENBQUN4QixFQUFPbkQsRUFBTTRELEtBRS9CLEdBREEzSCxLQUFLb0ksTUFBTWxCLEdBQVNuRCxFQUNoQi9ELEtBQUtrRixRQUFTLENBQ2hCLE1BQU1BLEVBQVVsRixLQUFLa0YsUUFBVWxGLEtBQUtvSSxNQUFNbEIsR0FDMUMsS0FBT2xILEtBQUttSSxlQUFpQmpELEdBQzNCbEYsS0FBSzJJLE9BQU0sRUFFZixDQUNBM0ksS0FBS21JLGdCQUFrQm5JLEtBQUtvSSxNQUFNbEIsR0FDOUJTLElBQ0ZBLEVBQU9pQixVQUFZN0UsRUFDbkI0RCxFQUFPa0Isb0JBQXNCN0ksS0FBS21JLGVBQ3BDLENBRUosQ0FDQUUsZUFBZU4sR0FBUyxDQUN4QlcsWUFBWVgsRUFBUWUsR0FBUSxDQUM1QlIsWUFBWVMsRUFBSUMsRUFBSWpGLEVBQU1xQixHQUN4QixHQUFJckIsR0FBUXFCLEVBQ1YsTUFBTSxJQUFJVSxVQUNSLG1FQUdOLENBRUEsVUFBUyxXQUFFakIsRUFBYTdFLEtBQUs2RSxZQUFlLENBQUMsR0FDM0MsR0FBSTdFLEtBQUsrRCxLQUNQLElBQUssSUFBSWtGLEVBQUlqSixLQUFLc0csS0FDWHRHLEtBQUtrSixhQUFhRCxNQUduQnBFLEdBQWU3RSxLQUFLc0gsUUFBUTJCLFdBQ3hCQSxHQUVKQSxJQUFNakosS0FBS3FHLE9BR2I0QyxFQUFJakosS0FBS29HLEtBQUs2QyxFQUl0QixDQUVBLFdBQVUsV0FBRXBFLEVBQWE3RSxLQUFLNkUsWUFBZSxDQUFDLEdBQzVDLEdBQUk3RSxLQUFLK0QsS0FDUCxJQUFLLElBQUlrRixFQUFJakosS0FBS3FHLEtBQ1hyRyxLQUFLa0osYUFBYUQsTUFHbkJwRSxHQUFlN0UsS0FBS3NILFFBQVEyQixXQUN4QkEsR0FFSkEsSUFBTWpKLEtBQUtzRyxPQUdiMkMsRUFBSWpKLEtBQUttRyxLQUFLOEMsRUFJdEIsQ0FFQUMsYUFBYWhDLEdBQ1gsWUFDWXJHLElBQVZxRyxHQUNBbEgsS0FBSytGLE9BQU8xRCxJQUFJckMsS0FBS2lHLFFBQVFpQixNQUFZQSxDQUU3QyxDQUVBLFdBQ0UsSUFBSyxNQUFNK0IsS0FBS2pKLEtBQUttSixVQUNkbkosS0FBS3lJLGtCQUFrQnpJLEtBQUtrRyxRQUFRK0MsV0FDakMsQ0FBQ2pKLEtBQUtpRyxRQUFRZ0QsR0FBSWpKLEtBQUtrRyxRQUFRK0MsSUFHM0MsQ0FDQSxZQUNFLElBQUssTUFBTUEsS0FBS2pKLEtBQUtvSixXQUNkcEosS0FBS3lJLGtCQUFrQnpJLEtBQUtrRyxRQUFRK0MsV0FDakMsQ0FBQ2pKLEtBQUtpRyxRQUFRZ0QsR0FBSWpKLEtBQUtrRyxRQUFRK0MsSUFHM0MsQ0FFQSxRQUNFLElBQUssTUFBTUEsS0FBS2pKLEtBQUttSixVQUNkbkosS0FBS3lJLGtCQUFrQnpJLEtBQUtrRyxRQUFRK0MsWUFDakNqSixLQUFLaUcsUUFBUWdELEdBR3pCLENBQ0EsU0FDRSxJQUFLLE1BQU1BLEtBQUtqSixLQUFLb0osV0FDZHBKLEtBQUt5SSxrQkFBa0J6SSxLQUFLa0csUUFBUStDLFlBQ2pDakosS0FBS2lHLFFBQVFnRCxHQUd6QixDQUVBLFVBQ0UsSUFBSyxNQUFNQSxLQUFLakosS0FBS21KLFVBQ2RuSixLQUFLeUksa0JBQWtCekksS0FBS2tHLFFBQVErQyxZQUNqQ2pKLEtBQUtrRyxRQUFRK0MsR0FHekIsQ0FDQSxXQUNFLElBQUssTUFBTUEsS0FBS2pKLEtBQUtvSixXQUNkcEosS0FBS3lJLGtCQUFrQnpJLEtBQUtrRyxRQUFRK0MsWUFDakNqSixLQUFLa0csUUFBUStDLEdBR3pCLENBRUEsQ0FBQ0ksT0FBT0MsWUFDTixPQUFPdEosS0FBS3VKLFNBQ2QsQ0FFQUMsS0FBS25JLEVBQUlvSSxFQUFhLENBQUMsR0FDckIsSUFBSyxNQUFNUixLQUFLakosS0FBS21KLFVBQ25CLEdBQUk5SCxFQUFHckIsS0FBS2tHLFFBQVErQyxHQUFJakosS0FBS2lHLFFBQVFnRCxHQUFJakosTUFDdkMsT0FBT0EsS0FBS3FDLElBQUlyQyxLQUFLaUcsUUFBUWdELEdBQUlRLEVBR3ZDLENBRUF4SSxRQUFRSSxFQUFJcUksRUFBUTFKLE1BQ2xCLElBQUssTUFBTWlKLEtBQUtqSixLQUFLbUosVUFDbkI5SCxFQUFHc0ksS0FBS0QsRUFBTzFKLEtBQUtrRyxRQUFRK0MsR0FBSWpKLEtBQUtpRyxRQUFRZ0QsR0FBSWpKLEtBRXJELENBRUE0SixTQUFTdkksRUFBSXFJLEVBQVExSixNQUNuQixJQUFLLE1BQU1pSixLQUFLakosS0FBS29KLFdBQ25CL0gsRUFBR3NJLEtBQUtELEVBQU8xSixLQUFLa0csUUFBUStDLEdBQUlqSixLQUFLaUcsUUFBUWdELEdBQUlqSixLQUVyRCxDQUVJNkosWUFFRixPQURBM0gsRUFBaUIsUUFBUyxjQUNuQmxDLEtBQUs4SixVQUNkLENBRUFBLGFBQ0UsSUFBSUMsR0FBVSxFQUNkLElBQUssTUFBTWQsS0FBS2pKLEtBQUtvSixTQUFTLENBQUV2RSxZQUFZLElBQ3RDN0UsS0FBS3NILFFBQVEyQixLQUNmakosS0FBS3VILE9BQU92SCxLQUFLaUcsUUFBUWdELElBQ3pCYyxHQUFVLEdBR2QsT0FBT0EsQ0FDVCxDQUVBQyxPQUNFLE1BQU1DLEVBQU0sR0FDWixJQUFLLE1BQU1oQixLQUFLakosS0FBS21KLFFBQVEsQ0FBRXRFLFlBQVksSUFBUyxDQUNsRCxNQUFNZ0MsRUFBTTdHLEtBQUtpRyxRQUFRZ0QsR0FDbkJULEVBQUl4SSxLQUFLa0csUUFBUStDLEdBQ2pCaUIsRUFBUWxLLEtBQUt5SSxrQkFBa0JELEdBQ2pDQSxFQUFFMkIscUJBQ0YzQixFQUNKLFFBQWMzSCxJQUFWcUosRUFBcUIsU0FDekIsTUFBTUUsRUFBUSxDQUFFRixTQUNoQixHQUFJbEssS0FBSytHLEtBQU0sQ0FDYnFELEVBQU01RixJQUFNeEUsS0FBSytHLEtBQUtrQyxHQUd0QixNQUFNb0IsRUFBTTVLLEVBQUtFLE1BQVFLLEtBQUtnSCxPQUFPaUMsR0FDckNtQixFQUFNakQsTUFBUWpFLEtBQUtDLE1BQU12RCxLQUFLRCxNQUFRMEssRUFDeEMsQ0FDSXJLLEtBQUtvSSxRQUNQZ0MsRUFBTXJHLEtBQU8vRCxLQUFLb0ksTUFBTWEsSUFFMUJnQixFQUFJSyxRQUFRLENBQUN6RCxFQUFLdUQsR0FDcEIsQ0FDQSxPQUFPSCxDQUNULENBRUFNLEtBQUtOLEdBQ0hqSyxLQUFLd0ssUUFDTCxJQUFLLE1BQU8zRCxFQUFLdUQsS0FBVUgsRUFBSyxDQUM5QixHQUFJRyxFQUFNakQsTUFBTyxDQUlmLE1BQU1rRCxFQUFNekssS0FBS0QsTUFBUXlLLEVBQU1qRCxNQUMvQmlELEVBQU1qRCxNQUFRMUgsRUFBS0UsTUFBUTBLLENBQzdCLENBQ0FySyxLQUFLeUssSUFBSTVELEVBQUt1RCxFQUFNRixNQUFPRSxFQUM3QixDQUNGLENBRUF0RixRQUFRa0UsRUFBSUQsRUFBSTJCLEdBQVUsQ0FFMUJELElBQ0VsQyxFQUNBQyxHQUNBLElBQ0VoRSxFQUFNeEUsS0FBS3dFLElBQUcsTUFDZDJDLEVBQUssZUFDTG5DLEVBQWlCaEYsS0FBS2dGLGVBQWMsS0FDcENqQixFQUFPLEVBQUMsZ0JBQ1JxQixFQUFrQnBGLEtBQUtvRixnQkFBZSxZQUN0Q0gsRUFBY2pGLEtBQUtpRixZQUFXLE9BQzlCMEMsR0FDRSxDQUFDLEdBS0wsR0FIQTVELEVBQU8vRCxLQUFLc0ksWUFBWUMsRUFBR0MsRUFBR3pFLEVBQU1xQixHQUdoQ3BGLEtBQUttRixjQUFnQnBCLEVBQU8vRCxLQUFLbUYsYUFRbkMsT0FQSXdDLElBQ0ZBLEVBQU84QyxJQUFNLE9BQ2I5QyxFQUFPZ0Qsc0JBQXVCLEdBSWhDM0ssS0FBS3VILE9BQU9nQixHQUNMdkksS0FFVCxJQUFJa0gsRUFBc0IsSUFBZGxILEtBQUsrRCxVQUFhbEQsRUFBWWIsS0FBSytGLE9BQU8xRCxJQUFJa0csR0FDMUQsUUFBYzFILElBQVZxRyxFQUVGQSxFQUFRbEgsS0FBSzRLLFdBQ2I1SyxLQUFLaUcsUUFBUWlCLEdBQVNxQixFQUN0QnZJLEtBQUtrRyxRQUFRZ0IsR0FBU3NCLEVBQ3RCeEksS0FBSytGLE9BQU8wRSxJQUFJbEMsRUFBR3JCLEdBQ25CbEgsS0FBS21HLEtBQUtuRyxLQUFLc0csTUFBUVksRUFDdkJsSCxLQUFLb0csS0FBS2MsR0FBU2xILEtBQUtzRyxLQUN4QnRHLEtBQUtzRyxLQUFPWSxFQUNabEgsS0FBSytELE9BQ0wvRCxLQUFLMEksWUFBWXhCLEVBQU9uRCxFQUFNNEQsR0FDMUJBLElBQ0ZBLEVBQU84QyxJQUFNLE9BRWZ4RixHQUFjLE1BQ1QsQ0FFTGpGLEtBQUs2SyxXQUFXM0QsR0FDaEIsTUFBTTRELEVBQVM5SyxLQUFLa0csUUFBUWdCLEdBQzVCLEdBQUlzQixJQUFNc0MsR0FjUixHQWJJOUssS0FBS3lJLGtCQUFrQnFDLEdBQ3pCQSxFQUFPQyxrQkFBa0I1SyxNQUFNLElBQUlFLE1BQU0sYUFFcEMyRSxJQUNIaEYsS0FBSzhFLFFBQVFnRyxFQUFRdkMsRUFBRyxPQUNwQnZJLEtBQUsrRSxjQUNQL0UsS0FBS3lHLFNBQVNuRixLQUFLLENBQUN3SixFQUFRdkMsRUFBRyxTQUlyQ3ZJLEtBQUtxSSxlQUFlbkIsR0FDcEJsSCxLQUFLa0csUUFBUWdCLEdBQVNzQixFQUN0QnhJLEtBQUswSSxZQUFZeEIsRUFBT25ELEVBQU00RCxHQUMxQkEsRUFBUSxDQUNWQSxFQUFPOEMsSUFBTSxVQUNiLE1BQU1PLEVBQ0pGLEdBQVU5SyxLQUFLeUksa0JBQWtCcUMsR0FDN0JBLEVBQU9YLHFCQUNQVyxPQUNXakssSUFBYm1LLElBQXdCckQsRUFBT3FELFNBQVdBLEVBQ2hELE9BQ1NyRCxJQUNUQSxFQUFPOEMsSUFBTSxTQUVqQixDQVFBLEdBUFksSUFBUmpHLEdBQTBCLElBQWJ4RSxLQUFLd0UsS0FBY3hFLEtBQUsrRyxNQUN2Qy9HLEtBQUsyRyx3QkFFRjFCLEdBQ0hqRixLQUFLaUgsV0FBV0MsRUFBTzFDLEVBQUsyQyxHQUU5Qm5ILEtBQUswSCxVQUFVQyxFQUFRVCxHQUNuQmxILEtBQUsrRSxhQUNQLEtBQU8vRSxLQUFLeUcsU0FBU3BDLFFBQ25CckUsS0FBSytFLGdCQUFnQi9FLEtBQUt5RyxTQUFTd0UsU0FHdkMsT0FBT2pMLElBQ1QsQ0FFQTRLLFdBQ0UsT0FBa0IsSUFBZDVLLEtBQUsrRCxLQUNBL0QsS0FBS3NHLEtBRVZ0RyxLQUFLK0QsT0FBUy9ELEtBQUtzRCxLQUFvQixJQUFidEQsS0FBS3NELElBQzFCdEQsS0FBSzJJLE9BQU0sR0FFSyxJQUFyQjNJLEtBQUt1RyxLQUFLbEMsT0FDTHJFLEtBQUt1RyxLQUFLakMsTUFHWnRFLEtBQUt3RyxhQUNkLENBRUFsQyxNQUNFLEdBQUl0RSxLQUFLK0QsS0FBTSxDQUNiLE1BQU1tSCxFQUFNbEwsS0FBS2tHLFFBQVFsRyxLQUFLcUcsTUFFOUIsT0FEQXJHLEtBQUsySSxPQUFNLEdBQ0p1QyxDQUNULENBQ0YsQ0FFQXZDLE1BQU1wQyxHQUNKLE1BQU1GLEVBQU9yRyxLQUFLcUcsS0FDWmtDLEVBQUl2SSxLQUFLaUcsUUFBUUksR0FDakJtQyxFQUFJeEksS0FBS2tHLFFBQVFHLEdBbUJ2QixPQWxCSXJHLEtBQUt5SSxrQkFBa0JELEdBQ3pCQSxFQUFFdUMsa0JBQWtCNUssTUFBTSxJQUFJRSxNQUFNLGFBRXBDTCxLQUFLOEUsUUFBUTBELEVBQUdELEVBQUcsU0FDZnZJLEtBQUsrRSxjQUNQL0UsS0FBS3lHLFNBQVNuRixLQUFLLENBQUNrSCxFQUFHRCxFQUFHLFdBRzlCdkksS0FBS3FJLGVBQWVoQyxHQUVoQkUsSUFDRnZHLEtBQUtpRyxRQUFRSSxHQUFRLEtBQ3JCckcsS0FBS2tHLFFBQVFHLEdBQVEsS0FDckJyRyxLQUFLdUcsS0FBS2pGLEtBQUsrRSxJQUVqQnJHLEtBQUtxRyxLQUFPckcsS0FBS21HLEtBQUtFLEdBQ3RCckcsS0FBSytGLE9BQU93QixPQUFPZ0IsR0FDbkJ2SSxLQUFLK0QsT0FDRXNDLENBQ1QsQ0FFQXhELElBQUkwRixHQUFHLGVBQUUzRCxFQUFpQjVFLEtBQUs0RSxlQUFjLE9BQUUrQyxHQUFXLENBQUMsR0FDekQsTUFBTVQsRUFBUWxILEtBQUsrRixPQUFPMUQsSUFBSWtHLEdBQzlCLFFBQWMxSCxJQUFWcUcsRUFBcUIsQ0FDdkIsSUFBS2xILEtBQUtzSCxRQUFRSixHQU1oQixPQUxJdEMsR0FDRjVFLEtBQUt5SCxjQUFjUCxHQUVqQlMsSUFBUUEsRUFBTzlFLElBQU0sT0FDekI3QyxLQUFLMEgsVUFBVUMsRUFBUVQsSUFDaEIsRUFDRVMsSUFDVEEsRUFBTzlFLElBQU0sUUFDYjdDLEtBQUswSCxVQUFVQyxFQUFRVCxHQUUzQixNQUFXUyxJQUNUQSxFQUFPOUUsSUFBTSxRQUVmLE9BQU8sQ0FDVCxDQUdBc0ksS0FBSzVDLEdBQUcsV0FBRTFELEVBQWE3RSxLQUFLNkUsWUFBZSxDQUFDLEdBQzFDLE1BQU1xQyxFQUFRbEgsS0FBSytGLE9BQU8xRCxJQUFJa0csR0FDOUIsUUFBYzFILElBQVZxRyxJQUF3QnJDLElBQWU3RSxLQUFLc0gsUUFBUUosSUFBUyxDQUMvRCxNQUFNc0IsRUFBSXhJLEtBQUtrRyxRQUFRZ0IsR0FFdkIsT0FBT2xILEtBQUt5SSxrQkFBa0JELEdBQUtBLEVBQUUyQixxQkFBdUIzQixDQUM5RCxDQUNGLENBRUE0QyxnQkFBZ0I3QyxFQUFHckIsRUFBTzNDLEVBQVM4RyxHQUNqQyxNQUFNN0MsT0FBYzNILElBQVZxRyxPQUFzQnJHLEVBQVliLEtBQUtrRyxRQUFRZ0IsR0FDekQsR0FBSWxILEtBQUt5SSxrQkFBa0JELEdBQ3pCLE9BQU9BLEVBRVQsTUFBTThDLEVBQUssSUFBSXpMLEVBQ1gwRSxFQUFRdEUsUUFDVnNFLEVBQVF0RSxPQUFPa0IsaUJBQWlCLFNBQVMsSUFDdkNtSyxFQUFHbkwsTUFBTW9FLEVBQVF0RSxPQUFPRyxVQUc1QixNQUFNbUwsRUFBWSxDQUNoQnRMLE9BQVFxTCxFQUFHckwsT0FDWHNFLFVBQ0E4RyxXQUVJRyxFQUFLLENBQUNoRCxFQUFHaUQsR0FBYyxLQUMzQixNQUFNLFFBQUVuTCxHQUFZZ0wsRUFBR3JMLE9BQ2pCeUwsRUFBY25ILEVBQVFvQix1QkFBMEI5RSxJQUFOMkgsRUFVaEQsT0FUSWpFLEVBQVFvRCxTQUNOckgsSUFBWW1MLEdBQ2RsSCxFQUFRb0QsT0FBT2dFLGNBQWUsRUFDOUJwSCxFQUFRb0QsT0FBT2lFLFdBQWFOLEVBQUdyTCxPQUFPRyxPQUNsQ3NMLElBQWFuSCxFQUFRb0QsT0FBT2tFLG1CQUFvQixJQUVwRHRILEVBQVFvRCxPQUFPbUUsZUFBZ0IsSUFHL0J4TCxHQUFZb0wsR0FBZ0JELEdBSTVCekwsS0FBS2tHLFFBQVFnQixLQUFXNkUsU0FDaEJsTCxJQUFOMkgsRUFDRXVELEVBQUU1QixxQkFDSm5LLEtBQUtrRyxRQUFRZ0IsR0FBUzZFLEVBQUU1QixxQkFFeEJuSyxLQUFLdUgsT0FBT2dCLElBR1ZoRSxFQUFRb0QsU0FBUXBELEVBQVFvRCxPQUFPcUUsY0FBZSxHQUNsRGhNLEtBQUt5SyxJQUFJbEMsRUFBR0MsRUFBRytDLEVBQVVoSCxXQUd0QmlFLEdBZkV5RCxFQUFVWCxFQUFHckwsT0FBT0csT0FldEJvSSxFQVNIeUQsRUFBWUMsSUFDaEIsTUFBTSxRQUFFNUwsR0FBWWdMLEVBQUdyTCxPQUNqQmtNLEVBQ0o3TCxHQUFXaUUsRUFBUW1CLHVCQUNmYixFQUNKc0gsR0FBcUI1SCxFQUFRa0IsMkJBQ3pCMkcsRUFBV3ZILEdBQWNOLEVBQVFnQix5QkFldkMsR0FkSXZGLEtBQUtrRyxRQUFRZ0IsS0FBVzZFLElBR2JLLFFBQXVDdkwsSUFBM0JrTCxFQUFFNUIscUJBR2ZnQyxJQUtWbk0sS0FBS2tHLFFBQVFnQixHQUFTNkUsRUFBRTVCLHNCQU54Qm5LLEtBQUt1SCxPQUFPZ0IsSUFTWjFELEVBSUYsT0FISU4sRUFBUW9ELGFBQXFDOUcsSUFBM0JrTCxFQUFFNUIsdUJBQ3RCNUYsRUFBUW9ELE9BQU8wRSxlQUFnQixHQUUxQk4sRUFBRTVCLHFCQUNKLEdBQUk0QixFQUFFTyxhQUFlUCxFQUMxQixNQUFNRyxDQUNSLEVBb0JFM0gsRUFBUW9ELFNBQVFwRCxFQUFRb0QsT0FBTzRFLGlCQUFrQixHQUNyRCxNQUFNUixFQUFJLElBQUlTLFNBbkJBLENBQUNDLEVBQUtDLEtBQ2xCMU0sS0FBS3FGLFlBQVlrRCxFQUFHQyxFQUFHK0MsR0FBV29CLE1BQUtuRSxHQUFLaUUsRUFBSWpFLElBQUlrRSxHQUlwRHBCLEVBQUdyTCxPQUFPa0IsaUJBQWlCLFNBQVMsS0FFL0JvRCxFQUFRb0IsbUJBQ1RwQixFQUFRbUIseUJBRVIrRyxJQUVJbEksRUFBUW1CLHlCQUNWK0csRUFBTWpFLEdBQUtnRCxFQUFHaEQsR0FBRyxJQUVyQixHQUNELElBRzBCbUUsS0FBS25CLEdBeER2QlUsSUFDTDNILEVBQVFvRCxTQUNWcEQsRUFBUW9ELE9BQU9pRixlQUFnQixFQUMvQnJJLEVBQVFvRCxPQUFPaUUsV0FBYU0sR0FFdkJELEVBQVVDLE1BOERuQixPQVZBSCxFQUFFaEIsa0JBQW9CTyxFQUN0QlMsRUFBRTVCLHFCQUF1QjNCLEVBQ3pCdUQsRUFBRU8sV0FBYSxVQUNEekwsSUFBVnFHLEdBRUZsSCxLQUFLeUssSUFBSWxDLEVBQUd3RCxFQUFHLElBQUtSLEVBQVVoSCxRQUFTb0QsWUFBUTlHLElBQy9DcUcsRUFBUWxILEtBQUsrRixPQUFPMUQsSUFBSWtHLElBRXhCdkksS0FBS2tHLFFBQVFnQixHQUFTNkUsRUFFakJBLENBQ1QsQ0FFQXRELGtCQUFrQnNELEdBQ2hCLE9BQ0VBLEdBQ2EsaUJBQU5BLEdBQ1csbUJBQVhBLEVBQUVZLE1BQ1RySyxPQUFPRixVQUFVeUssZUFBZWxELEtBQzlCb0MsRUFDQSx5QkFFRnpKLE9BQU9GLFVBQVV5SyxlQUFlbEQsS0FBS29DLEVBQUcsZ0JBQ3ZDQSxFQUFFTyxhQUFlUCxHQUFzQixPQUFqQkEsRUFBRU8sV0FFN0IsQ0FHQVEsWUFDRXZFLEdBQ0EsV0FFRTFELEVBQWE3RSxLQUFLNkUsV0FBVSxlQUM1QkYsRUFBaUIzRSxLQUFLMkUsZUFBYyxtQkFDcENhLEVBQXFCeEYsS0FBS3dGLG1CQUFrQixJQUU1Q2hCLEVBQU14RSxLQUFLd0UsSUFBRyxlQUNkUSxFQUFpQmhGLEtBQUtnRixlQUFjLEtBQ3BDakIsRUFBTyxFQUFDLGdCQUNScUIsRUFBa0JwRixLQUFLb0YsZ0JBQWUsWUFDdENILEVBQWNqRixLQUFLaUYsWUFBVyx5QkFFOUJNLEVBQTJCdkYsS0FBS3VGLHlCQUF3QiwyQkFDeERFLEVBQTZCekYsS0FBS3lGLDJCQUEwQixpQkFDNURFLEVBQW1CM0YsS0FBSzJGLGlCQUFnQix1QkFDeENELEVBQXlCMUYsS0FBSzBGLHVCQUFzQixhQUNwREosRUFBZXRGLEtBQUtzRixhQUFZLGFBQ2hDeUgsR0FBZSxFQUFLLE9BQ3BCcEYsRUFBTSxPQUNOMUgsR0FDRSxDQUFDLEdBRUwsSUFBS0QsS0FBS3FGLFlBRVIsT0FESXNDLElBQVFBLEVBQU9xRixNQUFRLE9BQ3BCaE4sS0FBS3FDLElBQUlrRyxFQUFHLENBQ2pCMUQsYUFDQUYsaUJBQ0FhLHFCQUNBbUMsV0FJSixNQUFNcEQsRUFBVSxDQUNkTSxhQUNBRixpQkFDQWEscUJBQ0FoQixNQUNBUSxpQkFDQWpCLE9BQ0FxQixrQkFDQUgsY0FDQU0sMkJBQ0FFLDZCQUNBQyx5QkFDQUMsbUJBQ0FnQyxTQUNBMUgsVUFHRixJQUFJaUgsRUFBUWxILEtBQUsrRixPQUFPMUQsSUFBSWtHLEdBQzVCLFFBQWMxSCxJQUFWcUcsRUFBcUIsQ0FDbkJTLElBQVFBLEVBQU9xRixNQUFRLFFBQzNCLE1BQU1qQixFQUFJL0wsS0FBS29MLGdCQUFnQjdDLEVBQUdyQixFQUFPM0MsRUFBU2UsR0FDbEQsT0FBUXlHLEVBQUVPLFdBQWFQLENBQ3pCLENBQU8sQ0FFTCxNQUFNdkQsRUFBSXhJLEtBQUtrRyxRQUFRZ0IsR0FDdkIsR0FBSWxILEtBQUt5SSxrQkFBa0JELEdBQUksQ0FDN0IsTUFBTTNDLEVBQ0poQixRQUF5Q2hFLElBQTNCMkgsRUFBRTJCLHFCQUtsQixPQUpJeEMsSUFDRkEsRUFBT3FGLE1BQVEsV0FDWG5ILElBQU84QixFQUFPMEUsZUFBZ0IsSUFFN0J4RyxFQUFRMkMsRUFBRTJCLHFCQUF3QjNCLEVBQUU4RCxXQUFhOUQsQ0FDMUQsQ0FJQSxNQUFNbEIsRUFBVXRILEtBQUtzSCxRQUFRSixHQUM3QixJQUFLNkYsSUFBaUJ6RixFQU9wQixPQU5JSyxJQUFRQSxFQUFPcUYsTUFBUSxPQUMzQmhOLEtBQUs2SyxXQUFXM0QsR0FDWnZDLEdBQ0YzRSxLQUFLeUgsY0FBY1AsR0FFckJsSCxLQUFLMEgsVUFBVUMsRUFBUVQsR0FDaEJzQixFQUtULE1BQU11RCxFQUFJL0wsS0FBS29MLGdCQUFnQjdDLEVBQUdyQixFQUFPM0MsRUFBU2UsR0FDNUMySCxPQUFzQ3BNLElBQTNCa0wsRUFBRTVCLHFCQUNiK0MsRUFBV0QsR0FBWXBJLEVBSzdCLE9BSkk4QyxJQUNGQSxFQUFPcUYsTUFBUUMsR0FBWTNGLEVBQVUsUUFBVSxVQUMzQzRGLEdBQVk1RixJQUFTSyxFQUFPMEUsZUFBZ0IsSUFFM0NhLEVBQVduQixFQUFFNUIscUJBQXdCNEIsRUFBRU8sV0FBYVAsQ0FDN0QsQ0FDRixDQUVBMUosSUFDRWtHLEdBQ0EsV0FDRTFELEVBQWE3RSxLQUFLNkUsV0FBVSxlQUM1QkYsRUFBaUIzRSxLQUFLMkUsZUFBYyxtQkFDcENhLEVBQXFCeEYsS0FBS3dGLG1CQUFrQixPQUM1Q21DLEdBQ0UsQ0FBQyxHQUVMLE1BQU1ULEVBQVFsSCxLQUFLK0YsT0FBTzFELElBQUlrRyxHQUM5QixRQUFjMUgsSUFBVnFHLEVBQXFCLENBQ3ZCLE1BQU1nRCxFQUFRbEssS0FBS2tHLFFBQVFnQixHQUNyQmlHLEVBQVduTixLQUFLeUksa0JBQWtCeUIsR0FFeEMsT0FEQWxLLEtBQUswSCxVQUFVQyxFQUFRVCxHQUNuQmxILEtBQUtzSCxRQUFRSixJQUNYUyxJQUFRQSxFQUFPdEYsSUFBTSxTQUVwQjhLLEdBT0N4RixJQUNGQSxFQUFPMEUsY0FDTHhILFFBQTZDaEUsSUFBL0JxSixFQUFNQyxzQkFFakJ0RixFQUFhcUYsRUFBTUMsMEJBQXVCdEosSUFWNUMyRSxHQUNIeEYsS0FBS3VILE9BQU9nQixHQUVWWixJQUFRQSxFQUFPMEUsY0FBZ0J4SCxHQUM1QkEsRUFBYXFGLE9BQVFySixLQVMxQjhHLElBQVFBLEVBQU90RixJQUFNLE9BTXJCOEssRUFDS2pELEVBQU1DLHNCQUVmbkssS0FBSzZLLFdBQVczRCxHQUNadkMsR0FDRjNFLEtBQUt5SCxjQUFjUCxHQUVkZ0QsR0FFWCxDQUFXdkMsSUFDVEEsRUFBT3RGLElBQU0sT0FFakIsQ0FFQStLLFFBQVFyQixFQUFHOUksR0FDVGpELEtBQUtvRyxLQUFLbkQsR0FBSzhJLEVBQ2YvTCxLQUFLbUcsS0FBSzRGLEdBQUs5SSxDQUNqQixDQUVBNEgsV0FBVzNELEdBU0xBLElBQVVsSCxLQUFLc0csT0FDYlksSUFBVWxILEtBQUtxRyxLQUNqQnJHLEtBQUtxRyxLQUFPckcsS0FBS21HLEtBQUtlLEdBRXRCbEgsS0FBS29OLFFBQVFwTixLQUFLb0csS0FBS2MsR0FBUWxILEtBQUttRyxLQUFLZSxJQUUzQ2xILEtBQUtvTixRQUFRcE4sS0FBS3NHLEtBQU1ZLEdBQ3hCbEgsS0FBS3NHLEtBQU9ZLEVBRWhCLENBRUltRyxVQUVGLE9BREFuTCxFQUFpQixNQUFPLFVBQ2pCbEMsS0FBS3VILE1BQ2QsQ0FFQUEsT0FBT2dCLEdBQ0wsSUFBSXdCLEdBQVUsRUFDZCxHQUFrQixJQUFkL0osS0FBSytELEtBQVksQ0FDbkIsTUFBTW1ELEVBQVFsSCxLQUFLK0YsT0FBTzFELElBQUlrRyxHQUM5QixRQUFjMUgsSUFBVnFHLEVBRUYsR0FEQTZDLEdBQVUsRUFDUSxJQUFkL0osS0FBSytELEtBQ1AvRCxLQUFLd0ssWUFDQSxDQUNMeEssS0FBS3FJLGVBQWVuQixHQUNwQixNQUFNc0IsRUFBSXhJLEtBQUtrRyxRQUFRZ0IsR0FDbkJsSCxLQUFLeUksa0JBQWtCRCxHQUN6QkEsRUFBRXVDLGtCQUFrQjVLLE1BQU0sSUFBSUUsTUFBTSxhQUVwQ0wsS0FBSzhFLFFBQVEwRCxFQUFHRCxFQUFHLFVBQ2Z2SSxLQUFLK0UsY0FDUC9FLEtBQUt5RyxTQUFTbkYsS0FBSyxDQUFDa0gsRUFBR0QsRUFBRyxZQUc5QnZJLEtBQUsrRixPQUFPd0IsT0FBT2dCLEdBQ25CdkksS0FBS2lHLFFBQVFpQixHQUFTLEtBQ3RCbEgsS0FBS2tHLFFBQVFnQixHQUFTLEtBQ2xCQSxJQUFVbEgsS0FBS3NHLEtBQ2pCdEcsS0FBS3NHLEtBQU90RyxLQUFLb0csS0FBS2MsR0FDYkEsSUFBVWxILEtBQUtxRyxLQUN4QnJHLEtBQUtxRyxLQUFPckcsS0FBS21HLEtBQUtlLElBRXRCbEgsS0FBS21HLEtBQUtuRyxLQUFLb0csS0FBS2MsSUFBVWxILEtBQUttRyxLQUFLZSxHQUN4Q2xILEtBQUtvRyxLQUFLcEcsS0FBS21HLEtBQUtlLElBQVVsSCxLQUFLb0csS0FBS2MsSUFFMUNsSCxLQUFLK0QsT0FDTC9ELEtBQUt1RyxLQUFLakYsS0FBSzRGLEVBQ2pCLENBRUosQ0FDQSxHQUFJbEgsS0FBS3lHLFNBQ1AsS0FBT3pHLEtBQUt5RyxTQUFTcEMsUUFDbkJyRSxLQUFLK0UsZ0JBQWdCL0UsS0FBS3lHLFNBQVN3RSxTQUd2QyxPQUFPbEIsQ0FDVCxDQUVBUyxRQUNFLElBQUssTUFBTXRELEtBQVNsSCxLQUFLb0osU0FBUyxDQUFFdkUsWUFBWSxJQUFTLENBQ3ZELE1BQU0yRCxFQUFJeEksS0FBS2tHLFFBQVFnQixHQUN2QixHQUFJbEgsS0FBS3lJLGtCQUFrQkQsR0FDekJBLEVBQUV1QyxrQkFBa0I1SyxNQUFNLElBQUlFLE1BQU0sZ0JBQy9CLENBQ0wsTUFBTWtJLEVBQUl2SSxLQUFLaUcsUUFBUWlCLEdBQ3ZCbEgsS0FBSzhFLFFBQVEwRCxFQUFHRCxFQUFHLFVBQ2Z2SSxLQUFLK0UsY0FDUC9FLEtBQUt5RyxTQUFTbkYsS0FBSyxDQUFDa0gsRUFBR0QsRUFBRyxVQUU5QixDQUNGLENBa0JBLEdBaEJBdkksS0FBSytGLE9BQU95RSxRQUNaeEssS0FBS2tHLFFBQVFqQyxLQUFLLE1BQ2xCakUsS0FBS2lHLFFBQVFoQyxLQUFLLE1BQ2RqRSxLQUFLK0csT0FDUC9HLEtBQUsrRyxLQUFLOUMsS0FBSyxHQUNmakUsS0FBS2dILE9BQU8vQyxLQUFLLElBRWZqRSxLQUFLb0ksT0FDUHBJLEtBQUtvSSxNQUFNbkUsS0FBSyxHQUVsQmpFLEtBQUtxRyxLQUFPLEVBQ1pyRyxLQUFLc0csS0FBTyxFQUNadEcsS0FBS3dHLFlBQWMsRUFDbkJ4RyxLQUFLdUcsS0FBS2xDLE9BQVMsRUFDbkJyRSxLQUFLbUksZUFBaUIsRUFDdEJuSSxLQUFLK0QsS0FBTyxFQUNSL0QsS0FBS3lHLFNBQ1AsS0FBT3pHLEtBQUt5RyxTQUFTcEMsUUFDbkJyRSxLQUFLK0UsZ0JBQWdCL0UsS0FBS3lHLFNBQVN3RSxRQUd6QyxDQUVJcUMsWUFFRixPQURBcEwsRUFBaUIsUUFBUyxTQUNuQmxDLEtBQUt3SyxLQUNkLENBRUluRyxhQUVGLE1BL2tDdUIsRUFBQ2tKLEVBQU8xTCxLQUNqQyxNQUFNQyxFQUFPLHNCQUFzQnlMLElBQ25DLEdBQUl4TCxFQUFXRCxHQUFPLENBQ3BCLE1BQU0sVUFBRU0sR0FBY0gsR0FDaEIsSUFBRUksR0FBUUMsT0FBT0MseUJBQXlCSCxFQUFXbUwsR0FDM0R2TCxFQUFLRixFQUFNLEdBQUd5TCxhQUFrQixhQUFvQmxMLEVBQ3RELEdBd2tDRW1MLENBQW1CLFVBQ1p4TixLQUFLK0QsSUFDZCxDQUVXakUsNkJBQ1QsT0FBT0QsQ0FDVCxDQUNXYyx5QkFDVCxPQUFPVCxDQUNULEVBR0YsUyIsInNvdXJjZXMiOlsid2VicGFjazovL3NxbGl0ZS13YXNtLWh0dHAvLi9ub2RlX21vZHVsZXMvbHJ1LWNhY2hlL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwZXJmID1cbiAgdHlwZW9mIHBlcmZvcm1hbmNlID09PSAnb2JqZWN0JyAmJlxuICBwZXJmb3JtYW5jZSAmJlxuICB0eXBlb2YgcGVyZm9ybWFuY2Uubm93ID09PSAnZnVuY3Rpb24nXG4gICAgPyBwZXJmb3JtYW5jZVxuICAgIDogRGF0ZVxuXG5jb25zdCBoYXNBYm9ydENvbnRyb2xsZXIgPSB0eXBlb2YgQWJvcnRDb250cm9sbGVyID09PSAnZnVuY3Rpb24nXG5cbi8vIG1pbmltYWwgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgcG9seWZpbGxcbi8vIHRoaXMgZG9lc24ndCBoYXZlIG5lYXJseSBhbGwgdGhlIGNoZWNrcyBhbmQgd2hhdG5vdCB0aGF0XG4vLyBhY3R1YWwgQWJvcnRDb250cm9sbGVyL1NpZ25hbCBoYXMsIGJ1dCBpdCdzIGVub3VnaCBmb3Jcbi8vIG91ciBwdXJwb3NlcywgYW5kIGlmIHVzZWQgcHJvcGVybHksIGJlaGF2ZXMgdGhlIHNhbWUuXG5jb25zdCBBQyA9IGhhc0Fib3J0Q29udHJvbGxlclxuICA/IEFib3J0Q29udHJvbGxlclxuICA6IGNsYXNzIEFib3J0Q29udHJvbGxlciB7XG4gICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaWduYWwgPSBuZXcgQVMoKVxuICAgICAgfVxuICAgICAgYWJvcnQocmVhc29uID0gbmV3IEVycm9yKCdUaGlzIG9wZXJhdGlvbiB3YXMgYWJvcnRlZCcpKSB7XG4gICAgICAgIHRoaXMuc2lnbmFsLnJlYXNvbiA9IHRoaXMuc2lnbmFsLnJlYXNvbiB8fCByZWFzb25cbiAgICAgICAgdGhpcy5zaWduYWwuYWJvcnRlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zaWduYWwuZGlzcGF0Y2hFdmVudCh7XG4gICAgICAgICAgdHlwZTogJ2Fib3J0JyxcbiAgICAgICAgICB0YXJnZXQ6IHRoaXMuc2lnbmFsLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuY29uc3QgaGFzQWJvcnRTaWduYWwgPSB0eXBlb2YgQWJvcnRTaWduYWwgPT09ICdmdW5jdGlvbidcbi8vIFNvbWUgcG9seWZpbGxzIHB1dCB0aGlzIG9uIHRoZSBBQyBjbGFzcywgbm90IGdsb2JhbFxuY29uc3QgaGFzQUNBYm9ydFNpZ25hbCA9IHR5cGVvZiBBQy5BYm9ydFNpZ25hbCA9PT0gJ2Z1bmN0aW9uJ1xuY29uc3QgQVMgPSBoYXNBYm9ydFNpZ25hbFxuICA/IEFib3J0U2lnbmFsXG4gIDogaGFzQUNBYm9ydFNpZ25hbFxuICA/IEFDLkFib3J0Q29udHJvbGxlclxuICA6IGNsYXNzIEFib3J0U2lnbmFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJlYXNvbiA9IHVuZGVmaW5lZFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZVxuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXVxuICAgICAgfVxuICAgICAgZGlzcGF0Y2hFdmVudChlKSB7XG4gICAgICAgIGlmIChlLnR5cGUgPT09ICdhYm9ydCcpIHtcbiAgICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5vbmFib3J0KGUpXG4gICAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goZiA9PiBmKGUpLCB0aGlzKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBvbmFib3J0KCkge31cbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZXYsIGZuKSB7XG4gICAgICAgIGlmIChldiA9PT0gJ2Fib3J0Jykge1xuICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGZuKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyKGV2LCBmbikge1xuICAgICAgICBpZiAoZXYgPT09ICdhYm9ydCcpIHtcbiAgICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMuZmlsdGVyKGYgPT4gZiAhPT0gZm4pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbmNvbnN0IHdhcm5lZCA9IG5ldyBTZXQoKVxuY29uc3QgZGVwcmVjYXRlZE9wdGlvbiA9IChvcHQsIGluc3RlYWQpID0+IHtcbiAgY29uc3QgY29kZSA9IGBMUlVfQ0FDSEVfT1BUSU9OXyR7b3B0fWBcbiAgaWYgKHNob3VsZFdhcm4oY29kZSkpIHtcbiAgICB3YXJuKGNvZGUsIGAke29wdH0gb3B0aW9uYCwgYG9wdGlvbnMuJHtpbnN0ZWFkfWAsIExSVUNhY2hlKVxuICB9XG59XG5jb25zdCBkZXByZWNhdGVkTWV0aG9kID0gKG1ldGhvZCwgaW5zdGVhZCkgPT4ge1xuICBjb25zdCBjb2RlID0gYExSVV9DQUNIRV9NRVRIT0RfJHttZXRob2R9YFxuICBpZiAoc2hvdWxkV2Fybihjb2RlKSkge1xuICAgIGNvbnN0IHsgcHJvdG90eXBlIH0gPSBMUlVDYWNoZVxuICAgIGNvbnN0IHsgZ2V0IH0gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvdHlwZSwgbWV0aG9kKVxuICAgIHdhcm4oY29kZSwgYCR7bWV0aG9kfSBtZXRob2RgLCBgY2FjaGUuJHtpbnN0ZWFkfSgpYCwgZ2V0KVxuICB9XG59XG5jb25zdCBkZXByZWNhdGVkUHJvcGVydHkgPSAoZmllbGQsIGluc3RlYWQpID0+IHtcbiAgY29uc3QgY29kZSA9IGBMUlVfQ0FDSEVfUFJPUEVSVFlfJHtmaWVsZH1gXG4gIGlmIChzaG91bGRXYXJuKGNvZGUpKSB7XG4gICAgY29uc3QgeyBwcm90b3R5cGUgfSA9IExSVUNhY2hlXG4gICAgY29uc3QgeyBnZXQgfSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocHJvdG90eXBlLCBmaWVsZClcbiAgICB3YXJuKGNvZGUsIGAke2ZpZWxkfSBwcm9wZXJ0eWAsIGBjYWNoZS4ke2luc3RlYWR9YCwgZ2V0KVxuICB9XG59XG5cbmNvbnN0IGVtaXRXYXJuaW5nID0gKC4uLmEpID0+IHtcbiAgdHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnICYmXG4gIHByb2Nlc3MgJiZcbiAgdHlwZW9mIHByb2Nlc3MuZW1pdFdhcm5pbmcgPT09ICdmdW5jdGlvbidcbiAgICA/IHByb2Nlc3MuZW1pdFdhcm5pbmcoLi4uYSlcbiAgICA6IGNvbnNvbGUuZXJyb3IoLi4uYSlcbn1cblxuY29uc3Qgc2hvdWxkV2FybiA9IGNvZGUgPT4gIXdhcm5lZC5oYXMoY29kZSlcblxuY29uc3Qgd2FybiA9IChjb2RlLCB3aGF0LCBpbnN0ZWFkLCBmbikgPT4ge1xuICB3YXJuZWQuYWRkKGNvZGUpXG4gIGNvbnN0IG1zZyA9IGBUaGUgJHt3aGF0fSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlICR7aW5zdGVhZH0gaW5zdGVhZC5gXG4gIGVtaXRXYXJuaW5nKG1zZywgJ0RlcHJlY2F0aW9uV2FybmluZycsIGNvZGUsIGZuKVxufVxuXG5jb25zdCBpc1Bvc0ludCA9IG4gPT4gbiAmJiBuID09PSBNYXRoLmZsb29yKG4pICYmIG4gPiAwICYmIGlzRmluaXRlKG4pXG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0IC0gVGhpcyBpcyBhIGxpdHRsZSBiaXQgcmlkaWN1bG91cywgdGJoLlxuICogVGhlIG1heGltdW0gYXJyYXkgbGVuZ3RoIGlzIDJeMzItMSBvciB0aGVyZWFib3V0cyBvbiBtb3N0IEpTIGltcGxzLlxuICogQW5kIHdlbGwgYmVmb3JlIHRoYXQgcG9pbnQsIHlvdSdyZSBjYWNoaW5nIHRoZSBlbnRpcmUgd29ybGQsIEkgbWVhbixcbiAqIHRoYXQncyB+MzJHQiBvZiBqdXN0IGludGVnZXJzIGZvciB0aGUgbmV4dC9wcmV2IGxpbmtzLCBwbHVzIHdoYXRldmVyXG4gKiBlbHNlIHRvIGhvbGQgdGhhdCBtYW55IGtleXMgYW5kIHZhbHVlcy4gIEp1c3QgZmlsbGluZyB0aGUgbWVtb3J5IHdpdGhcbiAqIHplcm9lcyBhdCBpbml0IHRpbWUgaXMgYnJ1dGFsIHdoZW4geW91IGdldCB0aGF0IGJpZy5cbiAqIEJ1dCB3aHkgbm90IGJlIGNvbXBsZXRlP1xuICogTWF5YmUgaW4gdGhlIGZ1dHVyZSwgdGhlc2UgbGltaXRzIHdpbGwgaGF2ZSBleHBhbmRlZC4gKi9cbmNvbnN0IGdldFVpbnRBcnJheSA9IG1heCA9PlxuICAhaXNQb3NJbnQobWF4KVxuICAgID8gbnVsbFxuICAgIDogbWF4IDw9IE1hdGgucG93KDIsIDgpXG4gICAgPyBVaW50OEFycmF5XG4gICAgOiBtYXggPD0gTWF0aC5wb3coMiwgMTYpXG4gICAgPyBVaW50MTZBcnJheVxuICAgIDogbWF4IDw9IE1hdGgucG93KDIsIDMyKVxuICAgID8gVWludDMyQXJyYXlcbiAgICA6IG1heCA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlxuICAgID8gWmVyb0FycmF5XG4gICAgOiBudWxsXG5cbmNsYXNzIFplcm9BcnJheSBleHRlbmRzIEFycmF5IHtcbiAgY29uc3RydWN0b3Ioc2l6ZSkge1xuICAgIHN1cGVyKHNpemUpXG4gICAgdGhpcy5maWxsKDApXG4gIH1cbn1cblxuY2xhc3MgU3RhY2sge1xuICBjb25zdHJ1Y3RvcihtYXgpIHtcbiAgICBpZiAobWF4ID09PSAwKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgVWludEFycmF5ID0gZ2V0VWludEFycmF5KG1heClcbiAgICB0aGlzLmhlYXAgPSBuZXcgVWludEFycmF5KG1heClcbiAgICB0aGlzLmxlbmd0aCA9IDBcbiAgfVxuICBwdXNoKG4pIHtcbiAgICB0aGlzLmhlYXBbdGhpcy5sZW5ndGgrK10gPSBuXG4gIH1cbiAgcG9wKCkge1xuICAgIHJldHVybiB0aGlzLmhlYXBbLS10aGlzLmxlbmd0aF1cbiAgfVxufVxuXG5jbGFzcyBMUlVDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHtcbiAgICAgIG1heCA9IDAsXG4gICAgICB0dGwsXG4gICAgICB0dGxSZXNvbHV0aW9uID0gMSxcbiAgICAgIHR0bEF1dG9wdXJnZSxcbiAgICAgIHVwZGF0ZUFnZU9uR2V0LFxuICAgICAgdXBkYXRlQWdlT25IYXMsXG4gICAgICBhbGxvd1N0YWxlLFxuICAgICAgZGlzcG9zZSxcbiAgICAgIGRpc3Bvc2VBZnRlcixcbiAgICAgIG5vRGlzcG9zZU9uU2V0LFxuICAgICAgbm9VcGRhdGVUVEwsXG4gICAgICBtYXhTaXplID0gMCxcbiAgICAgIG1heEVudHJ5U2l6ZSA9IDAsXG4gICAgICBzaXplQ2FsY3VsYXRpb24sXG4gICAgICBmZXRjaE1ldGhvZCxcbiAgICAgIGZldGNoQ29udGV4dCxcbiAgICAgIG5vRGVsZXRlT25GZXRjaFJlamVjdGlvbixcbiAgICAgIG5vRGVsZXRlT25TdGFsZUdldCxcbiAgICAgIGFsbG93U3RhbGVPbkZldGNoUmVqZWN0aW9uLFxuICAgICAgYWxsb3dTdGFsZU9uRmV0Y2hBYm9ydCxcbiAgICAgIGlnbm9yZUZldGNoQWJvcnQsXG4gICAgfSA9IG9wdGlvbnNcblxuICAgIC8vIGRlcHJlY2F0ZWQgb3B0aW9ucywgZG9uJ3QgdHJpZ2dlciBhIHdhcm5pbmcgZm9yIGdldHRpbmcgdGhlbSBpZlxuICAgIC8vIHRoZSB0aGluZyBiZWluZyBwYXNzZWQgaW4gaXMgYW5vdGhlciBMUlVDYWNoZSB3ZSdyZSBjb3B5aW5nLlxuICAgIGNvbnN0IHsgbGVuZ3RoLCBtYXhBZ2UsIHN0YWxlIH0gPVxuICAgICAgb3B0aW9ucyBpbnN0YW5jZW9mIExSVUNhY2hlID8ge30gOiBvcHRpb25zXG5cbiAgICBpZiAobWF4ICE9PSAwICYmICFpc1Bvc0ludChtYXgpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtYXggb3B0aW9uIG11c3QgYmUgYSBub25uZWdhdGl2ZSBpbnRlZ2VyJylcbiAgICB9XG5cbiAgICBjb25zdCBVaW50QXJyYXkgPSBtYXggPyBnZXRVaW50QXJyYXkobWF4KSA6IEFycmF5XG4gICAgaWYgKCFVaW50QXJyYXkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBtYXggdmFsdWU6ICcgKyBtYXgpXG4gICAgfVxuXG4gICAgdGhpcy5tYXggPSBtYXhcbiAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplXG4gICAgdGhpcy5tYXhFbnRyeVNpemUgPSBtYXhFbnRyeVNpemUgfHwgdGhpcy5tYXhTaXplXG4gICAgdGhpcy5zaXplQ2FsY3VsYXRpb24gPSBzaXplQ2FsY3VsYXRpb24gfHwgbGVuZ3RoXG4gICAgaWYgKHRoaXMuc2l6ZUNhbGN1bGF0aW9uKSB7XG4gICAgICBpZiAoIXRoaXMubWF4U2l6ZSAmJiAhdGhpcy5tYXhFbnRyeVNpemUpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAnY2Fubm90IHNldCBzaXplQ2FsY3VsYXRpb24gd2l0aG91dCBzZXR0aW5nIG1heFNpemUgb3IgbWF4RW50cnlTaXplJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHRoaXMuc2l6ZUNhbGN1bGF0aW9uICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NpemVDYWxjdWxhdGlvbiBzZXQgdG8gbm9uLWZ1bmN0aW9uJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmZldGNoTWV0aG9kID0gZmV0Y2hNZXRob2QgfHwgbnVsbFxuICAgIGlmICh0aGlzLmZldGNoTWV0aG9kICYmIHR5cGVvZiB0aGlzLmZldGNoTWV0aG9kICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAnZmV0Y2hNZXRob2QgbXVzdCBiZSBhIGZ1bmN0aW9uIGlmIHNwZWNpZmllZCdcbiAgICAgIClcbiAgICB9XG5cbiAgICB0aGlzLmZldGNoQ29udGV4dCA9IGZldGNoQ29udGV4dFxuICAgIGlmICghdGhpcy5mZXRjaE1ldGhvZCAmJiBmZXRjaENvbnRleHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ2Nhbm5vdCBzZXQgZmV0Y2hDb250ZXh0IHdpdGhvdXQgZmV0Y2hNZXRob2QnXG4gICAgICApXG4gICAgfVxuXG4gICAgdGhpcy5rZXlNYXAgPSBuZXcgTWFwKClcbiAgICB0aGlzLmtleUxpc3QgPSBuZXcgQXJyYXkobWF4KS5maWxsKG51bGwpXG4gICAgdGhpcy52YWxMaXN0ID0gbmV3IEFycmF5KG1heCkuZmlsbChudWxsKVxuICAgIHRoaXMubmV4dCA9IG5ldyBVaW50QXJyYXkobWF4KVxuICAgIHRoaXMucHJldiA9IG5ldyBVaW50QXJyYXkobWF4KVxuICAgIHRoaXMuaGVhZCA9IDBcbiAgICB0aGlzLnRhaWwgPSAwXG4gICAgdGhpcy5mcmVlID0gbmV3IFN0YWNrKG1heClcbiAgICB0aGlzLmluaXRpYWxGaWxsID0gMVxuICAgIHRoaXMuc2l6ZSA9IDBcblxuICAgIGlmICh0eXBlb2YgZGlzcG9zZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5kaXNwb3NlID0gZGlzcG9zZVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGRpc3Bvc2VBZnRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5kaXNwb3NlQWZ0ZXIgPSBkaXNwb3NlQWZ0ZXJcbiAgICAgIHRoaXMuZGlzcG9zZWQgPSBbXVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc3Bvc2VBZnRlciA9IG51bGxcbiAgICAgIHRoaXMuZGlzcG9zZWQgPSBudWxsXG4gICAgfVxuICAgIHRoaXMubm9EaXNwb3NlT25TZXQgPSAhIW5vRGlzcG9zZU9uU2V0XG4gICAgdGhpcy5ub1VwZGF0ZVRUTCA9ICEhbm9VcGRhdGVUVExcbiAgICB0aGlzLm5vRGVsZXRlT25GZXRjaFJlamVjdGlvbiA9ICEhbm9EZWxldGVPbkZldGNoUmVqZWN0aW9uXG4gICAgdGhpcy5hbGxvd1N0YWxlT25GZXRjaFJlamVjdGlvbiA9ICEhYWxsb3dTdGFsZU9uRmV0Y2hSZWplY3Rpb25cbiAgICB0aGlzLmFsbG93U3RhbGVPbkZldGNoQWJvcnQgPSAhIWFsbG93U3RhbGVPbkZldGNoQWJvcnRcbiAgICB0aGlzLmlnbm9yZUZldGNoQWJvcnQgPSAhIWlnbm9yZUZldGNoQWJvcnRcblxuICAgIC8vIE5COiBtYXhFbnRyeVNpemUgaXMgc2V0IHRvIG1heFNpemUgaWYgaXQncyBzZXRcbiAgICBpZiAodGhpcy5tYXhFbnRyeVNpemUgIT09IDApIHtcbiAgICAgIGlmICh0aGlzLm1heFNpemUgIT09IDApIHtcbiAgICAgICAgaWYgKCFpc1Bvc0ludCh0aGlzLm1heFNpemUpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICdtYXhTaXplIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIGlmIHNwZWNpZmllZCdcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghaXNQb3NJbnQodGhpcy5tYXhFbnRyeVNpemUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgJ21heEVudHJ5U2l6ZSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBpZiBzcGVjaWZpZWQnXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVNpemVUcmFja2luZygpXG4gICAgfVxuXG4gICAgdGhpcy5hbGxvd1N0YWxlID0gISFhbGxvd1N0YWxlIHx8ICEhc3RhbGVcbiAgICB0aGlzLm5vRGVsZXRlT25TdGFsZUdldCA9ICEhbm9EZWxldGVPblN0YWxlR2V0XG4gICAgdGhpcy51cGRhdGVBZ2VPbkdldCA9ICEhdXBkYXRlQWdlT25HZXRcbiAgICB0aGlzLnVwZGF0ZUFnZU9uSGFzID0gISF1cGRhdGVBZ2VPbkhhc1xuICAgIHRoaXMudHRsUmVzb2x1dGlvbiA9XG4gICAgICBpc1Bvc0ludCh0dGxSZXNvbHV0aW9uKSB8fCB0dGxSZXNvbHV0aW9uID09PSAwXG4gICAgICAgID8gdHRsUmVzb2x1dGlvblxuICAgICAgICA6IDFcbiAgICB0aGlzLnR0bEF1dG9wdXJnZSA9ICEhdHRsQXV0b3B1cmdlXG4gICAgdGhpcy50dGwgPSB0dGwgfHwgbWF4QWdlIHx8IDBcbiAgICBpZiAodGhpcy50dGwpIHtcbiAgICAgIGlmICghaXNQb3NJbnQodGhpcy50dGwpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgJ3R0bCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBpZiBzcGVjaWZpZWQnXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVRUTFRyYWNraW5nKClcbiAgICB9XG5cbiAgICAvLyBkbyBub3QgYWxsb3cgY29tcGxldGVseSB1bmJvdW5kZWQgY2FjaGVzXG4gICAgaWYgKHRoaXMubWF4ID09PSAwICYmIHRoaXMudHRsID09PSAwICYmIHRoaXMubWF4U2l6ZSA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ0F0IGxlYXN0IG9uZSBvZiBtYXgsIG1heFNpemUsIG9yIHR0bCBpcyByZXF1aXJlZCdcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCF0aGlzLnR0bEF1dG9wdXJnZSAmJiAhdGhpcy5tYXggJiYgIXRoaXMubWF4U2l6ZSkge1xuICAgICAgY29uc3QgY29kZSA9ICdMUlVfQ0FDSEVfVU5CT1VOREVEJ1xuICAgICAgaWYgKHNob3VsZFdhcm4oY29kZSkpIHtcbiAgICAgICAgd2FybmVkLmFkZChjb2RlKVxuICAgICAgICBjb25zdCBtc2cgPVxuICAgICAgICAgICdUVEwgY2FjaGluZyB3aXRob3V0IHR0bEF1dG9wdXJnZSwgbWF4LCBvciBtYXhTaXplIGNhbiAnICtcbiAgICAgICAgICAncmVzdWx0IGluIHVuYm91bmRlZCBtZW1vcnkgY29uc3VtcHRpb24uJ1xuICAgICAgICBlbWl0V2FybmluZyhtc2csICdVbmJvdW5kZWRDYWNoZVdhcm5pbmcnLCBjb2RlLCBMUlVDYWNoZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3RhbGUpIHtcbiAgICAgIGRlcHJlY2F0ZWRPcHRpb24oJ3N0YWxlJywgJ2FsbG93U3RhbGUnKVxuICAgIH1cbiAgICBpZiAobWF4QWdlKSB7XG4gICAgICBkZXByZWNhdGVkT3B0aW9uKCdtYXhBZ2UnLCAndHRsJylcbiAgICB9XG4gICAgaWYgKGxlbmd0aCkge1xuICAgICAgZGVwcmVjYXRlZE9wdGlvbignbGVuZ3RoJywgJ3NpemVDYWxjdWxhdGlvbicpXG4gICAgfVxuICB9XG5cbiAgZ2V0UmVtYWluaW5nVFRMKGtleSkge1xuICAgIHJldHVybiB0aGlzLmhhcyhrZXksIHsgdXBkYXRlQWdlT25IYXM6IGZhbHNlIH0pID8gSW5maW5pdHkgOiAwXG4gIH1cblxuICBpbml0aWFsaXplVFRMVHJhY2tpbmcoKSB7XG4gICAgdGhpcy50dGxzID0gbmV3IFplcm9BcnJheSh0aGlzLm1heClcbiAgICB0aGlzLnN0YXJ0cyA9IG5ldyBaZXJvQXJyYXkodGhpcy5tYXgpXG5cbiAgICB0aGlzLnNldEl0ZW1UVEwgPSAoaW5kZXgsIHR0bCwgc3RhcnQgPSBwZXJmLm5vdygpKSA9PiB7XG4gICAgICB0aGlzLnN0YXJ0c1tpbmRleF0gPSB0dGwgIT09IDAgPyBzdGFydCA6IDBcbiAgICAgIHRoaXMudHRsc1tpbmRleF0gPSB0dGxcbiAgICAgIGlmICh0dGwgIT09IDAgJiYgdGhpcy50dGxBdXRvcHVyZ2UpIHtcbiAgICAgICAgY29uc3QgdCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmlzU3RhbGUoaW5kZXgpKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZSh0aGlzLmtleUxpc3RbaW5kZXhdKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgdHRsICsgMSlcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgLSB1bnJlZigpIG5vdCBzdXBwb3J0ZWQgb24gYWxsIHBsYXRmb3JtcyAqL1xuICAgICAgICBpZiAodC51bnJlZikge1xuICAgICAgICAgIHQudW5yZWYoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVJdGVtQWdlID0gaW5kZXggPT4ge1xuICAgICAgdGhpcy5zdGFydHNbaW5kZXhdID0gdGhpcy50dGxzW2luZGV4XSAhPT0gMCA/IHBlcmYubm93KCkgOiAwXG4gICAgfVxuXG4gICAgdGhpcy5zdGF0dXNUVEwgPSAoc3RhdHVzLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICBzdGF0dXMudHRsID0gdGhpcy50dGxzW2luZGV4XVxuICAgICAgICBzdGF0dXMuc3RhcnQgPSB0aGlzLnN0YXJ0c1tpbmRleF1cbiAgICAgICAgc3RhdHVzLm5vdyA9IGNhY2hlZE5vdyB8fCBnZXROb3coKVxuICAgICAgICBzdGF0dXMucmVtYWluaW5nVFRMID0gc3RhdHVzLm5vdyArIHN0YXR1cy50dGwgLSBzdGF0dXMuc3RhcnRcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBkZWJvdW5jZSBjYWxscyB0byBwZXJmLm5vdygpIHRvIDFzIHNvIHdlJ3JlIG5vdCBoaXR0aW5nXG4gICAgLy8gdGhhdCBjb3N0bHkgY2FsbCByZXBlYXRlZGx5LlxuICAgIGxldCBjYWNoZWROb3cgPSAwXG4gICAgY29uc3QgZ2V0Tm93ID0gKCkgPT4ge1xuICAgICAgY29uc3QgbiA9IHBlcmYubm93KClcbiAgICAgIGlmICh0aGlzLnR0bFJlc29sdXRpb24gPiAwKSB7XG4gICAgICAgIGNhY2hlZE5vdyA9IG5cbiAgICAgICAgY29uc3QgdCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgKCkgPT4gKGNhY2hlZE5vdyA9IDApLFxuICAgICAgICAgIHRoaXMudHRsUmVzb2x1dGlvblxuICAgICAgICApXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlIC0gbm90IGF2YWlsYWJsZSBvbiBhbGwgcGxhdGZvcm1zICovXG4gICAgICAgIGlmICh0LnVucmVmKSB7XG4gICAgICAgICAgdC51bnJlZigpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuXG4gICAgfVxuXG4gICAgdGhpcy5nZXRSZW1haW5pbmdUVEwgPSBrZXkgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmtleU1hcC5nZXQoa2V5KVxuICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnR0bHNbaW5kZXhdID09PSAwIHx8IHRoaXMuc3RhcnRzW2luZGV4XSA9PT0gMFxuICAgICAgICA/IEluZmluaXR5XG4gICAgICAgIDogdGhpcy5zdGFydHNbaW5kZXhdICtcbiAgICAgICAgICAgIHRoaXMudHRsc1tpbmRleF0gLVxuICAgICAgICAgICAgKGNhY2hlZE5vdyB8fCBnZXROb3coKSlcbiAgICB9XG5cbiAgICB0aGlzLmlzU3RhbGUgPSBpbmRleCA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnR0bHNbaW5kZXhdICE9PSAwICYmXG4gICAgICAgIHRoaXMuc3RhcnRzW2luZGV4XSAhPT0gMCAmJlxuICAgICAgICAoY2FjaGVkTm93IHx8IGdldE5vdygpKSAtIHRoaXMuc3RhcnRzW2luZGV4XSA+XG4gICAgICAgICAgdGhpcy50dGxzW2luZGV4XVxuICAgICAgKVxuICAgIH1cbiAgfVxuICB1cGRhdGVJdGVtQWdlKF9pbmRleCkge31cbiAgc3RhdHVzVFRMKF9zdGF0dXMsIF9pbmRleCkge31cbiAgc2V0SXRlbVRUTChfaW5kZXgsIF90dGwsIF9zdGFydCkge31cbiAgaXNTdGFsZShfaW5kZXgpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGluaXRpYWxpemVTaXplVHJhY2tpbmcoKSB7XG4gICAgdGhpcy5jYWxjdWxhdGVkU2l6ZSA9IDBcbiAgICB0aGlzLnNpemVzID0gbmV3IFplcm9BcnJheSh0aGlzLm1heClcbiAgICB0aGlzLnJlbW92ZUl0ZW1TaXplID0gaW5kZXggPT4ge1xuICAgICAgdGhpcy5jYWxjdWxhdGVkU2l6ZSAtPSB0aGlzLnNpemVzW2luZGV4XVxuICAgICAgdGhpcy5zaXplc1tpbmRleF0gPSAwXG4gICAgfVxuICAgIHRoaXMucmVxdWlyZVNpemUgPSAoaywgdiwgc2l6ZSwgc2l6ZUNhbGN1bGF0aW9uKSA9PiB7XG4gICAgICAvLyBwcm92aXNpb25hbGx5IGFjY2VwdCBiYWNrZ3JvdW5kIGZldGNoZXMuXG4gICAgICAvLyBhY3R1YWwgdmFsdWUgc2l6ZSB3aWxsIGJlIGNoZWNrZWQgd2hlbiB0aGV5IHJldHVybi5cbiAgICAgIGlmICh0aGlzLmlzQmFja2dyb3VuZEZldGNoKHYpKSB7XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9XG4gICAgICBpZiAoIWlzUG9zSW50KHNpemUpKSB7XG4gICAgICAgIGlmIChzaXplQ2FsY3VsYXRpb24pIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHNpemVDYWxjdWxhdGlvbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZUNhbGN1bGF0aW9uIG11c3QgYmUgYSBmdW5jdGlvbicpXG4gICAgICAgICAgfVxuICAgICAgICAgIHNpemUgPSBzaXplQ2FsY3VsYXRpb24odiwgaylcbiAgICAgICAgICBpZiAoIWlzUG9zSW50KHNpemUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICAnc2l6ZUNhbGN1bGF0aW9uIHJldHVybiBpbnZhbGlkIChleHBlY3QgcG9zaXRpdmUgaW50ZWdlciknXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAnaW52YWxpZCBzaXplIHZhbHVlIChtdXN0IGJlIHBvc2l0aXZlIGludGVnZXIpLiAnICtcbiAgICAgICAgICAgICAgJ1doZW4gbWF4U2l6ZSBvciBtYXhFbnRyeVNpemUgaXMgdXNlZCwgc2l6ZUNhbGN1bGF0aW9uIG9yIHNpemUgJyArXG4gICAgICAgICAgICAgICdtdXN0IGJlIHNldC4nXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc2l6ZVxuICAgIH1cbiAgICB0aGlzLmFkZEl0ZW1TaXplID0gKGluZGV4LCBzaXplLCBzdGF0dXMpID0+IHtcbiAgICAgIHRoaXMuc2l6ZXNbaW5kZXhdID0gc2l6ZVxuICAgICAgaWYgKHRoaXMubWF4U2l6ZSkge1xuICAgICAgICBjb25zdCBtYXhTaXplID0gdGhpcy5tYXhTaXplIC0gdGhpcy5zaXplc1tpbmRleF1cbiAgICAgICAgd2hpbGUgKHRoaXMuY2FsY3VsYXRlZFNpemUgPiBtYXhTaXplKSB7XG4gICAgICAgICAgdGhpcy5ldmljdCh0cnVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmNhbGN1bGF0ZWRTaXplICs9IHRoaXMuc2l6ZXNbaW5kZXhdXG4gICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgIHN0YXR1cy5lbnRyeVNpemUgPSBzaXplXG4gICAgICAgIHN0YXR1cy50b3RhbENhbGN1bGF0ZWRTaXplID0gdGhpcy5jYWxjdWxhdGVkU2l6ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZW1vdmVJdGVtU2l6ZShfaW5kZXgpIHt9XG4gIGFkZEl0ZW1TaXplKF9pbmRleCwgX3NpemUpIHt9XG4gIHJlcXVpcmVTaXplKF9rLCBfdiwgc2l6ZSwgc2l6ZUNhbGN1bGF0aW9uKSB7XG4gICAgaWYgKHNpemUgfHwgc2l6ZUNhbGN1bGF0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAnY2Fubm90IHNldCBzaXplIHdpdGhvdXQgc2V0dGluZyBtYXhTaXplIG9yIG1heEVudHJ5U2l6ZSBvbiBjYWNoZSdcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAqaW5kZXhlcyh7IGFsbG93U3RhbGUgPSB0aGlzLmFsbG93U3RhbGUgfSA9IHt9KSB7XG4gICAgaWYgKHRoaXMuc2l6ZSkge1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMudGFpbDsgdHJ1ZTsgKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1ZhbGlkSW5kZXgoaSkpIHtcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbGxvd1N0YWxlIHx8ICF0aGlzLmlzU3RhbGUoaSkpIHtcbiAgICAgICAgICB5aWVsZCBpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IHRoaXMuaGVhZCkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaSA9IHRoaXMucHJldltpXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgKnJpbmRleGVzKHsgYWxsb3dTdGFsZSA9IHRoaXMuYWxsb3dTdGFsZSB9ID0ge30pIHtcbiAgICBpZiAodGhpcy5zaXplKSB7XG4gICAgICBmb3IgKGxldCBpID0gdGhpcy5oZWFkOyB0cnVlOyApIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRJbmRleChpKSkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFsbG93U3RhbGUgfHwgIXRoaXMuaXNTdGFsZShpKSkge1xuICAgICAgICAgIHlpZWxkIGlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA9PT0gdGhpcy50YWlsKSB7XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpID0gdGhpcy5uZXh0W2ldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpc1ZhbGlkSW5kZXgoaW5kZXgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgaW5kZXggIT09IHVuZGVmaW5lZCAmJlxuICAgICAgdGhpcy5rZXlNYXAuZ2V0KHRoaXMua2V5TGlzdFtpbmRleF0pID09PSBpbmRleFxuICAgIClcbiAgfVxuXG4gICplbnRyaWVzKCkge1xuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLmluZGV4ZXMoKSkge1xuICAgICAgaWYgKCF0aGlzLmlzQmFja2dyb3VuZEZldGNoKHRoaXMudmFsTGlzdFtpXSkpIHtcbiAgICAgICAgeWllbGQgW3RoaXMua2V5TGlzdFtpXSwgdGhpcy52YWxMaXN0W2ldXVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAqcmVudHJpZXMoKSB7XG4gICAgZm9yIChjb25zdCBpIG9mIHRoaXMucmluZGV4ZXMoKSkge1xuICAgICAgaWYgKCF0aGlzLmlzQmFja2dyb3VuZEZldGNoKHRoaXMudmFsTGlzdFtpXSkpIHtcbiAgICAgICAgeWllbGQgW3RoaXMua2V5TGlzdFtpXSwgdGhpcy52YWxMaXN0W2ldXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gICprZXlzKCkge1xuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLmluZGV4ZXMoKSkge1xuICAgICAgaWYgKCF0aGlzLmlzQmFja2dyb3VuZEZldGNoKHRoaXMudmFsTGlzdFtpXSkpIHtcbiAgICAgICAgeWllbGQgdGhpcy5rZXlMaXN0W2ldXG4gICAgICB9XG4gICAgfVxuICB9XG4gICpya2V5cygpIHtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGhpcy5yaW5kZXhlcygpKSB7XG4gICAgICBpZiAoIXRoaXMuaXNCYWNrZ3JvdW5kRmV0Y2godGhpcy52YWxMaXN0W2ldKSkge1xuICAgICAgICB5aWVsZCB0aGlzLmtleUxpc3RbaV1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAqdmFsdWVzKCkge1xuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLmluZGV4ZXMoKSkge1xuICAgICAgaWYgKCF0aGlzLmlzQmFja2dyb3VuZEZldGNoKHRoaXMudmFsTGlzdFtpXSkpIHtcbiAgICAgICAgeWllbGQgdGhpcy52YWxMaXN0W2ldXG4gICAgICB9XG4gICAgfVxuICB9XG4gICpydmFsdWVzKCkge1xuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLnJpbmRleGVzKCkpIHtcbiAgICAgIGlmICghdGhpcy5pc0JhY2tncm91bmRGZXRjaCh0aGlzLnZhbExpc3RbaV0pKSB7XG4gICAgICAgIHlpZWxkIHRoaXMudmFsTGlzdFtpXVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXMoKVxuICB9XG5cbiAgZmluZChmbiwgZ2V0T3B0aW9ucyA9IHt9KSB7XG4gICAgZm9yIChjb25zdCBpIG9mIHRoaXMuaW5kZXhlcygpKSB7XG4gICAgICBpZiAoZm4odGhpcy52YWxMaXN0W2ldLCB0aGlzLmtleUxpc3RbaV0sIHRoaXMpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmtleUxpc3RbaV0sIGdldE9wdGlvbnMpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yRWFjaChmbiwgdGhpc3AgPSB0aGlzKSB7XG4gICAgZm9yIChjb25zdCBpIG9mIHRoaXMuaW5kZXhlcygpKSB7XG4gICAgICBmbi5jYWxsKHRoaXNwLCB0aGlzLnZhbExpc3RbaV0sIHRoaXMua2V5TGlzdFtpXSwgdGhpcylcbiAgICB9XG4gIH1cblxuICByZm9yRWFjaChmbiwgdGhpc3AgPSB0aGlzKSB7XG4gICAgZm9yIChjb25zdCBpIG9mIHRoaXMucmluZGV4ZXMoKSkge1xuICAgICAgZm4uY2FsbCh0aGlzcCwgdGhpcy52YWxMaXN0W2ldLCB0aGlzLmtleUxpc3RbaV0sIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgZ2V0IHBydW5lKCkge1xuICAgIGRlcHJlY2F0ZWRNZXRob2QoJ3BydW5lJywgJ3B1cmdlU3RhbGUnKVxuICAgIHJldHVybiB0aGlzLnB1cmdlU3RhbGVcbiAgfVxuXG4gIHB1cmdlU3RhbGUoKSB7XG4gICAgbGV0IGRlbGV0ZWQgPSBmYWxzZVxuICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLnJpbmRleGVzKHsgYWxsb3dTdGFsZTogdHJ1ZSB9KSkge1xuICAgICAgaWYgKHRoaXMuaXNTdGFsZShpKSkge1xuICAgICAgICB0aGlzLmRlbGV0ZSh0aGlzLmtleUxpc3RbaV0pXG4gICAgICAgIGRlbGV0ZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZWxldGVkXG4gIH1cblxuICBkdW1wKCkge1xuICAgIGNvbnN0IGFyciA9IFtdXG4gICAgZm9yIChjb25zdCBpIG9mIHRoaXMuaW5kZXhlcyh7IGFsbG93U3RhbGU6IHRydWUgfSkpIHtcbiAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5TGlzdFtpXVxuICAgICAgY29uc3QgdiA9IHRoaXMudmFsTGlzdFtpXVxuICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmlzQmFja2dyb3VuZEZldGNoKHYpXG4gICAgICAgID8gdi5fX3N0YWxlV2hpbGVGZXRjaGluZ1xuICAgICAgICA6IHZcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSBjb250aW51ZVxuICAgICAgY29uc3QgZW50cnkgPSB7IHZhbHVlIH1cbiAgICAgIGlmICh0aGlzLnR0bHMpIHtcbiAgICAgICAgZW50cnkudHRsID0gdGhpcy50dGxzW2ldXG4gICAgICAgIC8vIGFsd2F5cyBkdW1wIHRoZSBzdGFydCByZWxhdGl2ZSB0byBhIHBvcnRhYmxlIHRpbWVzdGFtcFxuICAgICAgICAvLyBpdCdzIG9rIGZvciB0aGlzIHRvIGJlIGEgYml0IHNsb3csIGl0J3MgYSByYXJlIG9wZXJhdGlvbi5cbiAgICAgICAgY29uc3QgYWdlID0gcGVyZi5ub3coKSAtIHRoaXMuc3RhcnRzW2ldXG4gICAgICAgIGVudHJ5LnN0YXJ0ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC0gYWdlKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2l6ZXMpIHtcbiAgICAgICAgZW50cnkuc2l6ZSA9IHRoaXMuc2l6ZXNbaV1cbiAgICAgIH1cbiAgICAgIGFyci51bnNoaWZ0KFtrZXksIGVudHJ5XSlcbiAgICB9XG4gICAgcmV0dXJuIGFyclxuICB9XG5cbiAgbG9hZChhcnIpIHtcbiAgICB0aGlzLmNsZWFyKClcbiAgICBmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiBhcnIpIHtcbiAgICAgIGlmIChlbnRyeS5zdGFydCkge1xuICAgICAgICAvLyBlbnRyeS5zdGFydCBpcyBhIHBvcnRhYmxlIHRpbWVzdGFtcCwgYnV0IHdlIG1heSBiZSB1c2luZ1xuICAgICAgICAvLyBub2RlJ3MgcGVyZm9ybWFuY2Uubm93KCksIHNvIGNhbGN1bGF0ZSB0aGUgb2Zmc2V0LlxuICAgICAgICAvLyBpdCdzIG9rIGZvciB0aGlzIHRvIGJlIGEgYml0IHNsb3csIGl0J3MgYSByYXJlIG9wZXJhdGlvbi5cbiAgICAgICAgY29uc3QgYWdlID0gRGF0ZS5ub3coKSAtIGVudHJ5LnN0YXJ0XG4gICAgICAgIGVudHJ5LnN0YXJ0ID0gcGVyZi5ub3coKSAtIGFnZVxuICAgICAgfVxuICAgICAgdGhpcy5zZXQoa2V5LCBlbnRyeS52YWx1ZSwgZW50cnkpXG4gICAgfVxuICB9XG5cbiAgZGlzcG9zZShfdiwgX2ssIF9yZWFzb24pIHt9XG5cbiAgc2V0KFxuICAgIGssXG4gICAgdixcbiAgICB7XG4gICAgICB0dGwgPSB0aGlzLnR0bCxcbiAgICAgIHN0YXJ0LFxuICAgICAgbm9EaXNwb3NlT25TZXQgPSB0aGlzLm5vRGlzcG9zZU9uU2V0LFxuICAgICAgc2l6ZSA9IDAsXG4gICAgICBzaXplQ2FsY3VsYXRpb24gPSB0aGlzLnNpemVDYWxjdWxhdGlvbixcbiAgICAgIG5vVXBkYXRlVFRMID0gdGhpcy5ub1VwZGF0ZVRUTCxcbiAgICAgIHN0YXR1cyxcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgc2l6ZSA9IHRoaXMucmVxdWlyZVNpemUoaywgdiwgc2l6ZSwgc2l6ZUNhbGN1bGF0aW9uKVxuICAgIC8vIGlmIHRoZSBpdGVtIGRvZXNuJ3QgZml0LCBkb24ndCBkbyBhbnl0aGluZ1xuICAgIC8vIE5COiBtYXhFbnRyeVNpemUgc2V0IHRvIG1heFNpemUgYnkgZGVmYXVsdFxuICAgIGlmICh0aGlzLm1heEVudHJ5U2l6ZSAmJiBzaXplID4gdGhpcy5tYXhFbnRyeVNpemUpIHtcbiAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgc3RhdHVzLnNldCA9ICdtaXNzJ1xuICAgICAgICBzdGF0dXMubWF4RW50cnlTaXplRXhjZWVkZWQgPSB0cnVlXG4gICAgICB9XG4gICAgICAvLyBoYXZlIHRvIGRlbGV0ZSwgaW4gY2FzZSBhIGJhY2tncm91bmQgZmV0Y2ggaXMgdGhlcmUgYWxyZWFkeS5cbiAgICAgIC8vIGluIG5vbi1hc3luYyBjYXNlcywgdGhpcyBpcyBhIG5vLW9wXG4gICAgICB0aGlzLmRlbGV0ZShrKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gdGhpcy5zaXplID09PSAwID8gdW5kZWZpbmVkIDogdGhpcy5rZXlNYXAuZ2V0KGspXG4gICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGFkZGl0aW9uXG4gICAgICBpbmRleCA9IHRoaXMubmV3SW5kZXgoKVxuICAgICAgdGhpcy5rZXlMaXN0W2luZGV4XSA9IGtcbiAgICAgIHRoaXMudmFsTGlzdFtpbmRleF0gPSB2XG4gICAgICB0aGlzLmtleU1hcC5zZXQoaywgaW5kZXgpXG4gICAgICB0aGlzLm5leHRbdGhpcy50YWlsXSA9IGluZGV4XG4gICAgICB0aGlzLnByZXZbaW5kZXhdID0gdGhpcy50YWlsXG4gICAgICB0aGlzLnRhaWwgPSBpbmRleFxuICAgICAgdGhpcy5zaXplKytcbiAgICAgIHRoaXMuYWRkSXRlbVNpemUoaW5kZXgsIHNpemUsIHN0YXR1cylcbiAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgc3RhdHVzLnNldCA9ICdhZGQnXG4gICAgICB9XG4gICAgICBub1VwZGF0ZVRUTCA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZVxuICAgICAgdGhpcy5tb3ZlVG9UYWlsKGluZGV4KVxuICAgICAgY29uc3Qgb2xkVmFsID0gdGhpcy52YWxMaXN0W2luZGV4XVxuICAgICAgaWYgKHYgIT09IG9sZFZhbCkge1xuICAgICAgICBpZiAodGhpcy5pc0JhY2tncm91bmRGZXRjaChvbGRWYWwpKSB7XG4gICAgICAgICAgb2xkVmFsLl9fYWJvcnRDb250cm9sbGVyLmFib3J0KG5ldyBFcnJvcigncmVwbGFjZWQnKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIW5vRGlzcG9zZU9uU2V0KSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2Uob2xkVmFsLCBrLCAnc2V0JylcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VBZnRlcikge1xuICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2VkLnB1c2goW29sZFZhbCwgaywgJ3NldCddKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUl0ZW1TaXplKGluZGV4KVxuICAgICAgICB0aGlzLnZhbExpc3RbaW5kZXhdID0gdlxuICAgICAgICB0aGlzLmFkZEl0ZW1TaXplKGluZGV4LCBzaXplLCBzdGF0dXMpXG4gICAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICBzdGF0dXMuc2V0ID0gJ3JlcGxhY2UnXG4gICAgICAgICAgY29uc3Qgb2xkVmFsdWUgPVxuICAgICAgICAgICAgb2xkVmFsICYmIHRoaXMuaXNCYWNrZ3JvdW5kRmV0Y2gob2xkVmFsKVxuICAgICAgICAgICAgICA/IG9sZFZhbC5fX3N0YWxlV2hpbGVGZXRjaGluZ1xuICAgICAgICAgICAgICA6IG9sZFZhbFxuICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gdW5kZWZpbmVkKSBzdGF0dXMub2xkVmFsdWUgPSBvbGRWYWx1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0YXR1cykge1xuICAgICAgICBzdGF0dXMuc2V0ID0gJ3VwZGF0ZSdcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR0bCAhPT0gMCAmJiB0aGlzLnR0bCA9PT0gMCAmJiAhdGhpcy50dGxzKSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVUVExUcmFja2luZygpXG4gICAgfVxuICAgIGlmICghbm9VcGRhdGVUVEwpIHtcbiAgICAgIHRoaXMuc2V0SXRlbVRUTChpbmRleCwgdHRsLCBzdGFydClcbiAgICB9XG4gICAgdGhpcy5zdGF0dXNUVEwoc3RhdHVzLCBpbmRleClcbiAgICBpZiAodGhpcy5kaXNwb3NlQWZ0ZXIpIHtcbiAgICAgIHdoaWxlICh0aGlzLmRpc3Bvc2VkLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmRpc3Bvc2VBZnRlciguLi50aGlzLmRpc3Bvc2VkLnNoaWZ0KCkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBuZXdJbmRleCgpIHtcbiAgICBpZiAodGhpcy5zaXplID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy50YWlsXG4gICAgfVxuICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubWF4ICYmIHRoaXMubWF4ICE9PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5ldmljdChmYWxzZSlcbiAgICB9XG4gICAgaWYgKHRoaXMuZnJlZS5sZW5ndGggIT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzLmZyZWUucG9wKClcbiAgICB9XG4gICAgLy8gaW5pdGlhbCBmaWxsLCBqdXN0IGtlZXAgd3JpdGluZyBkb3duIHRoZSBsaXN0XG4gICAgcmV0dXJuIHRoaXMuaW5pdGlhbEZpbGwrK1xuICB9XG5cbiAgcG9wKCkge1xuICAgIGlmICh0aGlzLnNpemUpIHtcbiAgICAgIGNvbnN0IHZhbCA9IHRoaXMudmFsTGlzdFt0aGlzLmhlYWRdXG4gICAgICB0aGlzLmV2aWN0KHRydWUpXG4gICAgICByZXR1cm4gdmFsXG4gICAgfVxuICB9XG5cbiAgZXZpY3QoZnJlZSkge1xuICAgIGNvbnN0IGhlYWQgPSB0aGlzLmhlYWRcbiAgICBjb25zdCBrID0gdGhpcy5rZXlMaXN0W2hlYWRdXG4gICAgY29uc3QgdiA9IHRoaXMudmFsTGlzdFtoZWFkXVxuICAgIGlmICh0aGlzLmlzQmFja2dyb3VuZEZldGNoKHYpKSB7XG4gICAgICB2Ll9fYWJvcnRDb250cm9sbGVyLmFib3J0KG5ldyBFcnJvcignZXZpY3RlZCcpKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc3Bvc2UodiwgaywgJ2V2aWN0JylcbiAgICAgIGlmICh0aGlzLmRpc3Bvc2VBZnRlcikge1xuICAgICAgICB0aGlzLmRpc3Bvc2VkLnB1c2goW3YsIGssICdldmljdCddKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbW92ZUl0ZW1TaXplKGhlYWQpXG4gICAgLy8gaWYgd2UgYXJlbid0IGFib3V0IHRvIHVzZSB0aGUgaW5kZXgsIHRoZW4gbnVsbCB0aGVzZSBvdXRcbiAgICBpZiAoZnJlZSkge1xuICAgICAgdGhpcy5rZXlMaXN0W2hlYWRdID0gbnVsbFxuICAgICAgdGhpcy52YWxMaXN0W2hlYWRdID0gbnVsbFxuICAgICAgdGhpcy5mcmVlLnB1c2goaGVhZClcbiAgICB9XG4gICAgdGhpcy5oZWFkID0gdGhpcy5uZXh0W2hlYWRdXG4gICAgdGhpcy5rZXlNYXAuZGVsZXRlKGspXG4gICAgdGhpcy5zaXplLS1cbiAgICByZXR1cm4gaGVhZFxuICB9XG5cbiAgaGFzKGssIHsgdXBkYXRlQWdlT25IYXMgPSB0aGlzLnVwZGF0ZUFnZU9uSGFzLCBzdGF0dXMgfSA9IHt9KSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmtleU1hcC5nZXQoaylcbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCF0aGlzLmlzU3RhbGUoaW5kZXgpKSB7XG4gICAgICAgIGlmICh1cGRhdGVBZ2VPbkhhcykge1xuICAgICAgICAgIHRoaXMudXBkYXRlSXRlbUFnZShpbmRleClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdHVzKSBzdGF0dXMuaGFzID0gJ2hpdCdcbiAgICAgICAgdGhpcy5zdGF0dXNUVEwoc3RhdHVzLCBpbmRleClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gZWxzZSBpZiAoc3RhdHVzKSB7XG4gICAgICAgIHN0YXR1cy5oYXMgPSAnc3RhbGUnXG4gICAgICAgIHRoaXMuc3RhdHVzVFRMKHN0YXR1cywgaW5kZXgpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChzdGF0dXMpIHtcbiAgICAgIHN0YXR1cy5oYXMgPSAnbWlzcydcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBsaWtlIGdldCgpLCBidXQgd2l0aG91dCBhbnkgTFJVIHVwZGF0aW5nIG9yIFRUTCBleHBpcmF0aW9uXG4gIHBlZWsoaywgeyBhbGxvd1N0YWxlID0gdGhpcy5hbGxvd1N0YWxlIH0gPSB7fSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5rZXlNYXAuZ2V0KGspXG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQgJiYgKGFsbG93U3RhbGUgfHwgIXRoaXMuaXNTdGFsZShpbmRleCkpKSB7XG4gICAgICBjb25zdCB2ID0gdGhpcy52YWxMaXN0W2luZGV4XVxuICAgICAgLy8gZWl0aGVyIHN0YWxlIGFuZCBhbGxvd2VkLCBvciBmb3JjaW5nIGEgcmVmcmVzaCBvZiBub24tc3RhbGUgdmFsdWVcbiAgICAgIHJldHVybiB0aGlzLmlzQmFja2dyb3VuZEZldGNoKHYpID8gdi5fX3N0YWxlV2hpbGVGZXRjaGluZyA6IHZcbiAgICB9XG4gIH1cblxuICBiYWNrZ3JvdW5kRmV0Y2goaywgaW5kZXgsIG9wdGlvbnMsIGNvbnRleHQpIHtcbiAgICBjb25zdCB2ID0gaW5kZXggPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHRoaXMudmFsTGlzdFtpbmRleF1cbiAgICBpZiAodGhpcy5pc0JhY2tncm91bmRGZXRjaCh2KSkge1xuICAgICAgcmV0dXJuIHZcbiAgICB9XG4gICAgY29uc3QgYWMgPSBuZXcgQUMoKVxuICAgIGlmIChvcHRpb25zLnNpZ25hbCkge1xuICAgICAgb3B0aW9ucy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PlxuICAgICAgICBhYy5hYm9ydChvcHRpb25zLnNpZ25hbC5yZWFzb24pXG4gICAgICApXG4gICAgfVxuICAgIGNvbnN0IGZldGNoT3B0cyA9IHtcbiAgICAgIHNpZ25hbDogYWMuc2lnbmFsLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIGNvbnRleHQsXG4gICAgfVxuICAgIGNvbnN0IGNiID0gKHYsIHVwZGF0ZUNhY2hlID0gZmFsc2UpID0+IHtcbiAgICAgIGNvbnN0IHsgYWJvcnRlZCB9ID0gYWMuc2lnbmFsXG4gICAgICBjb25zdCBpZ25vcmVBYm9ydCA9IG9wdGlvbnMuaWdub3JlRmV0Y2hBYm9ydCAmJiB2ICE9PSB1bmRlZmluZWRcbiAgICAgIGlmIChvcHRpb25zLnN0YXR1cykge1xuICAgICAgICBpZiAoYWJvcnRlZCAmJiAhdXBkYXRlQ2FjaGUpIHtcbiAgICAgICAgICBvcHRpb25zLnN0YXR1cy5mZXRjaEFib3J0ZWQgPSB0cnVlXG4gICAgICAgICAgb3B0aW9ucy5zdGF0dXMuZmV0Y2hFcnJvciA9IGFjLnNpZ25hbC5yZWFzb25cbiAgICAgICAgICBpZiAoaWdub3JlQWJvcnQpIG9wdGlvbnMuc3RhdHVzLmZldGNoQWJvcnRJZ25vcmVkID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9wdGlvbnMuc3RhdHVzLmZldGNoUmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhYm9ydGVkICYmICFpZ25vcmVBYm9ydCAmJiAhdXBkYXRlQ2FjaGUpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoRmFpbChhYy5zaWduYWwucmVhc29uKVxuICAgICAgfVxuICAgICAgLy8gZWl0aGVyIHdlIGRpZG4ndCBhYm9ydCwgYW5kIGFyZSBzdGlsbCBoZXJlLCBvciB3ZSBkaWQsIGFuZCBpZ25vcmVkXG4gICAgICBpZiAodGhpcy52YWxMaXN0W2luZGV4XSA9PT0gcCkge1xuICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHAuX19zdGFsZVdoaWxlRmV0Y2hpbmcpIHtcbiAgICAgICAgICAgIHRoaXMudmFsTGlzdFtpbmRleF0gPSBwLl9fc3RhbGVXaGlsZUZldGNoaW5nXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlKGspXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChvcHRpb25zLnN0YXR1cykgb3B0aW9ucy5zdGF0dXMuZmV0Y2hVcGRhdGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuc2V0KGssIHYsIGZldGNoT3B0cy5vcHRpb25zKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdlxuICAgIH1cbiAgICBjb25zdCBlYiA9IGVyID0+IHtcbiAgICAgIGlmIChvcHRpb25zLnN0YXR1cykge1xuICAgICAgICBvcHRpb25zLnN0YXR1cy5mZXRjaFJlamVjdGVkID0gdHJ1ZVxuICAgICAgICBvcHRpb25zLnN0YXR1cy5mZXRjaEVycm9yID0gZXJcbiAgICAgIH1cbiAgICAgIHJldHVybiBmZXRjaEZhaWwoZXIpXG4gICAgfVxuICAgIGNvbnN0IGZldGNoRmFpbCA9IGVyID0+IHtcbiAgICAgIGNvbnN0IHsgYWJvcnRlZCB9ID0gYWMuc2lnbmFsXG4gICAgICBjb25zdCBhbGxvd1N0YWxlQWJvcnRlZCA9XG4gICAgICAgIGFib3J0ZWQgJiYgb3B0aW9ucy5hbGxvd1N0YWxlT25GZXRjaEFib3J0XG4gICAgICBjb25zdCBhbGxvd1N0YWxlID1cbiAgICAgICAgYWxsb3dTdGFsZUFib3J0ZWQgfHwgb3B0aW9ucy5hbGxvd1N0YWxlT25GZXRjaFJlamVjdGlvblxuICAgICAgY29uc3Qgbm9EZWxldGUgPSBhbGxvd1N0YWxlIHx8IG9wdGlvbnMubm9EZWxldGVPbkZldGNoUmVqZWN0aW9uXG4gICAgICBpZiAodGhpcy52YWxMaXN0W2luZGV4XSA9PT0gcCkge1xuICAgICAgICAvLyBpZiB3ZSBhbGxvdyBzdGFsZSBvbiBmZXRjaCByZWplY3Rpb25zLCB0aGVuIHdlIG5lZWQgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgLy8gdGhlIHN0YWxlIHZhbHVlIGlzIG5vdCByZW1vdmVkIGZyb20gdGhlIGNhY2hlIHdoZW4gdGhlIGZldGNoIGZhaWxzLlxuICAgICAgICBjb25zdCBkZWwgPSAhbm9EZWxldGUgfHwgcC5fX3N0YWxlV2hpbGVGZXRjaGluZyA9PT0gdW5kZWZpbmVkXG4gICAgICAgIGlmIChkZWwpIHtcbiAgICAgICAgICB0aGlzLmRlbGV0ZShrKVxuICAgICAgICB9IGVsc2UgaWYgKCFhbGxvd1N0YWxlQWJvcnRlZCkge1xuICAgICAgICAgIC8vIHN0aWxsIHJlcGxhY2UgdGhlICpwcm9taXNlKiB3aXRoIHRoZSBzdGFsZSB2YWx1ZSxcbiAgICAgICAgICAvLyBzaW5jZSB3ZSBhcmUgZG9uZSB3aXRoIHRoZSBwcm9taXNlIGF0IHRoaXMgcG9pbnQuXG4gICAgICAgICAgLy8gbGVhdmUgaXQgdW50b3VjaGVkIGlmIHdlJ3JlIHN0aWxsIHdhaXRpbmcgZm9yIGFuXG4gICAgICAgICAgLy8gYWJvcnRlZCBiYWNrZ3JvdW5kIGZldGNoIHRoYXQgaGFzbid0IHlldCByZXR1cm5lZC5cbiAgICAgICAgICB0aGlzLnZhbExpc3RbaW5kZXhdID0gcC5fX3N0YWxlV2hpbGVGZXRjaGluZ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWxsb3dTdGFsZSkge1xuICAgICAgICBpZiAob3B0aW9ucy5zdGF0dXMgJiYgcC5fX3N0YWxlV2hpbGVGZXRjaGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgb3B0aW9ucy5zdGF0dXMucmV0dXJuZWRTdGFsZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcC5fX3N0YWxlV2hpbGVGZXRjaGluZ1xuICAgICAgfSBlbHNlIGlmIChwLl9fcmV0dXJuZWQgPT09IHApIHtcbiAgICAgICAgdGhyb3cgZXJcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcGNhbGwgPSAocmVzLCByZWopID0+IHtcbiAgICAgIHRoaXMuZmV0Y2hNZXRob2QoaywgdiwgZmV0Y2hPcHRzKS50aGVuKHYgPT4gcmVzKHYpLCByZWopXG4gICAgICAvLyBpZ25vcmVkLCB3ZSBnbyB1bnRpbCB3ZSBmaW5pc2gsIHJlZ2FyZGxlc3MuXG4gICAgICAvLyBkZWZlciBjaGVjayB1bnRpbCB3ZSBhcmUgYWN0dWFsbHkgYWJvcnRpbmcsXG4gICAgICAvLyBzbyBmZXRjaE1ldGhvZCBjYW4gb3ZlcnJpZGUuXG4gICAgICBhYy5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhb3B0aW9ucy5pZ25vcmVGZXRjaEFib3J0IHx8XG4gICAgICAgICAgb3B0aW9ucy5hbGxvd1N0YWxlT25GZXRjaEFib3J0XG4gICAgICAgICkge1xuICAgICAgICAgIHJlcygpXG4gICAgICAgICAgLy8gd2hlbiBpdCBldmVudHVhbGx5IHJlc29sdmVzLCB1cGRhdGUgdGhlIGNhY2hlLlxuICAgICAgICAgIGlmIChvcHRpb25zLmFsbG93U3RhbGVPbkZldGNoQWJvcnQpIHtcbiAgICAgICAgICAgIHJlcyA9IHYgPT4gY2IodiwgdHJ1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvcHRpb25zLnN0YXR1cykgb3B0aW9ucy5zdGF0dXMuZmV0Y2hEaXNwYXRjaGVkID0gdHJ1ZVxuICAgIGNvbnN0IHAgPSBuZXcgUHJvbWlzZShwY2FsbCkudGhlbihjYiwgZWIpXG4gICAgcC5fX2Fib3J0Q29udHJvbGxlciA9IGFjXG4gICAgcC5fX3N0YWxlV2hpbGVGZXRjaGluZyA9IHZcbiAgICBwLl9fcmV0dXJuZWQgPSBudWxsXG4gICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIGludGVybmFsLCBkb24ndCBleHBvc2Ugc3RhdHVzLlxuICAgICAgdGhpcy5zZXQoaywgcCwgeyAuLi5mZXRjaE9wdHMub3B0aW9ucywgc3RhdHVzOiB1bmRlZmluZWQgfSlcbiAgICAgIGluZGV4ID0gdGhpcy5rZXlNYXAuZ2V0KGspXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudmFsTGlzdFtpbmRleF0gPSBwXG4gICAgfVxuICAgIHJldHVybiBwXG4gIH1cblxuICBpc0JhY2tncm91bmRGZXRjaChwKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHAgJiZcbiAgICAgIHR5cGVvZiBwID09PSAnb2JqZWN0JyAmJlxuICAgICAgdHlwZW9mIHAudGhlbiA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICBwLFxuICAgICAgICAnX19zdGFsZVdoaWxlRmV0Y2hpbmcnXG4gICAgICApICYmXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocCwgJ19fcmV0dXJuZWQnKSAmJlxuICAgICAgKHAuX19yZXR1cm5lZCA9PT0gcCB8fCBwLl9fcmV0dXJuZWQgPT09IG51bGwpXG4gICAgKVxuICB9XG5cbiAgLy8gdGhpcyB0YWtlcyB0aGUgdW5pb24gb2YgZ2V0KCkgYW5kIHNldCgpIG9wdHMsIGJlY2F1c2UgaXQgZG9lcyBib3RoXG4gIGFzeW5jIGZldGNoKFxuICAgIGssXG4gICAge1xuICAgICAgLy8gZ2V0IG9wdGlvbnNcbiAgICAgIGFsbG93U3RhbGUgPSB0aGlzLmFsbG93U3RhbGUsXG4gICAgICB1cGRhdGVBZ2VPbkdldCA9IHRoaXMudXBkYXRlQWdlT25HZXQsXG4gICAgICBub0RlbGV0ZU9uU3RhbGVHZXQgPSB0aGlzLm5vRGVsZXRlT25TdGFsZUdldCxcbiAgICAgIC8vIHNldCBvcHRpb25zXG4gICAgICB0dGwgPSB0aGlzLnR0bCxcbiAgICAgIG5vRGlzcG9zZU9uU2V0ID0gdGhpcy5ub0Rpc3Bvc2VPblNldCxcbiAgICAgIHNpemUgPSAwLFxuICAgICAgc2l6ZUNhbGN1bGF0aW9uID0gdGhpcy5zaXplQ2FsY3VsYXRpb24sXG4gICAgICBub1VwZGF0ZVRUTCA9IHRoaXMubm9VcGRhdGVUVEwsXG4gICAgICAvLyBmZXRjaCBleGNsdXNpdmUgb3B0aW9uc1xuICAgICAgbm9EZWxldGVPbkZldGNoUmVqZWN0aW9uID0gdGhpcy5ub0RlbGV0ZU9uRmV0Y2hSZWplY3Rpb24sXG4gICAgICBhbGxvd1N0YWxlT25GZXRjaFJlamVjdGlvbiA9IHRoaXMuYWxsb3dTdGFsZU9uRmV0Y2hSZWplY3Rpb24sXG4gICAgICBpZ25vcmVGZXRjaEFib3J0ID0gdGhpcy5pZ25vcmVGZXRjaEFib3J0LFxuICAgICAgYWxsb3dTdGFsZU9uRmV0Y2hBYm9ydCA9IHRoaXMuYWxsb3dTdGFsZU9uRmV0Y2hBYm9ydCxcbiAgICAgIGZldGNoQ29udGV4dCA9IHRoaXMuZmV0Y2hDb250ZXh0LFxuICAgICAgZm9yY2VSZWZyZXNoID0gZmFsc2UsXG4gICAgICBzdGF0dXMsXG4gICAgICBzaWduYWwsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGlmICghdGhpcy5mZXRjaE1ldGhvZCkge1xuICAgICAgaWYgKHN0YXR1cykgc3RhdHVzLmZldGNoID0gJ2dldCdcbiAgICAgIHJldHVybiB0aGlzLmdldChrLCB7XG4gICAgICAgIGFsbG93U3RhbGUsXG4gICAgICAgIHVwZGF0ZUFnZU9uR2V0LFxuICAgICAgICBub0RlbGV0ZU9uU3RhbGVHZXQsXG4gICAgICAgIHN0YXR1cyxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGFsbG93U3RhbGUsXG4gICAgICB1cGRhdGVBZ2VPbkdldCxcbiAgICAgIG5vRGVsZXRlT25TdGFsZUdldCxcbiAgICAgIHR0bCxcbiAgICAgIG5vRGlzcG9zZU9uU2V0LFxuICAgICAgc2l6ZSxcbiAgICAgIHNpemVDYWxjdWxhdGlvbixcbiAgICAgIG5vVXBkYXRlVFRMLFxuICAgICAgbm9EZWxldGVPbkZldGNoUmVqZWN0aW9uLFxuICAgICAgYWxsb3dTdGFsZU9uRmV0Y2hSZWplY3Rpb24sXG4gICAgICBhbGxvd1N0YWxlT25GZXRjaEFib3J0LFxuICAgICAgaWdub3JlRmV0Y2hBYm9ydCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIHNpZ25hbCxcbiAgICB9XG5cbiAgICBsZXQgaW5kZXggPSB0aGlzLmtleU1hcC5nZXQoaylcbiAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHN0YXR1cykgc3RhdHVzLmZldGNoID0gJ21pc3MnXG4gICAgICBjb25zdCBwID0gdGhpcy5iYWNrZ3JvdW5kRmV0Y2goaywgaW5kZXgsIG9wdGlvbnMsIGZldGNoQ29udGV4dClcbiAgICAgIHJldHVybiAocC5fX3JldHVybmVkID0gcClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaW4gY2FjaGUsIG1heWJlIGFscmVhZHkgZmV0Y2hpbmdcbiAgICAgIGNvbnN0IHYgPSB0aGlzLnZhbExpc3RbaW5kZXhdXG4gICAgICBpZiAodGhpcy5pc0JhY2tncm91bmRGZXRjaCh2KSkge1xuICAgICAgICBjb25zdCBzdGFsZSA9XG4gICAgICAgICAgYWxsb3dTdGFsZSAmJiB2Ll9fc3RhbGVXaGlsZUZldGNoaW5nICE9PSB1bmRlZmluZWRcbiAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgIHN0YXR1cy5mZXRjaCA9ICdpbmZsaWdodCdcbiAgICAgICAgICBpZiAoc3RhbGUpIHN0YXR1cy5yZXR1cm5lZFN0YWxlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGFsZSA/IHYuX19zdGFsZVdoaWxlRmV0Y2hpbmcgOiAodi5fX3JldHVybmVkID0gdilcbiAgICAgIH1cblxuICAgICAgLy8gaWYgd2UgZm9yY2UgYSByZWZyZXNoLCB0aGF0IG1lYW5zIGRvIE5PVCBzZXJ2ZSB0aGUgY2FjaGVkIHZhbHVlLFxuICAgICAgLy8gdW5sZXNzIHdlIGFyZSBhbHJlYWR5IGluIHRoZSBwcm9jZXNzIG9mIHJlZnJlc2hpbmcgdGhlIGNhY2hlLlxuICAgICAgY29uc3QgaXNTdGFsZSA9IHRoaXMuaXNTdGFsZShpbmRleClcbiAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmICFpc1N0YWxlKSB7XG4gICAgICAgIGlmIChzdGF0dXMpIHN0YXR1cy5mZXRjaCA9ICdoaXQnXG4gICAgICAgIHRoaXMubW92ZVRvVGFpbChpbmRleClcbiAgICAgICAgaWYgKHVwZGF0ZUFnZU9uR2V0KSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVJdGVtQWdlKGluZGV4KVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdHVzVFRMKHN0YXR1cywgaW5kZXgpXG4gICAgICAgIHJldHVybiB2XG4gICAgICB9XG5cbiAgICAgIC8vIG9rLCBpdCBpcyBzdGFsZSBvciBhIGZvcmNlZCByZWZyZXNoLCBhbmQgbm90IGFscmVhZHkgZmV0Y2hpbmcuXG4gICAgICAvLyByZWZyZXNoIHRoZSBjYWNoZS5cbiAgICAgIGNvbnN0IHAgPSB0aGlzLmJhY2tncm91bmRGZXRjaChrLCBpbmRleCwgb3B0aW9ucywgZmV0Y2hDb250ZXh0KVxuICAgICAgY29uc3QgaGFzU3RhbGUgPSBwLl9fc3RhbGVXaGlsZUZldGNoaW5nICE9PSB1bmRlZmluZWRcbiAgICAgIGNvbnN0IHN0YWxlVmFsID0gaGFzU3RhbGUgJiYgYWxsb3dTdGFsZVxuICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICBzdGF0dXMuZmV0Y2ggPSBoYXNTdGFsZSAmJiBpc1N0YWxlID8gJ3N0YWxlJyA6ICdyZWZyZXNoJ1xuICAgICAgICBpZiAoc3RhbGVWYWwgJiYgaXNTdGFsZSkgc3RhdHVzLnJldHVybmVkU3RhbGUgPSB0cnVlXG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhbGVWYWwgPyBwLl9fc3RhbGVXaGlsZUZldGNoaW5nIDogKHAuX19yZXR1cm5lZCA9IHApXG4gICAgfVxuICB9XG5cbiAgZ2V0KFxuICAgIGssXG4gICAge1xuICAgICAgYWxsb3dTdGFsZSA9IHRoaXMuYWxsb3dTdGFsZSxcbiAgICAgIHVwZGF0ZUFnZU9uR2V0ID0gdGhpcy51cGRhdGVBZ2VPbkdldCxcbiAgICAgIG5vRGVsZXRlT25TdGFsZUdldCA9IHRoaXMubm9EZWxldGVPblN0YWxlR2V0LFxuICAgICAgc3RhdHVzLFxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMua2V5TWFwLmdldChrKVxuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsTGlzdFtpbmRleF1cbiAgICAgIGNvbnN0IGZldGNoaW5nID0gdGhpcy5pc0JhY2tncm91bmRGZXRjaCh2YWx1ZSlcbiAgICAgIHRoaXMuc3RhdHVzVFRMKHN0YXR1cywgaW5kZXgpXG4gICAgICBpZiAodGhpcy5pc1N0YWxlKGluZGV4KSkge1xuICAgICAgICBpZiAoc3RhdHVzKSBzdGF0dXMuZ2V0ID0gJ3N0YWxlJ1xuICAgICAgICAvLyBkZWxldGUgb25seSBpZiBub3QgYW4gaW4tZmxpZ2h0IGJhY2tncm91bmQgZmV0Y2hcbiAgICAgICAgaWYgKCFmZXRjaGluZykge1xuICAgICAgICAgIGlmICghbm9EZWxldGVPblN0YWxlR2V0KSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShrKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdHVzKSBzdGF0dXMucmV0dXJuZWRTdGFsZSA9IGFsbG93U3RhbGVcbiAgICAgICAgICByZXR1cm4gYWxsb3dTdGFsZSA/IHZhbHVlIDogdW5kZWZpbmVkXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgc3RhdHVzLnJldHVybmVkU3RhbGUgPVxuICAgICAgICAgICAgICBhbGxvd1N0YWxlICYmIHZhbHVlLl9fc3RhbGVXaGlsZUZldGNoaW5nICE9PSB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGFsbG93U3RhbGUgPyB2YWx1ZS5fX3N0YWxlV2hpbGVGZXRjaGluZyA6IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc3RhdHVzKSBzdGF0dXMuZ2V0ID0gJ2hpdCdcbiAgICAgICAgLy8gaWYgd2UncmUgY3VycmVudGx5IGZldGNoaW5nIGl0LCB3ZSBkb24ndCBhY3R1YWxseSBoYXZlIGl0IHlldFxuICAgICAgICAvLyBpdCdzIG5vdCBzdGFsZSwgd2hpY2ggbWVhbnMgdGhpcyBpc24ndCBhIHN0YWxlV2hpbGVSZWZldGNoaW5nLlxuICAgICAgICAvLyBJZiBpdCdzIG5vdCBzdGFsZSwgYW5kIGZldGNoaW5nLCBBTkQgaGFzIGEgX19zdGFsZVdoaWxlRmV0Y2hpbmdcbiAgICAgICAgLy8gdmFsdWUsIHRoZW4gdGhhdCBtZWFucyB0aGUgdXNlciBmZXRjaGVkIHdpdGgge2ZvcmNlUmVmcmVzaDp0cnVlfSxcbiAgICAgICAgLy8gc28gaXQncyBzYWZlIHRvIHJldHVybiB0aGF0IHZhbHVlLlxuICAgICAgICBpZiAoZmV0Y2hpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuX19zdGFsZVdoaWxlRmV0Y2hpbmdcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vdmVUb1RhaWwoaW5kZXgpXG4gICAgICAgIGlmICh1cGRhdGVBZ2VPbkdldCkge1xuICAgICAgICAgIHRoaXMudXBkYXRlSXRlbUFnZShpbmRleClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHN0YXR1cykge1xuICAgICAgc3RhdHVzLmdldCA9ICdtaXNzJ1xuICAgIH1cbiAgfVxuXG4gIGNvbm5lY3QocCwgbikge1xuICAgIHRoaXMucHJldltuXSA9IHBcbiAgICB0aGlzLm5leHRbcF0gPSBuXG4gIH1cblxuICBtb3ZlVG9UYWlsKGluZGV4KSB7XG4gICAgLy8gaWYgdGFpbCBhbHJlYWR5LCBub3RoaW5nIHRvIGRvXG4gICAgLy8gaWYgaGVhZCwgbW92ZSBoZWFkIHRvIG5leHRbaW5kZXhdXG4gICAgLy8gZWxzZVxuICAgIC8vICAgbW92ZSBuZXh0W3ByZXZbaW5kZXhdXSB0byBuZXh0W2luZGV4XSAoaGVhZCBoYXMgbm8gcHJldilcbiAgICAvLyAgIG1vdmUgcHJldltuZXh0W2luZGV4XV0gdG8gcHJldltpbmRleF1cbiAgICAvLyBwcmV2W2luZGV4XSA9IHRhaWxcbiAgICAvLyBuZXh0W3RhaWxdID0gaW5kZXhcbiAgICAvLyB0YWlsID0gaW5kZXhcbiAgICBpZiAoaW5kZXggIT09IHRoaXMudGFpbCkge1xuICAgICAgaWYgKGluZGV4ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgICAgdGhpcy5oZWFkID0gdGhpcy5uZXh0W2luZGV4XVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jb25uZWN0KHRoaXMucHJldltpbmRleF0sIHRoaXMubmV4dFtpbmRleF0pXG4gICAgICB9XG4gICAgICB0aGlzLmNvbm5lY3QodGhpcy50YWlsLCBpbmRleClcbiAgICAgIHRoaXMudGFpbCA9IGluZGV4XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRlbCgpIHtcbiAgICBkZXByZWNhdGVkTWV0aG9kKCdkZWwnLCAnZGVsZXRlJylcbiAgICByZXR1cm4gdGhpcy5kZWxldGVcbiAgfVxuXG4gIGRlbGV0ZShrKSB7XG4gICAgbGV0IGRlbGV0ZWQgPSBmYWxzZVxuICAgIGlmICh0aGlzLnNpemUgIT09IDApIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5rZXlNYXAuZ2V0KGspXG4gICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWxldGVkID0gdHJ1ZVxuICAgICAgICBpZiAodGhpcy5zaXplID09PSAxKSB7XG4gICAgICAgICAgdGhpcy5jbGVhcigpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVJdGVtU2l6ZShpbmRleClcbiAgICAgICAgICBjb25zdCB2ID0gdGhpcy52YWxMaXN0W2luZGV4XVxuICAgICAgICAgIGlmICh0aGlzLmlzQmFja2dyb3VuZEZldGNoKHYpKSB7XG4gICAgICAgICAgICB2Ll9fYWJvcnRDb250cm9sbGVyLmFib3J0KG5ldyBFcnJvcignZGVsZXRlZCcpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2UodiwgaywgJ2RlbGV0ZScpXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlQWZ0ZXIpIHtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlZC5wdXNoKFt2LCBrLCAnZGVsZXRlJ10pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMua2V5TWFwLmRlbGV0ZShrKVxuICAgICAgICAgIHRoaXMua2V5TGlzdFtpbmRleF0gPSBudWxsXG4gICAgICAgICAgdGhpcy52YWxMaXN0W2luZGV4XSA9IG51bGxcbiAgICAgICAgICBpZiAoaW5kZXggPT09IHRoaXMudGFpbCkge1xuICAgICAgICAgICAgdGhpcy50YWlsID0gdGhpcy5wcmV2W2luZGV4XVxuICAgICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IHRoaXMuaGVhZCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy5uZXh0W2luZGV4XVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5leHRbdGhpcy5wcmV2W2luZGV4XV0gPSB0aGlzLm5leHRbaW5kZXhdXG4gICAgICAgICAgICB0aGlzLnByZXZbdGhpcy5uZXh0W2luZGV4XV0gPSB0aGlzLnByZXZbaW5kZXhdXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuc2l6ZS0tXG4gICAgICAgICAgdGhpcy5mcmVlLnB1c2goaW5kZXgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzcG9zZWQpIHtcbiAgICAgIHdoaWxlICh0aGlzLmRpc3Bvc2VkLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmRpc3Bvc2VBZnRlciguLi50aGlzLmRpc3Bvc2VkLnNoaWZ0KCkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZWxldGVkXG4gIH1cblxuICBjbGVhcigpIHtcbiAgICBmb3IgKGNvbnN0IGluZGV4IG9mIHRoaXMucmluZGV4ZXMoeyBhbGxvd1N0YWxlOiB0cnVlIH0pKSB7XG4gICAgICBjb25zdCB2ID0gdGhpcy52YWxMaXN0W2luZGV4XVxuICAgICAgaWYgKHRoaXMuaXNCYWNrZ3JvdW5kRmV0Y2godikpIHtcbiAgICAgICAgdi5fX2Fib3J0Q29udHJvbGxlci5hYm9ydChuZXcgRXJyb3IoJ2RlbGV0ZWQnKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGsgPSB0aGlzLmtleUxpc3RbaW5kZXhdXG4gICAgICAgIHRoaXMuZGlzcG9zZSh2LCBrLCAnZGVsZXRlJylcbiAgICAgICAgaWYgKHRoaXMuZGlzcG9zZUFmdGVyKSB7XG4gICAgICAgICAgdGhpcy5kaXNwb3NlZC5wdXNoKFt2LCBrLCAnZGVsZXRlJ10pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmtleU1hcC5jbGVhcigpXG4gICAgdGhpcy52YWxMaXN0LmZpbGwobnVsbClcbiAgICB0aGlzLmtleUxpc3QuZmlsbChudWxsKVxuICAgIGlmICh0aGlzLnR0bHMpIHtcbiAgICAgIHRoaXMudHRscy5maWxsKDApXG4gICAgICB0aGlzLnN0YXJ0cy5maWxsKDApXG4gICAgfVxuICAgIGlmICh0aGlzLnNpemVzKSB7XG4gICAgICB0aGlzLnNpemVzLmZpbGwoMClcbiAgICB9XG4gICAgdGhpcy5oZWFkID0gMFxuICAgIHRoaXMudGFpbCA9IDBcbiAgICB0aGlzLmluaXRpYWxGaWxsID0gMVxuICAgIHRoaXMuZnJlZS5sZW5ndGggPSAwXG4gICAgdGhpcy5jYWxjdWxhdGVkU2l6ZSA9IDBcbiAgICB0aGlzLnNpemUgPSAwXG4gICAgaWYgKHRoaXMuZGlzcG9zZWQpIHtcbiAgICAgIHdoaWxlICh0aGlzLmRpc3Bvc2VkLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmRpc3Bvc2VBZnRlciguLi50aGlzLmRpc3Bvc2VkLnNoaWZ0KCkpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJlc2V0KCkge1xuICAgIGRlcHJlY2F0ZWRNZXRob2QoJ3Jlc2V0JywgJ2NsZWFyJylcbiAgICByZXR1cm4gdGhpcy5jbGVhclxuICB9XG5cbiAgZ2V0IGxlbmd0aCgpIHtcbiAgICBkZXByZWNhdGVkUHJvcGVydHkoJ2xlbmd0aCcsICdzaXplJylcbiAgICByZXR1cm4gdGhpcy5zaXplXG4gIH1cblxuICBzdGF0aWMgZ2V0IEFib3J0Q29udHJvbGxlcigpIHtcbiAgICByZXR1cm4gQUNcbiAgfVxuICBzdGF0aWMgZ2V0IEFib3J0U2lnbmFsKCkge1xuICAgIHJldHVybiBBU1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExSVUNhY2hlXG4iXSwibmFtZXMiOlsicGVyZiIsInBlcmZvcm1hbmNlIiwibm93IiwiRGF0ZSIsIkFDIiwiQWJvcnRDb250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwic2lnbmFsIiwiQVMiLCJhYm9ydCIsInJlYXNvbiIsIkVycm9yIiwiYWJvcnRlZCIsImRpc3BhdGNoRXZlbnQiLCJ0eXBlIiwidGFyZ2V0IiwiaGFzQWJvcnRTaWduYWwiLCJBYm9ydFNpZ25hbCIsImhhc0FDQWJvcnRTaWduYWwiLCJ1bmRlZmluZWQiLCJfbGlzdGVuZXJzIiwiZSIsIm9uYWJvcnQiLCJmb3JFYWNoIiwiZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldiIsImZuIiwicHVzaCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmaWx0ZXIiLCJ3YXJuZWQiLCJTZXQiLCJkZXByZWNhdGVkT3B0aW9uIiwib3B0IiwiaW5zdGVhZCIsImNvZGUiLCJzaG91bGRXYXJuIiwid2FybiIsIkxSVUNhY2hlIiwiZGVwcmVjYXRlZE1ldGhvZCIsIm1ldGhvZCIsInByb3RvdHlwZSIsImdldCIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVtaXRXYXJuaW5nIiwiYSIsInByb2Nlc3MiLCJjb25zb2xlIiwiZXJyb3IiLCJoYXMiLCJ3aGF0IiwiYWRkIiwiaXNQb3NJbnQiLCJuIiwiTWF0aCIsImZsb29yIiwiaXNGaW5pdGUiLCJnZXRVaW50QXJyYXkiLCJtYXgiLCJwb3ciLCJVaW50OEFycmF5IiwiVWludDE2QXJyYXkiLCJVaW50MzJBcnJheSIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJaZXJvQXJyYXkiLCJBcnJheSIsInNpemUiLCJzdXBlciIsImZpbGwiLCJTdGFjayIsIlVpbnRBcnJheSIsImhlYXAiLCJsZW5ndGgiLCJwb3AiLCJvcHRpb25zIiwidHRsIiwidHRsUmVzb2x1dGlvbiIsInR0bEF1dG9wdXJnZSIsInVwZGF0ZUFnZU9uR2V0IiwidXBkYXRlQWdlT25IYXMiLCJhbGxvd1N0YWxlIiwiZGlzcG9zZSIsImRpc3Bvc2VBZnRlciIsIm5vRGlzcG9zZU9uU2V0Iiwibm9VcGRhdGVUVEwiLCJtYXhTaXplIiwibWF4RW50cnlTaXplIiwic2l6ZUNhbGN1bGF0aW9uIiwiZmV0Y2hNZXRob2QiLCJmZXRjaENvbnRleHQiLCJub0RlbGV0ZU9uRmV0Y2hSZWplY3Rpb24iLCJub0RlbGV0ZU9uU3RhbGVHZXQiLCJhbGxvd1N0YWxlT25GZXRjaFJlamVjdGlvbiIsImFsbG93U3RhbGVPbkZldGNoQWJvcnQiLCJpZ25vcmVGZXRjaEFib3J0IiwibWF4QWdlIiwic3RhbGUiLCJUeXBlRXJyb3IiLCJrZXlNYXAiLCJNYXAiLCJrZXlMaXN0IiwidmFsTGlzdCIsIm5leHQiLCJwcmV2IiwiaGVhZCIsInRhaWwiLCJmcmVlIiwiaW5pdGlhbEZpbGwiLCJkaXNwb3NlZCIsImluaXRpYWxpemVTaXplVHJhY2tpbmciLCJpbml0aWFsaXplVFRMVHJhY2tpbmciLCJnZXRSZW1haW5pbmdUVEwiLCJrZXkiLCJJbmZpbml0eSIsInR0bHMiLCJzdGFydHMiLCJzZXRJdGVtVFRMIiwiaW5kZXgiLCJzdGFydCIsInQiLCJzZXRUaW1lb3V0IiwiaXNTdGFsZSIsImRlbGV0ZSIsInVucmVmIiwidXBkYXRlSXRlbUFnZSIsInN0YXR1c1RUTCIsInN0YXR1cyIsImNhY2hlZE5vdyIsImdldE5vdyIsInJlbWFpbmluZ1RUTCIsIl9pbmRleCIsIl9zdGF0dXMiLCJfdHRsIiwiX3N0YXJ0IiwiY2FsY3VsYXRlZFNpemUiLCJzaXplcyIsInJlbW92ZUl0ZW1TaXplIiwicmVxdWlyZVNpemUiLCJrIiwidiIsImlzQmFja2dyb3VuZEZldGNoIiwiYWRkSXRlbVNpemUiLCJldmljdCIsImVudHJ5U2l6ZSIsInRvdGFsQ2FsY3VsYXRlZFNpemUiLCJfc2l6ZSIsIl9rIiwiX3YiLCJpIiwiaXNWYWxpZEluZGV4IiwiaW5kZXhlcyIsInJpbmRleGVzIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJlbnRyaWVzIiwiZmluZCIsImdldE9wdGlvbnMiLCJ0aGlzcCIsImNhbGwiLCJyZm9yRWFjaCIsInBydW5lIiwicHVyZ2VTdGFsZSIsImRlbGV0ZWQiLCJkdW1wIiwiYXJyIiwidmFsdWUiLCJfX3N0YWxlV2hpbGVGZXRjaGluZyIsImVudHJ5IiwiYWdlIiwidW5zaGlmdCIsImxvYWQiLCJjbGVhciIsInNldCIsIl9yZWFzb24iLCJtYXhFbnRyeVNpemVFeGNlZWRlZCIsIm5ld0luZGV4IiwibW92ZVRvVGFpbCIsIm9sZFZhbCIsIl9fYWJvcnRDb250cm9sbGVyIiwib2xkVmFsdWUiLCJzaGlmdCIsInZhbCIsInBlZWsiLCJiYWNrZ3JvdW5kRmV0Y2giLCJjb250ZXh0IiwiYWMiLCJmZXRjaE9wdHMiLCJjYiIsInVwZGF0ZUNhY2hlIiwiaWdub3JlQWJvcnQiLCJmZXRjaEFib3J0ZWQiLCJmZXRjaEVycm9yIiwiZmV0Y2hBYm9ydElnbm9yZWQiLCJmZXRjaFJlc29sdmVkIiwicCIsImZldGNoVXBkYXRlZCIsImZldGNoRmFpbCIsImVyIiwiYWxsb3dTdGFsZUFib3J0ZWQiLCJub0RlbGV0ZSIsInJldHVybmVkU3RhbGUiLCJfX3JldHVybmVkIiwiZmV0Y2hEaXNwYXRjaGVkIiwiUHJvbWlzZSIsInJlcyIsInJlaiIsInRoZW4iLCJmZXRjaFJlamVjdGVkIiwiaGFzT3duUHJvcGVydHkiLCJhc3luYyIsImZvcmNlUmVmcmVzaCIsImZldGNoIiwiaGFzU3RhbGUiLCJzdGFsZVZhbCIsImZldGNoaW5nIiwiY29ubmVjdCIsImRlbCIsInJlc2V0IiwiZmllbGQiLCJkZXByZWNhdGVkUHJvcGVydHkiXSwic291cmNlUm9vdCI6IiJ9